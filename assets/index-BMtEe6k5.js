(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Ny(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i0={exports:{}},Cs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy=Symbol.for("react.transitional.element"),Iy=Symbol.for("react.fragment");function a0(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var a in t)a!=="key"&&(n[a]=t[a])}else n=t;return t=n.ref,{$$typeof:wy,type:e,key:i,ref:t!==void 0?t:null,props:n}}Cs.Fragment=Iy;Cs.jsx=a0;Cs.jsxs=a0;i0.exports=Cs;var p=i0.exports,o0={exports:{}},K={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uc=Symbol.for("react.transitional.element"),Ry=Symbol.for("react.portal"),My=Symbol.for("react.fragment"),Dy=Symbol.for("react.strict_mode"),ky=Symbol.for("react.profiler"),Ly=Symbol.for("react.consumer"),Uy=Symbol.for("react.context"),Gy=Symbol.for("react.forward_ref"),Hy=Symbol.for("react.suspense"),By=Symbol.for("react.memo"),l0=Symbol.for("react.lazy"),Py=Symbol.for("react.activity"),Md=Symbol.iterator;function Oy(e){return e===null||typeof e!="object"?null:(e=Md&&e[Md]||e["@@iterator"],typeof e=="function"?e:null)}var s0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r0=Object.assign,u0={};function Ha(e,t,n){this.props=e,this.context=t,this.refs=u0,this.updater=n||s0}Ha.prototype.isReactComponent={};Ha.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ha.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function c0(){}c0.prototype=Ha.prototype;function cc(e,t,n){this.props=e,this.context=t,this.refs=u0,this.updater=n||s0}var dc=cc.prototype=new c0;dc.constructor=cc;r0(dc,Ha.prototype);dc.isPureReactComponent=!0;var Dd=Array.isArray;function jr(){}var we={H:null,A:null,T:null,S:null},d0=Object.prototype.hasOwnProperty;function fc(e,t,n){var i=n.ref;return{$$typeof:uc,type:e,key:t,ref:i!==void 0?i:null,props:n}}function zy(e,t){return fc(e.type,t,e.props)}function pc(e){return typeof e=="object"&&e!==null&&e.$$typeof===uc}function qy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var kd=/\/+/g;function Zs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?qy(""+e.key):t.toString(36)}function Vy(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(jr,jr):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Xi(e,t,n,i,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"bigint":case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case uc:case Ry:l=!0;break;case l0:return l=e._init,Xi(l(e._payload),t,n,i,a)}}if(l)return a=a(e),l=i===""?"."+Zs(e,0):i,Dd(a)?(n="",l!=null&&(n=l.replace(kd,"$&/")+"/"),Xi(a,t,n,"",function(d){return d})):a!=null&&(pc(a)&&(a=zy(a,n+(a.key==null||e&&e.key===a.key?"":(""+a.key).replace(kd,"$&/")+"/")+l)),t.push(a)),1;l=0;var r=i===""?".":i+":";if(Dd(e))for(var c=0;c<e.length;c++)i=e[c],o=r+Zs(i,c),l+=Xi(i,t,n,o,a);else if(c=Oy(e),typeof c=="function")for(e=c.call(e),c=0;!(i=e.next()).done;)i=i.value,o=r+Zs(i,c++),l+=Xi(i,t,n,o,a);else if(o==="object"){if(typeof e.then=="function")return Xi(Vy(e),t,n,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return l}function tl(e,t,n){if(e==null)return e;var i=[],a=0;return Xi(e,i,"","",function(o){return t.call(n,o,a++)}),i}function Fy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ld=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Yy={map:tl,forEach:function(e,t,n){tl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return tl(e,function(){t++}),t},toArray:function(e){return tl(e,function(t){return t})||[]},only:function(e){if(!pc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};K.Activity=Py;K.Children=Yy;K.Component=Ha;K.Fragment=My;K.Profiler=ky;K.PureComponent=cc;K.StrictMode=Dy;K.Suspense=Hy;K.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=we;K.__COMPILER_RUNTIME={__proto__:null,c:function(e){return we.H.useMemoCache(e)}};K.cache=function(e){return function(){return e.apply(null,arguments)}};K.cacheSignal=function(){return null};K.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=r0({},e.props),a=e.key;if(t!=null)for(o in t.key!==void 0&&(a=""+t.key),t)!d0.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(i[o]=t[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),r=0;r<o;r++)l[r]=arguments[r+2];i.children=l}return fc(e.type,a,i)};K.createContext=function(e){return e={$$typeof:Uy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:Ly,_context:e},e};K.createElement=function(e,t,n){var i,a={},o=null;if(t!=null)for(i in t.key!==void 0&&(o=""+t.key),t)d0.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(a[i]=t[i]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var r=Array(l),c=0;c<l;c++)r[c]=arguments[c+2];a.children=r}if(e&&e.defaultProps)for(i in l=e.defaultProps,l)a[i]===void 0&&(a[i]=l[i]);return fc(e,o,a)};K.createRef=function(){return{current:null}};K.forwardRef=function(e){return{$$typeof:Gy,render:e}};K.isValidElement=pc;K.lazy=function(e){return{$$typeof:l0,_payload:{_status:-1,_result:e},_init:Fy}};K.memo=function(e,t){return{$$typeof:By,type:e,compare:t===void 0?null:t}};K.startTransition=function(e){var t=we.T,n={};we.T=n;try{var i=e(),a=we.S;a!==null&&a(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(jr,Ld)}catch(o){Ld(o)}finally{t!==null&&n.types!==null&&(t.types=n.types),we.T=t}};K.unstable_useCacheRefresh=function(){return we.H.useCacheRefresh()};K.use=function(e){return we.H.use(e)};K.useActionState=function(e,t,n){return we.H.useActionState(e,t,n)};K.useCallback=function(e,t){return we.H.useCallback(e,t)};K.useContext=function(e){return we.H.useContext(e)};K.useDebugValue=function(){};K.useDeferredValue=function(e,t){return we.H.useDeferredValue(e,t)};K.useEffect=function(e,t){return we.H.useEffect(e,t)};K.useEffectEvent=function(e){return we.H.useEffectEvent(e)};K.useId=function(){return we.H.useId()};K.useImperativeHandle=function(e,t,n){return we.H.useImperativeHandle(e,t,n)};K.useInsertionEffect=function(e,t){return we.H.useInsertionEffect(e,t)};K.useLayoutEffect=function(e,t){return we.H.useLayoutEffect(e,t)};K.useMemo=function(e,t){return we.H.useMemo(e,t)};K.useOptimistic=function(e,t){return we.H.useOptimistic(e,t)};K.useReducer=function(e,t,n){return we.H.useReducer(e,t,n)};K.useRef=function(e){return we.H.useRef(e)};K.useState=function(e){return we.H.useState(e)};K.useSyncExternalStore=function(e,t,n){return we.H.useSyncExternalStore(e,t,n)};K.useTransition=function(){return we.H.useTransition()};K.version="19.2.3";o0.exports=K;var I=o0.exports;const Le=Ny(I);var f0={exports:{}},Es={},p0={exports:{}},h0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(w,U){var P=w.length;w.push(U);e:for(;0<P;){var ge=P-1>>>1,ve=w[ge];if(0<a(ve,U))w[ge]=U,w[P]=ve,P=ge;else break e}}function n(w){return w.length===0?null:w[0]}function i(w){if(w.length===0)return null;var U=w[0],P=w.pop();if(P!==U){w[0]=P;e:for(var ge=0,ve=w.length,mn=ve>>>1;ge<mn;){var mt=2*(ge+1)-1,gt=w[mt],vt=mt+1,V=w[vt];if(0>a(gt,P))vt<ve&&0>a(V,gt)?(w[ge]=V,w[vt]=P,ge=vt):(w[ge]=gt,w[mt]=P,ge=mt);else if(vt<ve&&0>a(V,P))w[ge]=V,w[vt]=P,ge=vt;else break e}}return U}function a(w,U){var P=w.sortIndex-U.sortIndex;return P!==0?P:w.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,r=l.now();e.unstable_now=function(){return l.now()-r}}var c=[],d=[],f=1,m=null,h=3,g=!1,_=!1,b=!1,T=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function S(w){for(var U=n(d);U!==null;){if(U.callback===null)i(d);else if(U.startTime<=w)i(d),U.sortIndex=U.expirationTime,t(c,U);else break;U=n(d)}}function E(w){if(b=!1,S(w),!_)if(n(c)!==null)_=!0,A||(A=!0,O());else{var U=n(d);U!==null&&G(E,U.startTime-w)}}var A=!1,C=-1,R=5,N=-1;function M(){return T?!0:!(e.unstable_now()-N<R)}function L(){if(T=!1,A){var w=e.unstable_now();N=w;var U=!0;try{e:{_=!1,b&&(b=!1,v(C),C=-1),g=!0;var P=h;try{t:{for(S(w),m=n(c);m!==null&&!(m.expirationTime>w&&M());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,h=m.priorityLevel;var ve=ge(m.expirationTime<=w);if(w=e.unstable_now(),typeof ve=="function"){m.callback=ve,S(w),U=!0;break t}m===n(c)&&i(c),S(w)}else i(c);m=n(c)}if(m!==null)U=!0;else{var mn=n(d);mn!==null&&G(E,mn.startTime-w),U=!1}}break e}finally{m=null,h=P,g=!1}U=void 0}}finally{U?O():A=!1}}}var O;if(typeof y=="function")O=function(){y(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,$=z.port2;z.port1.onmessage=L,O=function(){$.postMessage(null)}}else O=function(){x(L,0)};function G(w,U){C=x(function(){w(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(w){w.callback=null},e.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<w?Math.floor(1e3/w):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(w){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var P=h;h=U;try{return w()}finally{h=P}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(w,U){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var P=h;h=w;try{return U()}finally{h=P}},e.unstable_scheduleCallback=function(w,U,P){var ge=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?ge+P:ge):P=ge,w){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=P+ve,w={id:f++,callback:U,priorityLevel:w,startTime:P,expirationTime:ve,sortIndex:-1},P>ge?(w.sortIndex=P,t(d,w),n(c)===null&&w===n(d)&&(b?(v(C),C=-1):b=!0,G(E,P-ge))):(w.sortIndex=ve,t(c,w),_||g||(_=!0,A||(A=!0,O()))),w},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(w){var U=h;return function(){var P=h;h=U;try{return w.apply(this,arguments)}finally{h=P}}}})(h0);p0.exports=h0;var Jy=p0.exports,m0={exports:{}},ht={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky=I;function g0(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function qn(){}var ft={d:{f:qn,r:function(){throw Error(g0(522))},D:qn,C:qn,L:qn,m:qn,X:qn,S:qn,M:qn},p:0,findDOMNode:null},$y=Symbol.for("react.portal");function jy(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$y,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var fo=Ky.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function As(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ft;ht.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(g0(299));return jy(e,t,null,n)};ht.flushSync=function(e){var t=fo.T,n=ft.p;try{if(fo.T=null,ft.p=2,e)return e()}finally{fo.T=t,ft.p=n,ft.d.f()}};ht.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ft.d.C(e,t))};ht.prefetchDNS=function(e){typeof e=="string"&&ft.d.D(e)};ht.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=As(n,t.crossOrigin),a=typeof t.integrity=="string"?t.integrity:void 0,o=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?ft.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:a,fetchPriority:o}):n==="script"&&ft.d.X(e,{crossOrigin:i,integrity:a,fetchPriority:o,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ht.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=As(t.as,t.crossOrigin);ft.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ft.d.M(e)};ht.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=As(n,t.crossOrigin);ft.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ht.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=As(t.as,t.crossOrigin);ft.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ft.d.m(e)};ht.requestFormReset=function(e){ft.d.r(e)};ht.unstable_batchedUpdates=function(e,t){return e(t)};ht.useFormState=function(e,t,n){return fo.H.useFormState(e,t,n)};ht.useFormStatus=function(){return fo.H.useHostTransitionStatus()};ht.version="19.2.3";function v0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v0)}catch(e){console.error(e)}}v0(),m0.exports=ht;var Xy=m0.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var je=Jy,y0=I,Qy=Xy;function k(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function _0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function x0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function S0(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ud(e){if(zo(e)!==e)throw Error(k(188))}function Wy(e){var t=e.alternate;if(!t){if(t=zo(e),t===null)throw Error(k(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Ud(a),e;if(o===i)return Ud(a),t;o=o.sibling}throw Error(k(188))}if(n.return!==i.return)n=a,i=o;else{for(var l=!1,r=a.child;r;){if(r===n){l=!0,n=a,i=o;break}if(r===i){l=!0,i=a,n=o;break}r=r.sibling}if(!l){for(r=o.child;r;){if(r===n){l=!0,n=o,i=a;break}if(r===i){l=!0,i=o,n=a;break}r=r.sibling}if(!l)throw Error(k(189))}}if(n.alternate!==i)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?e:t}function b0(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b0(e),t!==null)return t;e=e.sibling}return null}var Ie=Object.assign,Zy=Symbol.for("react.element"),nl=Symbol.for("react.transitional.element"),ao=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),T0=Symbol.for("react.strict_mode"),Xr=Symbol.for("react.profiler"),C0=Symbol.for("react.consumer"),Cn=Symbol.for("react.context"),hc=Symbol.for("react.forward_ref"),Qr=Symbol.for("react.suspense"),Wr=Symbol.for("react.suspense_list"),mc=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),Zr=Symbol.for("react.activity"),e_=Symbol.for("react.memo_cache_sentinel"),Gd=Symbol.iterator;function Xa(e){return e===null||typeof e!="object"?null:(e=Gd&&e[Gd]||e["@@iterator"],typeof e=="function"?e:null)}var t_=Symbol.for("react.client.reference");function eu(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===t_?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ea:return"Fragment";case Xr:return"Profiler";case T0:return"StrictMode";case Qr:return"Suspense";case Wr:return"SuspenseList";case Zr:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ao:return"Portal";case Cn:return e.displayName||"Context";case C0:return(e._context.displayName||"Context")+".Consumer";case hc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mc:return t=e.displayName||null,t!==null?t:eu(e.type)||"Memo";case Vn:t=e._payload,e=e._init;try{return eu(e(t))}catch{}}return null}var oo=Array.isArray,Y=y0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=Qy.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ii={pending:!1,data:null,method:null,action:null},tu=[],ta=-1;function fn(e){return{current:e}}function Ze(e){0>ta||(e.current=tu[ta],tu[ta]=null,ta--)}function Te(e,t){ta++,tu[ta]=e.current,e.current=t}var dn=fn(null),Ao=fn(null),ni=fn(null),zl=fn(null);function ql(e,t){switch(Te(ni,t),Te(Ao,e),Te(dn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Vf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Vf(t),e=Fg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ze(dn),Te(dn,e)}function Ea(){Ze(dn),Ze(Ao),Ze(ni)}function nu(e){e.memoizedState!==null&&Te(zl,e);var t=dn.current,n=Fg(t,e.type);t!==n&&(Te(Ao,e),Te(dn,n))}function Vl(e){Ao.current===e&&(Ze(dn),Ze(Ao)),zl.current===e&&(Ze(zl),Ho._currentValue=Ii)}var er,Hd;function Ti(e){if(er===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);er=t&&t[1]||"",Hd=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+er+e+Hd}var tr=!1;function nr(e,t){if(!e||tr)return"";tr=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(g){var h=g}Reflect.construct(e,[],m)}else{try{m.call()}catch(g){h=g}e.call(m.prototype)}}else{try{throw Error()}catch(g){h=g}(m=e())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(g){if(g&&h&&typeof g.stack=="string")return[g.stack,h.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),l=o[0],r=o[1];if(l&&r){var c=l.split(`
`),d=r.split(`
`);for(a=i=0;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;for(;a<d.length&&!d[a].includes("DetermineComponentFrameRoot");)a++;if(i===c.length||a===d.length)for(i=c.length-1,a=d.length-1;1<=i&&0<=a&&c[i]!==d[a];)a--;for(;1<=i&&0<=a;i--,a--)if(c[i]!==d[a]){if(i!==1||a!==1)do if(i--,a--,0>a||c[i]!==d[a]){var f=`
`+c[i].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=i&&0<=a);break}}}finally{tr=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ti(n):""}function n_(e,t){switch(e.tag){case 26:case 27:case 5:return Ti(e.type);case 16:return Ti("Lazy");case 13:return e.child!==t&&t!==null?Ti("Suspense Fallback"):Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return nr(e.type,!1);case 11:return nr(e.type.render,!1);case 1:return nr(e.type,!0);case 31:return Ti("Activity");default:return""}}function Bd(e){try{var t="",n=null;do t+=n_(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var iu=Object.prototype.hasOwnProperty,gc=je.unstable_scheduleCallback,ir=je.unstable_cancelCallback,i_=je.unstable_shouldYield,a_=je.unstable_requestPaint,Mt=je.unstable_now,o_=je.unstable_getCurrentPriorityLevel,E0=je.unstable_ImmediatePriority,A0=je.unstable_UserBlockingPriority,Fl=je.unstable_NormalPriority,l_=je.unstable_LowPriority,N0=je.unstable_IdlePriority,s_=je.log,r_=je.unstable_setDisableYieldValue,qo=null,Dt=null;function Xn(e){if(typeof s_=="function"&&r_(e),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(qo,e)}catch{}}var kt=Math.clz32?Math.clz32:d_,u_=Math.log,c_=Math.LN2;function d_(e){return e>>>=0,e===0?32:31-(u_(e)/c_|0)|0}var il=256,al=262144,ol=4194304;function Ci(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ns(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var a=0,o=e.suspendedLanes,l=e.pingedLanes;e=e.warmLanes;var r=i&134217727;return r!==0?(i=r&~o,i!==0?a=Ci(i):(l&=r,l!==0?a=Ci(l):n||(n=r&~e,n!==0&&(a=Ci(n))))):(r=i&~o,r!==0?a=Ci(r):l!==0?a=Ci(l):n||(n=i&~e,n!==0&&(a=Ci(n)))),a===0?0:t!==0&&t!==a&&!(t&o)&&(o=a&-a,n=t&-t,o>=n||o===32&&(n&4194048)!==0)?t:a}function Vo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function f_(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w0(){var e=ol;return ol<<=1,!(ol&62914560)&&(ol=4194304),e}function ar(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function p_(e,t,n,i,a,o){var l=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var r=e.entanglements,c=e.expirationTimes,d=e.hiddenUpdates;for(n=l&~n;0<n;){var f=31-kt(n),m=1<<f;r[f]=0,c[f]=-1;var h=d[f];if(h!==null)for(d[f]=null,f=0;f<h.length;f++){var g=h[f];g!==null&&(g.lane&=-536870913)}n&=~m}i!==0&&I0(e,i,0),o!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=o&~(l&~t))}function I0(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-kt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function R0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-kt(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}function M0(e,t){var n=t&-t;return n=n&42?1:vc(n),n&(e.suspendedLanes|t)?0:n}function vc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function yc(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function D0(){var e=de.p;return e!==0?e:(e=window.event,e===void 0?32:tv(e.type))}function Pd(e,t){var n=de.p;try{return de.p=e,t()}finally{de.p=n}}var gi=Math.random().toString(36).slice(2),it="__reactFiber$"+gi,Et="__reactProps$"+gi,Ba="__reactContainer$"+gi,au="__reactEvents$"+gi,h_="__reactListeners$"+gi,m_="__reactHandles$"+gi,Od="__reactResources$"+gi,Yo="__reactMarker$"+gi;function _c(e){delete e[it],delete e[Et],delete e[au],delete e[h_],delete e[m_]}function na(e){var t=e[it];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ba]||n[it]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$f(e);e!==null;){if(n=e[it])return n;e=$f(e)}return t}e=n,n=e.parentNode}return null}function Pa(e){if(e=e[it]||e[Ba]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function lo(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(k(33))}function ha(e){var t=e[Od];return t||(t=e[Od]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Yo]=!0}var k0=new Set,L0={};function zi(e,t){Aa(e,t),Aa(e+"Capture",t)}function Aa(e,t){for(L0[e]=t,e=0;e<t.length;e++)k0.add(t[e])}var g_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zd={},qd={};function v_(e){return iu.call(qd,e)?!0:iu.call(zd,e)?!1:g_.test(e)?qd[e]=!0:(zd[e]=!0,!1)}function Tl(e,t,n){if(v_(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ll(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function vn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function Ot(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function U0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function y_(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ou(e){if(!e._valueTracker){var t=U0(e)?"checked":"value";e._valueTracker=y_(e,t,""+e[t])}}function G0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=U0(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Yl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var __=/[\n"\\]/g;function Vt(e){return e.replace(__,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function lu(e,t,n,i,a,o,l,r){e.name="",l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.type=l:e.removeAttribute("type"),t!=null?l==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ot(t)):e.value!==""+Ot(t)&&(e.value=""+Ot(t)):l!=="submit"&&l!=="reset"||e.removeAttribute("value"),t!=null?su(e,l,Ot(t)):n!=null?su(e,l,Ot(n)):i!=null&&e.removeAttribute("value"),a==null&&o!=null&&(e.defaultChecked=!!o),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.name=""+Ot(r):e.removeAttribute("name")}function H0(e,t,n,i,a,o,l,r){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){ou(e);return}n=n!=null?""+Ot(n):"",t=t!=null?""+Ot(t):n,r||t===e.value||(e.value=t),e.defaultValue=t}i=i??a,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=r?e.checked:!!i,e.defaultChecked=!!i,l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.name=l),ou(e)}function su(e,t,n){t==="number"&&Yl(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ma(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Ot(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function B0(e,t,n){if(t!=null&&(t=""+Ot(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Ot(n):""}function P0(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(k(92));if(oo(i)){if(1<i.length)throw Error(k(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Ot(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),ou(e)}function Na(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var x_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vd(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||x_.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function O0(e,t,n){if(t!=null&&typeof t!="object")throw Error(k(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var a in t)i=t[a],t.hasOwnProperty(a)&&n[a]!==i&&Vd(e,a,i)}else for(var o in t)t.hasOwnProperty(o)&&Vd(e,o,t[o])}function xc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),b_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cl(e){return b_.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function En(){}var ru=null;function Sc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ia=null,ga=null;function Fd(e){var t=Pa(e);if(t&&(e=t.stateNode)){var n=e[Et]||null;e:switch(e=t.stateNode,t.type){case"input":if(lu(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=i[Et]||null;if(!a)throw Error(k(90));lu(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&G0(i)}break e;case"textarea":B0(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ma(e,!!n.multiple,t,!1)}}}var or=!1;function z0(e,t,n){if(or)return e(t,n);or=!0;try{var i=e(t);return i}finally{if(or=!1,(ia!==null||ga!==null)&&(Ps(),ia&&(t=ia,e=ga,ga=ia=null,Fd(t),e)))for(t=0;t<e.length;t++)Fd(e[t])}}function No(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Et]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(k(231,t,typeof n));return n}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uu=!1;if(Rn)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){uu=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{uu=!1}var Qn=null,bc=null,El=null;function q0(){if(El)return El;var e,t=bc,n=t.length,i,a="value"in Qn?Qn.value:Qn.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(i=1;i<=l&&t[n-i]===a[o-i];i++);return El=a.slice(e,1<i?1-i:void 0)}function Al(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sl(){return!0}function Yd(){return!1}function At(e){function t(n,i,a,o,l){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var r in e)e.hasOwnProperty(r)&&(n=e[r],this[r]=n?n(o):o[r]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?sl:Yd,this.isPropagationStopped=Yd,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sl)},persist:function(){},isPersistent:sl}),t}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ws=At(qi),Jo=Ie({},qi,{view:0,detail:0}),T_=At(Jo),lr,sr,Wa,Is=Ie({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wa&&(Wa&&e.type==="mousemove"?(lr=e.screenX-Wa.screenX,sr=e.screenY-Wa.screenY):sr=lr=0,Wa=e),lr)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),Jd=At(Is),C_=Ie({},Is,{dataTransfer:0}),E_=At(C_),A_=Ie({},Jo,{relatedTarget:0}),rr=At(A_),N_=Ie({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),w_=At(N_),I_=Ie({},qi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),R_=At(I_),M_=Ie({},qi,{data:0}),Kd=At(M_),D_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=L_[e])?!!t[e]:!1}function Tc(){return U_}var G_=Ie({},Jo,{key:function(e){if(e.key){var t=D_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Al(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?k_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tc,charCode:function(e){return e.type==="keypress"?Al(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Al(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),H_=At(G_),B_=Ie({},Is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$d=At(B_),P_=Ie({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tc}),O_=At(P_),z_=Ie({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),q_=At(z_),V_=Ie({},Is,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),F_=At(V_),Y_=Ie({},qi,{newState:0,oldState:0}),J_=At(Y_),K_=[9,13,27,32],Cc=Rn&&"CompositionEvent"in window,po=null;Rn&&"documentMode"in document&&(po=document.documentMode);var $_=Rn&&"TextEvent"in window&&!po,V0=Rn&&(!Cc||po&&8<po&&11>=po),jd=" ",Xd=!1;function F0(e,t){switch(e){case"keyup":return K_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var aa=!1;function j_(e,t){switch(e){case"compositionend":return Y0(t);case"keypress":return t.which!==32?null:(Xd=!0,jd);case"textInput":return e=t.data,e===jd&&Xd?null:e;default:return null}}function X_(e,t){if(aa)return e==="compositionend"||!Cc&&F0(e,t)?(e=q0(),El=bc=Qn=null,aa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return V0&&t.locale!=="ko"?null:t.data;default:return null}}var Q_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Q_[e.type]:t==="textarea"}function J0(e,t,n,i){ia?ga?ga.push(i):ga=[i]:ia=i,t=us(t,"onChange"),0<t.length&&(n=new ws("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ho=null,wo=null;function W_(e){zg(e,0)}function Rs(e){var t=lo(e);if(G0(t))return e}function Wd(e,t){if(e==="change")return t}var K0=!1;if(Rn){var ur;if(Rn){var cr="oninput"in document;if(!cr){var Zd=document.createElement("div");Zd.setAttribute("oninput","return;"),cr=typeof Zd.oninput=="function"}ur=cr}else ur=!1;K0=ur&&(!document.documentMode||9<document.documentMode)}function ef(){ho&&(ho.detachEvent("onpropertychange",$0),wo=ho=null)}function $0(e){if(e.propertyName==="value"&&Rs(wo)){var t=[];J0(t,wo,e,Sc(e)),z0(W_,t)}}function Z_(e,t,n){e==="focusin"?(ef(),ho=t,wo=n,ho.attachEvent("onpropertychange",$0)):e==="focusout"&&ef()}function ex(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rs(wo)}function tx(e,t){if(e==="click")return Rs(t)}function nx(e,t){if(e==="input"||e==="change")return Rs(t)}function ix(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ut=typeof Object.is=="function"?Object.is:ix;function Io(e,t){if(Ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!iu.call(t,a)||!Ut(e[a],t[a]))return!1}return!0}function tf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nf(e,t){var n=tf(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tf(n)}}function j0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?j0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function X0(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Yl(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Yl(e.document)}return t}function Ec(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ax=Rn&&"documentMode"in document&&11>=document.documentMode,oa=null,cu=null,mo=null,du=!1;function af(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;du||oa==null||oa!==Yl(i)||(i=oa,"selectionStart"in i&&Ec(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),mo&&Io(mo,i)||(mo=i,i=us(cu,"onSelect"),0<i.length&&(t=new ws("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=oa)))}function Si(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var la={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionrun:Si("Transition","TransitionRun"),transitionstart:Si("Transition","TransitionStart"),transitioncancel:Si("Transition","TransitionCancel"),transitionend:Si("Transition","TransitionEnd")},dr={},Q0={};Rn&&(Q0=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function Vi(e){if(dr[e])return dr[e];if(!la[e])return e;var t=la[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Q0)return dr[e]=t[n];return e}var W0=Vi("animationend"),Z0=Vi("animationiteration"),em=Vi("animationstart"),ox=Vi("transitionrun"),lx=Vi("transitionstart"),sx=Vi("transitioncancel"),tm=Vi("transitionend"),nm=new Map,fu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fu.push("scrollEnd");function nn(e,t){nm.set(e,t),zi(t,[e])}var Jl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Pt=[],sa=0,Ac=0;function Ms(){for(var e=sa,t=Ac=sa=0;t<e;){var n=Pt[t];Pt[t++]=null;var i=Pt[t];Pt[t++]=null;var a=Pt[t];Pt[t++]=null;var o=Pt[t];if(Pt[t++]=null,i!==null&&a!==null){var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}o!==0&&im(n,a,o)}}function Ds(e,t,n,i){Pt[sa++]=e,Pt[sa++]=t,Pt[sa++]=n,Pt[sa++]=i,Ac|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Nc(e,t,n,i){return Ds(e,t,n,i),Kl(e)}function Fi(e,t){return Ds(e,null,null,t),Kl(e)}function im(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var a=!1,o=e.return;o!==null;)o.childLanes|=n,i=o.alternate,i!==null&&(i.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(a=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,a&&t!==null&&(a=31-kt(n),e=o.hiddenUpdates,i=e[a],i===null?e[a]=[t]:i.push(t),t.lane=n|536870912),o):null}function Kl(e){if(50<Co)throw Co=0,ku=null,Error(k(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ra={};function rx(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,n,i){return new rx(e,t,n,i)}function wc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nn(e,t){var n=e.alternate;return n===null?(n=It(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function am(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Nl(e,t,n,i,a,o){var l=0;if(i=e,typeof e=="function")wc(e)&&(l=1);else if(typeof e=="string")l=hS(e,n,dn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Zr:return e=It(31,n,t,a),e.elementType=Zr,e.lanes=o,e;case ea:return Ri(n.children,a,o,t);case T0:l=8,a|=24;break;case Xr:return e=It(12,n,t,a|2),e.elementType=Xr,e.lanes=o,e;case Qr:return e=It(13,n,t,a),e.elementType=Qr,e.lanes=o,e;case Wr:return e=It(19,n,t,a),e.elementType=Wr,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Cn:l=10;break e;case C0:l=9;break e;case hc:l=11;break e;case mc:l=14;break e;case Vn:l=16,i=null;break e}l=29,n=Error(k(130,e===null?"null":typeof e,"")),i=null}return t=It(l,n,t,a),t.elementType=e,t.type=i,t.lanes=o,t}function Ri(e,t,n,i){return e=It(7,e,i,t),e.lanes=n,e}function fr(e,t,n){return e=It(6,e,null,t),e.lanes=n,e}function om(e){var t=It(18,null,null,0);return t.stateNode=e,t}function pr(e,t,n){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var of=new WeakMap;function Ft(e,t){if(typeof e=="object"&&e!==null){var n=of.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Bd(t)},of.set(e,t),t)}return{value:e,source:t,stack:Bd(t)}}var ua=[],ca=0,$l=null,Ro=0,zt=[],qt=0,di=null,rn=1,un="";function bn(e,t){ua[ca++]=Ro,ua[ca++]=$l,$l=e,Ro=t}function lm(e,t,n){zt[qt++]=rn,zt[qt++]=un,zt[qt++]=di,di=e;var i=rn;e=un;var a=32-kt(i)-1;i&=~(1<<a),n+=1;var o=32-kt(t)+a;if(30<o){var l=a-a%5;o=(i&(1<<l)-1).toString(32),i>>=l,a-=l,rn=1<<32-kt(t)+a|n<<a|i,un=o+e}else rn=1<<o|n<<a|i,un=e}function Ic(e){e.return!==null&&(bn(e,1),lm(e,1,0))}function Rc(e){for(;e===$l;)$l=ua[--ca],ua[ca]=null,Ro=ua[--ca],ua[ca]=null;for(;e===di;)di=zt[--qt],zt[qt]=null,un=zt[--qt],zt[qt]=null,rn=zt[--qt],zt[qt]=null}function sm(e,t){zt[qt++]=rn,zt[qt++]=un,zt[qt++]=di,rn=t.id,un=t.overflow,di=e}var at=null,Ae=null,oe=!1,ii=null,Yt=!1,pu=Error(k(519));function fi(e){var t=Error(k(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mo(Ft(t,e)),pu}function lf(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[it]=e,t[Et]=i,n){case"dialog":te("cancel",t),te("close",t);break;case"iframe":case"object":case"embed":te("load",t);break;case"video":case"audio":for(n=0;n<Uo.length;n++)te(Uo[n],t);break;case"source":te("error",t);break;case"img":case"image":case"link":te("error",t),te("load",t);break;case"details":te("toggle",t);break;case"input":te("invalid",t),H0(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":te("invalid",t);break;case"textarea":te("invalid",t),P0(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||Vg(t.textContent,n)?(i.popover!=null&&(te("beforetoggle",t),te("toggle",t)),i.onScroll!=null&&te("scroll",t),i.onScrollEnd!=null&&te("scrollend",t),i.onClick!=null&&(t.onclick=En),t=!0):t=!1,t||fi(e,!0)}function sf(e){for(at=e.return;at;)switch(at.tag){case 5:case 31:case 13:Yt=!1;return;case 27:case 3:Yt=!0;return;default:at=at.return}}function $i(e){if(e!==at)return!1;if(!oe)return sf(e),oe=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Bu(e.type,e.memoizedProps)),n=!n),n&&Ae&&fi(e),sf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(k(317));Ae=Kf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(k(317));Ae=Kf(e)}else t===27?(t=Ae,vi(e.type)?(e=qu,qu=null,Ae=e):Ae=t):Ae=at?Kt(e.stateNode.nextSibling):null;return!0}function Li(){Ae=at=null,oe=!1}function hr(){var e=ii;return e!==null&&(bt===null?bt=e:bt.push.apply(bt,e),ii=null),e}function Mo(e){ii===null?ii=[e]:ii.push(e)}var hu=fn(null),Yi=null,An=null;function Yn(e,t,n){Te(hu,t._currentValue),t._currentValue=n}function wn(e){e._currentValue=hu.current,Ze(hu)}function mu(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function gu(e,t,n,i){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var l=a.child;o=o.firstContext;e:for(;o!==null;){var r=o;o=a;for(var c=0;c<t.length;c++)if(r.context===t[c]){o.lanes|=n,r=o.alternate,r!==null&&(r.lanes|=n),mu(o.return,n,e),i||(l=null);break e}o=r.next}}else if(a.tag===18){if(l=a.return,l===null)throw Error(k(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),mu(l,n,e),l=null}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}}function Oa(e,t,n,i){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var l=a.alternate;if(l===null)throw Error(k(387));if(l=l.memoizedProps,l!==null){var r=a.type;Ut(a.pendingProps.value,l.value)||(e!==null?e.push(r):e=[r])}}else if(a===zl.current){if(l=a.alternate,l===null)throw Error(k(387));l.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(Ho):e=[Ho])}a=a.return}e!==null&&gu(t,e,n,i),t.flags|=262144}function jl(e){for(e=e.firstContext;e!==null;){if(!Ut(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ui(e){Yi=e,An=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ot(e){return rm(Yi,e)}function rl(e,t){return Yi===null&&Ui(e),rm(e,t)}function rm(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},An===null){if(e===null)throw Error(k(308));An=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else An=An.next=t;return n}var ux=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},cx=je.unstable_scheduleCallback,dx=je.unstable_NormalPriority,Ye={$$typeof:Cn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mc(){return{controller:new ux,data:new Map,refCount:0}}function Ko(e){e.refCount--,e.refCount===0&&cx(dx,function(){e.controller.abort()})}var go=null,vu=0,wa=0,va=null;function fx(e,t){if(go===null){var n=go=[];vu=0,wa=nd(),va={status:"pending",value:void 0,then:function(i){n.push(i)}}}return vu++,t.then(rf,rf),t}function rf(){if(--vu===0&&go!==null){va!==null&&(va.status="fulfilled");var e=go;go=null,wa=0,va=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function px(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var a=0;a<n.length;a++)(0,n[a])(t)},function(a){for(i.status="rejected",i.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),i}var uf=Y.S;Y.S=function(e,t){bg=Mt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&fx(e,t),uf!==null&&uf(e,t)};var Mi=fn(null);function Dc(){var e=Mi.current;return e!==null?e:Se.pooledCache}function wl(e,t){t===null?Te(Mi,Mi.current):Te(Mi,t.pool)}function um(){var e=Dc();return e===null?null:{parent:Ye._currentValue,pool:e}}var za=Error(k(460)),kc=Error(k(474)),ks=Error(k(542)),Xl={then:function(){}};function cf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cm(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(En,En),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ff(e),e;default:if(typeof t.status=="string")t.then(En,En);else{if(e=Se,e!==null&&100<e.shellSuspendCounter)throw Error(k(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=i}},function(i){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ff(e),e}throw Di=t,za}}function Ei(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Di=n,za):n}}var Di=null;function df(){if(Di===null)throw Error(k(459));var e=Di;return Di=null,e}function ff(e){if(e===za||e===ks)throw Error(k(483))}var ya=null,Do=0;function ul(e){var t=Do;return Do+=1,ya===null&&(ya=[]),cm(ya,e,t)}function Za(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function cl(e,t){throw t.$$typeof===Zy?Error(k(525)):(e=Object.prototype.toString.call(t),Error(k(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function dm(e){function t(x,v){if(e){var y=x.deletions;y===null?(x.deletions=[v],x.flags|=16):y.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function i(x){for(var v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function a(x,v){return x=Nn(x,v),x.index=0,x.sibling=null,x}function o(x,v,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<v?(x.flags|=67108866,v):y):(x.flags|=67108866,v)):(x.flags|=1048576,v)}function l(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function r(x,v,y,S){return v===null||v.tag!==6?(v=fr(y,x.mode,S),v.return=x,v):(v=a(v,y),v.return=x,v)}function c(x,v,y,S){var E=y.type;return E===ea?f(x,v,y.props.children,S,y.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Vn&&Ei(E)===v.type)?(v=a(v,y.props),Za(v,y),v.return=x,v):(v=Nl(y.type,y.key,y.props,null,x.mode,S),Za(v,y),v.return=x,v)}function d(x,v,y,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=pr(y,x.mode,S),v.return=x,v):(v=a(v,y.children||[]),v.return=x,v)}function f(x,v,y,S,E){return v===null||v.tag!==7?(v=Ri(y,x.mode,S,E),v.return=x,v):(v=a(v,y),v.return=x,v)}function m(x,v,y){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=fr(""+v,x.mode,y),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case nl:return y=Nl(v.type,v.key,v.props,null,x.mode,y),Za(y,v),y.return=x,y;case ao:return v=pr(v,x.mode,y),v.return=x,v;case Vn:return v=Ei(v),m(x,v,y)}if(oo(v)||Xa(v))return v=Ri(v,x.mode,y,null),v.return=x,v;if(typeof v.then=="function")return m(x,ul(v),y);if(v.$$typeof===Cn)return m(x,rl(x,v),y);cl(x,v)}return null}function h(x,v,y,S){var E=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return E!==null?null:r(x,v,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case nl:return y.key===E?c(x,v,y,S):null;case ao:return y.key===E?d(x,v,y,S):null;case Vn:return y=Ei(y),h(x,v,y,S)}if(oo(y)||Xa(y))return E!==null?null:f(x,v,y,S,null);if(typeof y.then=="function")return h(x,v,ul(y),S);if(y.$$typeof===Cn)return h(x,v,rl(x,y),S);cl(x,y)}return null}function g(x,v,y,S,E){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return x=x.get(y)||null,r(v,x,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nl:return x=x.get(S.key===null?y:S.key)||null,c(v,x,S,E);case ao:return x=x.get(S.key===null?y:S.key)||null,d(v,x,S,E);case Vn:return S=Ei(S),g(x,v,y,S,E)}if(oo(S)||Xa(S))return x=x.get(y)||null,f(v,x,S,E,null);if(typeof S.then=="function")return g(x,v,y,ul(S),E);if(S.$$typeof===Cn)return g(x,v,y,rl(v,S),E);cl(v,S)}return null}function _(x,v,y,S){for(var E=null,A=null,C=v,R=v=0,N=null;C!==null&&R<y.length;R++){C.index>R?(N=C,C=null):N=C.sibling;var M=h(x,C,y[R],S);if(M===null){C===null&&(C=N);break}e&&C&&M.alternate===null&&t(x,C),v=o(M,v,R),A===null?E=M:A.sibling=M,A=M,C=N}if(R===y.length)return n(x,C),oe&&bn(x,R),E;if(C===null){for(;R<y.length;R++)C=m(x,y[R],S),C!==null&&(v=o(C,v,R),A===null?E=C:A.sibling=C,A=C);return oe&&bn(x,R),E}for(C=i(C);R<y.length;R++)N=g(C,x,R,y[R],S),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?R:N.key),v=o(N,v,R),A===null?E=N:A.sibling=N,A=N);return e&&C.forEach(function(L){return t(x,L)}),oe&&bn(x,R),E}function b(x,v,y,S){if(y==null)throw Error(k(151));for(var E=null,A=null,C=v,R=v=0,N=null,M=y.next();C!==null&&!M.done;R++,M=y.next()){C.index>R?(N=C,C=null):N=C.sibling;var L=h(x,C,M.value,S);if(L===null){C===null&&(C=N);break}e&&C&&L.alternate===null&&t(x,C),v=o(L,v,R),A===null?E=L:A.sibling=L,A=L,C=N}if(M.done)return n(x,C),oe&&bn(x,R),E;if(C===null){for(;!M.done;R++,M=y.next())M=m(x,M.value,S),M!==null&&(v=o(M,v,R),A===null?E=M:A.sibling=M,A=M);return oe&&bn(x,R),E}for(C=i(C);!M.done;R++,M=y.next())M=g(C,x,R,M.value,S),M!==null&&(e&&M.alternate!==null&&C.delete(M.key===null?R:M.key),v=o(M,v,R),A===null?E=M:A.sibling=M,A=M);return e&&C.forEach(function(O){return t(x,O)}),oe&&bn(x,R),E}function T(x,v,y,S){if(typeof y=="object"&&y!==null&&y.type===ea&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case nl:e:{for(var E=y.key;v!==null;){if(v.key===E){if(E=y.type,E===ea){if(v.tag===7){n(x,v.sibling),S=a(v,y.props.children),S.return=x,x=S;break e}}else if(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Vn&&Ei(E)===v.type){n(x,v.sibling),S=a(v,y.props),Za(S,y),S.return=x,x=S;break e}n(x,v);break}else t(x,v);v=v.sibling}y.type===ea?(S=Ri(y.props.children,x.mode,S,y.key),S.return=x,x=S):(S=Nl(y.type,y.key,y.props,null,x.mode,S),Za(S,y),S.return=x,x=S)}return l(x);case ao:e:{for(E=y.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(x,v.sibling),S=a(v,y.children||[]),S.return=x,x=S;break e}else{n(x,v);break}else t(x,v);v=v.sibling}S=pr(y,x.mode,S),S.return=x,x=S}return l(x);case Vn:return y=Ei(y),T(x,v,y,S)}if(oo(y))return _(x,v,y,S);if(Xa(y)){if(E=Xa(y),typeof E!="function")throw Error(k(150));return y=E.call(y),b(x,v,y,S)}if(typeof y.then=="function")return T(x,v,ul(y),S);if(y.$$typeof===Cn)return T(x,v,rl(x,y),S);cl(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,v!==null&&v.tag===6?(n(x,v.sibling),S=a(v,y),S.return=x,x=S):(n(x,v),S=fr(y,x.mode,S),S.return=x,x=S),l(x)):n(x,v)}return function(x,v,y,S){try{Do=0;var E=T(x,v,y,S);return ya=null,E}catch(C){if(C===za||C===ks)throw C;var A=It(29,C,null,x.mode);return A.lanes=S,A.return=x,A}finally{}}}var Gi=dm(!0),fm=dm(!1),Fn=!1;function Lc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ai(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ce&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,t=Kl(e),im(e,null,n),t}return Ds(e,i,t,n),Kl(e)}function vo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,R0(e,n)}}function mr(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?a=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var _u=!1;function yo(){if(_u){var e=va;if(e!==null)throw e}}function _o(e,t,n,i){_u=!1;var a=e.updateQueue;Fn=!1;var o=a.firstBaseUpdate,l=a.lastBaseUpdate,r=a.shared.pending;if(r!==null){a.shared.pending=null;var c=r,d=c.next;c.next=null,l===null?o=d:l.next=d,l=c;var f=e.alternate;f!==null&&(f=f.updateQueue,r=f.lastBaseUpdate,r!==l&&(r===null?f.firstBaseUpdate=d:r.next=d,f.lastBaseUpdate=c))}if(o!==null){var m=a.baseState;l=0,f=d=c=null,r=o;do{var h=r.lane&-536870913,g=h!==r.lane;if(g?(ie&h)===h:(i&h)===h){h!==0&&h===wa&&(_u=!0),f!==null&&(f=f.next={lane:0,tag:r.tag,payload:r.payload,callback:null,next:null});e:{var _=e,b=r;h=t;var T=n;switch(b.tag){case 1:if(_=b.payload,typeof _=="function"){m=_.call(T,m,h);break e}m=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=b.payload,h=typeof _=="function"?_.call(T,m,h):_,h==null)break e;m=Ie({},m,h);break e;case 2:Fn=!0}}h=r.callback,h!==null&&(e.flags|=64,g&&(e.flags|=8192),g=a.callbacks,g===null?a.callbacks=[h]:g.push(h))}else g={lane:h,tag:r.tag,payload:r.payload,callback:r.callback,next:null},f===null?(d=f=g,c=m):f=f.next=g,l|=h;if(r=r.next,r===null){if(r=a.shared.pending,r===null)break;g=r,r=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);f===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=f,o===null&&(a.shared.lanes=0),hi|=l,e.lanes=l,e.memoizedState=m}}function pm(e,t){if(typeof e!="function")throw Error(k(191,e));e.call(t)}function hm(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)pm(n[e],t)}var Ia=fn(null),Ql=fn(0);function pf(e,t){e=Ln,Te(Ql,e),Te(Ia,t),Ln=e|t.baseLanes}function xu(){Te(Ql,Ln),Te(Ia,Ia.current)}function Uc(){Ln=Ql.current,Ze(Ia),Ze(Ql)}var Gt=fn(null),Jt=null;function Jn(e){var t=e.alternate;Te(ze,ze.current&1),Te(Gt,e),Jt===null&&(t===null||Ia.current!==null||t.memoizedState!==null)&&(Jt=e)}function Su(e){Te(ze,ze.current),Te(Gt,e),Jt===null&&(Jt=e)}function mm(e){e.tag===22?(Te(ze,ze.current),Te(Gt,e),Jt===null&&(Jt=e)):Kn()}function Kn(){Te(ze,ze.current),Te(Gt,Gt.current)}function wt(e){Ze(Gt),Jt===e&&(Jt=null),Ze(ze)}var ze=fn(0);function Wl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ou(n)||zu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mn=0,j=null,_e=null,Ve=null,Zl=!1,_a=!1,Hi=!1,es=0,ko=0,xa=null,hx=0;function Be(){throw Error(k(321))}function Gc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ut(e[n],t[n]))return!1;return!0}function Hc(e,t,n,i,a,o){return Mn=o,j=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Y.H=e===null||e.memoizedState===null?Jm:$c,Hi=!1,o=n(i,a),Hi=!1,_a&&(o=vm(t,n,i,a)),gm(e),o}function gm(e){Y.H=Lo;var t=_e!==null&&_e.next!==null;if(Mn=0,Ve=_e=j=null,Zl=!1,ko=0,xa=null,t)throw Error(k(300));e===null||Je||(e=e.dependencies,e!==null&&jl(e)&&(Je=!0))}function vm(e,t,n,i){j=e;var a=0;do{if(_a&&(xa=null),ko=0,_a=!1,25<=a)throw Error(k(301));if(a+=1,Ve=_e=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}Y.H=Km,o=t(n,i)}while(_a);return o}function mx(){var e=Y.H,t=e.useState()[0];return t=typeof t.then=="function"?$o(t):t,e=e.useState()[0],(_e!==null?_e.memoizedState:null)!==e&&(j.flags|=1024),t}function Bc(){var e=es!==0;return es=0,e}function Pc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Oc(e){if(Zl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Zl=!1}Mn=0,Ve=_e=j=null,_a=!1,ko=es=0,xa=null}function ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?j.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function qe(){if(_e===null){var e=j.alternate;e=e!==null?e.memoizedState:null}else e=_e.next;var t=Ve===null?j.memoizedState:Ve.next;if(t!==null)Ve=t,_e=e;else{if(e===null)throw j.alternate===null?Error(k(467)):Error(k(310));_e=e,e={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Ve===null?j.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function Ls(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $o(e){var t=ko;return ko+=1,xa===null&&(xa=[]),e=cm(xa,e,t),t=j,(Ve===null?t.memoizedState:Ve.next)===null&&(t=t.alternate,Y.H=t===null||t.memoizedState===null?Jm:$c),e}function Us(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $o(e);if(e.$$typeof===Cn)return ot(e)}throw Error(k(438,String(e)))}function zc(e){var t=null,n=j.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=j.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Ls(),j.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=e_;return t.index++,n}function Dn(e,t){return typeof t=="function"?t(e):t}function Il(e){var t=qe();return qc(t,_e,e)}function qc(e,t,n){var i=e.queue;if(i===null)throw Error(k(311));i.lastRenderedReducer=n;var a=e.baseQueue,o=i.pending;if(o!==null){if(a!==null){var l=a.next;a.next=o.next,o.next=l}t.baseQueue=a=o,i.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var r=l=null,c=null,d=t,f=!1;do{var m=d.lane&-536870913;if(m!==d.lane?(ie&m)===m:(Mn&m)===m){var h=d.revertLane;if(h===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===wa&&(f=!0);else if((Mn&h)===h){d=d.next,h===wa&&(f=!0);continue}else m={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(r=c=m,l=o):c=c.next=m,j.lanes|=h,hi|=h;m=d.action,Hi&&n(o,m),o=d.hasEagerState?d.eagerState:n(o,m)}else h={lane:m,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(r=c=h,l=o):c=c.next=h,j.lanes|=m,hi|=m;d=d.next}while(d!==null&&d!==t);if(c===null?l=o:c.next=r,!Ut(o,e.memoizedState)&&(Je=!0,f&&(n=va,n!==null)))throw n;e.memoizedState=o,e.baseState=l,e.baseQueue=c,i.lastRenderedState=o}return a===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function gr(e){var t=qe(),n=t.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do o=e(o,l.action),l=l.next;while(l!==a);Ut(o,t.memoizedState)||(Je=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function ym(e,t,n){var i=j,a=qe(),o=oe;if(o){if(n===void 0)throw Error(k(407));n=n()}else n=t();var l=!Ut((_e||a).memoizedState,n);if(l&&(a.memoizedState=n,Je=!0),a=a.queue,Vc(Sm.bind(null,i,a,e),[e]),a.getSnapshot!==t||l||Ve!==null&&Ve.memoizedState.tag&1){if(i.flags|=2048,Ra(9,{destroy:void 0},xm.bind(null,i,a,n,t),null),Se===null)throw Error(k(349));o||Mn&127||_m(i,t,n)}return n}function _m(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=j.updateQueue,t===null?(t=Ls(),j.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xm(e,t,n,i){t.value=n,t.getSnapshot=i,bm(t)&&Tm(e)}function Sm(e,t,n){return n(function(){bm(t)&&Tm(e)})}function bm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ut(e,n)}catch{return!0}}function Tm(e){var t=Fi(e,2);t!==null&&Tt(t,e,2)}function bu(e){var t=ct();if(typeof e=="function"){var n=e;if(e=n(),Hi){Xn(!0);try{n()}finally{Xn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:e},t}function Cm(e,t,n,i){return e.baseState=n,qc(e,_e,typeof i=="function"?i:Dn)}function gx(e,t,n,i,a){if(Hs(e))throw Error(k(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(l){o.listeners.push(l)}};Y.T!==null?n(!0):o.isTransition=!1,i(o),n=t.pending,n===null?(o.next=t.pending=o,Em(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Em(e,t){var n=t.action,i=t.payload,a=e.state;if(t.isTransition){var o=Y.T,l={};Y.T=l;try{var r=n(a,i),c=Y.S;c!==null&&c(l,r),hf(e,t,r)}catch(d){Tu(e,t,d)}finally{o!==null&&l.types!==null&&(o.types=l.types),Y.T=o}}else try{o=n(a,i),hf(e,t,o)}catch(d){Tu(e,t,d)}}function hf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){mf(e,t,i)},function(i){return Tu(e,t,i)}):mf(e,t,n)}function mf(e,t,n){t.status="fulfilled",t.value=n,Am(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Em(e,n)))}function Tu(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Am(t),t=t.next;while(t!==i)}e.action=null}function Am(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Nm(e,t){return t}function gf(e,t){if(oe){var n=Se.formState;if(n!==null){e:{var i=j;if(oe){if(Ae){t:{for(var a=Ae,o=Yt;a.nodeType!==8;){if(!o){a=null;break t}if(a=Kt(a.nextSibling),a===null){a=null;break t}}o=a.data,a=o==="F!"||o==="F"?a:null}if(a){Ae=Kt(a.nextSibling),i=a.data==="F!";break e}}fi(i)}i=!1}i&&(t=n[0])}}return n=ct(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nm,lastRenderedState:t},n.queue=i,n=Vm.bind(null,j,i),i.dispatch=n,i=bu(!1),o=Kc.bind(null,j,!1,i.queue),i=ct(),a={state:t,dispatch:null,action:e,pending:null},i.queue=a,n=gx.bind(null,j,a,o,n),a.dispatch=n,i.memoizedState=e,[t,n,!1]}function vf(e){var t=qe();return wm(t,_e,e)}function wm(e,t,n){if(t=qc(e,t,Nm)[0],e=Il(Dn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=$o(t)}catch(l){throw l===za?ks:l}else i=t;t=qe();var a=t.queue,o=a.dispatch;return n!==t.memoizedState&&(j.flags|=2048,Ra(9,{destroy:void 0},vx.bind(null,a,n),null)),[i,o,e]}function vx(e,t){e.action=t}function yf(e){var t=qe(),n=_e;if(n!==null)return wm(t,n,e);qe(),t=t.memoizedState,n=qe();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Ra(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=j.updateQueue,t===null&&(t=Ls(),j.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Im(){return qe().memoizedState}function Rl(e,t,n,i){var a=ct();j.flags|=e,a.memoizedState=Ra(1|t,{destroy:void 0},n,i===void 0?null:i)}function Gs(e,t,n,i){var a=qe();i=i===void 0?null:i;var o=a.memoizedState.inst;_e!==null&&i!==null&&Gc(i,_e.memoizedState.deps)?a.memoizedState=Ra(t,o,n,i):(j.flags|=e,a.memoizedState=Ra(1|t,o,n,i))}function _f(e,t){Rl(8390656,8,e,t)}function Vc(e,t){Gs(2048,8,e,t)}function yx(e){j.flags|=4;var t=j.updateQueue;if(t===null)t=Ls(),j.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Rm(e){var t=qe().memoizedState;return yx({ref:t,nextImpl:e}),function(){if(ce&2)throw Error(k(440));return t.impl.apply(void 0,arguments)}}function Mm(e,t){return Gs(4,2,e,t)}function Dm(e,t){return Gs(4,4,e,t)}function km(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lm(e,t,n){n=n!=null?n.concat([e]):null,Gs(4,4,km.bind(null,t,e),n)}function Fc(){}function Um(e,t){var n=qe();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Gc(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Gm(e,t){var n=qe();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Gc(t,i[1]))return i[0];if(i=e(),Hi){Xn(!0);try{e()}finally{Xn(!1)}}return n.memoizedState=[i,t],i}function Yc(e,t,n){return n===void 0||Mn&1073741824&&!(ie&261930)?e.memoizedState=t:(e.memoizedState=n,e=Cg(),j.lanes|=e,hi|=e,n)}function Hm(e,t,n,i){return Ut(n,t)?n:Ia.current!==null?(e=Yc(e,n,i),Ut(e,t)||(Je=!0),e):!(Mn&42)||Mn&1073741824&&!(ie&261930)?(Je=!0,e.memoizedState=n):(e=Cg(),j.lanes|=e,hi|=e,t)}function Bm(e,t,n,i,a){var o=de.p;de.p=o!==0&&8>o?o:8;var l=Y.T,r={};Y.T=r,Kc(e,!1,t,n);try{var c=a(),d=Y.S;if(d!==null&&d(r,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=px(c,i);xo(e,t,f,Lt(e))}else xo(e,t,i,Lt(e))}catch(m){xo(e,t,{then:function(){},status:"rejected",reason:m},Lt())}finally{de.p=o,l!==null&&r.types!==null&&(l.types=r.types),Y.T=l}}function _x(){}function Cu(e,t,n,i){if(e.tag!==5)throw Error(k(476));var a=Pm(e).queue;Bm(e,a,t,Ii,n===null?_x:function(){return Om(e),n(i)})}function Pm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ii,baseState:Ii,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:Ii},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Om(e){var t=Pm(e);t.next===null&&(t=e.alternate.memoizedState),xo(e,t.next.queue,{},Lt())}function Jc(){return ot(Ho)}function zm(){return qe().memoizedState}function qm(){return qe().memoizedState}function xx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Lt();e=ai(n);var i=oi(t,e,n);i!==null&&(Tt(i,t,n),vo(i,t,n)),t={cache:Mc()},e.payload=t;return}t=t.return}}function Sx(e,t,n){var i=Lt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Hs(e)?Fm(t,n):(n=Nc(e,t,n,i),n!==null&&(Tt(n,e,i),Ym(n,t,i)))}function Vm(e,t,n){var i=Lt();xo(e,t,n,i)}function xo(e,t,n,i){var a={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hs(e))Fm(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,r=o(l,n);if(a.hasEagerState=!0,a.eagerState=r,Ut(r,l))return Ds(e,t,a,0),Se===null&&Ms(),!1}catch{}finally{}if(n=Nc(e,t,a,i),n!==null)return Tt(n,e,i),Ym(n,t,i),!0}return!1}function Kc(e,t,n,i){if(i={lane:2,revertLane:nd(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Hs(e)){if(t)throw Error(k(479))}else t=Nc(e,n,i,2),t!==null&&Tt(t,e,2)}function Hs(e){var t=e.alternate;return e===j||t!==null&&t===j}function Fm(e,t){_a=Zl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ym(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,R0(e,n)}}var Lo={readContext:ot,use:Us,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useLayoutEffect:Be,useInsertionEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useSyncExternalStore:Be,useId:Be,useHostTransitionStatus:Be,useFormState:Be,useActionState:Be,useOptimistic:Be,useMemoCache:Be,useCacheRefresh:Be};Lo.useEffectEvent=Be;var Jm={readContext:ot,use:Us,useCallback:function(e,t){return ct().memoizedState=[e,t===void 0?null:t],e},useContext:ot,useEffect:_f,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Rl(4194308,4,km.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Rl(4194308,4,e,t)},useInsertionEffect:function(e,t){Rl(4,2,e,t)},useMemo:function(e,t){var n=ct();t=t===void 0?null:t;var i=e();if(Hi){Xn(!0);try{e()}finally{Xn(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ct();if(n!==void 0){var a=n(t);if(Hi){Xn(!0);try{n(t)}finally{Xn(!1)}}}else a=t;return i.memoizedState=i.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},i.queue=e,e=e.dispatch=Sx.bind(null,j,e),[i.memoizedState,e]},useRef:function(e){var t=ct();return e={current:e},t.memoizedState=e},useState:function(e){e=bu(e);var t=e.queue,n=Vm.bind(null,j,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Fc,useDeferredValue:function(e,t){var n=ct();return Yc(n,e,t)},useTransition:function(){var e=bu(!1);return e=Bm.bind(null,j,e.queue,!0,!1),ct().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=j,a=ct();if(oe){if(n===void 0)throw Error(k(407));n=n()}else{if(n=t(),Se===null)throw Error(k(349));ie&127||_m(i,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,_f(Sm.bind(null,i,o,e),[e]),i.flags|=2048,Ra(9,{destroy:void 0},xm.bind(null,i,o,n,t),null),n},useId:function(){var e=ct(),t=Se.identifierPrefix;if(oe){var n=un,i=rn;n=(i&~(1<<32-kt(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=es++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=hx++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Jc,useFormState:gf,useActionState:gf,useOptimistic:function(e){var t=ct();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Kc.bind(null,j,!0,n),n.dispatch=t,[e,t]},useMemoCache:zc,useCacheRefresh:function(){return ct().memoizedState=xx.bind(null,j)},useEffectEvent:function(e){var t=ct(),n={impl:e};return t.memoizedState=n,function(){if(ce&2)throw Error(k(440));return n.impl.apply(void 0,arguments)}}},$c={readContext:ot,use:Us,useCallback:Um,useContext:ot,useEffect:Vc,useImperativeHandle:Lm,useInsertionEffect:Mm,useLayoutEffect:Dm,useMemo:Gm,useReducer:Il,useRef:Im,useState:function(){return Il(Dn)},useDebugValue:Fc,useDeferredValue:function(e,t){var n=qe();return Hm(n,_e.memoizedState,e,t)},useTransition:function(){var e=Il(Dn)[0],t=qe().memoizedState;return[typeof e=="boolean"?e:$o(e),t]},useSyncExternalStore:ym,useId:zm,useHostTransitionStatus:Jc,useFormState:vf,useActionState:vf,useOptimistic:function(e,t){var n=qe();return Cm(n,_e,e,t)},useMemoCache:zc,useCacheRefresh:qm};$c.useEffectEvent=Rm;var Km={readContext:ot,use:Us,useCallback:Um,useContext:ot,useEffect:Vc,useImperativeHandle:Lm,useInsertionEffect:Mm,useLayoutEffect:Dm,useMemo:Gm,useReducer:gr,useRef:Im,useState:function(){return gr(Dn)},useDebugValue:Fc,useDeferredValue:function(e,t){var n=qe();return _e===null?Yc(n,e,t):Hm(n,_e.memoizedState,e,t)},useTransition:function(){var e=gr(Dn)[0],t=qe().memoizedState;return[typeof e=="boolean"?e:$o(e),t]},useSyncExternalStore:ym,useId:zm,useHostTransitionStatus:Jc,useFormState:yf,useActionState:yf,useOptimistic:function(e,t){var n=qe();return _e!==null?Cm(n,_e,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:zc,useCacheRefresh:qm};Km.useEffectEvent=Rm;function vr(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ie({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Eu={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Lt(),a=ai(i);a.payload=t,n!=null&&(a.callback=n),t=oi(e,a,i),t!==null&&(Tt(t,e,i),vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Lt(),a=ai(i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=oi(e,a,i),t!==null&&(Tt(t,e,i),vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lt(),i=ai(n);i.tag=2,t!=null&&(i.callback=t),t=oi(e,i,n),t!==null&&(Tt(t,e,n),vo(t,e,n))}};function xf(e,t,n,i,a,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,o,l):t.prototype&&t.prototype.isPureReactComponent?!Io(n,i)||!Io(a,o):!0}function Sf(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Eu.enqueueReplaceState(t,t.state,null)}function Bi(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Ie({},n));for(var a in e)n[a]===void 0&&(n[a]=e[a])}return n}function $m(e){Jl(e)}function jm(e){console.error(e)}function Xm(e){Jl(e)}function ts(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function bf(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Au(e,t,n){return n=ai(n),n.tag=3,n.payload={element:null},n.callback=function(){ts(e,t)},n}function Qm(e){return e=ai(e),e.tag=3,e}function Wm(e,t,n,i){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var o=i.value;e.payload=function(){return a(o)},e.callback=function(){bf(t,n,i)}}var l=n.stateNode;l!==null&&typeof l.componentDidCatch=="function"&&(e.callback=function(){bf(t,n,i),typeof a!="function"&&(li===null?li=new Set([this]):li.add(this));var r=i.stack;this.componentDidCatch(i.value,{componentStack:r!==null?r:""})})}function bx(e,t,n,i,a){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Oa(t,n,a,!0),n=Gt.current,n!==null){switch(n.tag){case 31:case 13:return Jt===null?ls():n.alternate===null&&Pe===0&&(Pe=3),n.flags&=-257,n.flags|=65536,n.lanes=a,i===Xl?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),wr(e,i,a)),!1;case 22:return n.flags|=65536,i===Xl?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),wr(e,i,a)),!1}throw Error(k(435,n.tag))}return wr(e,i,a),ls(),!1}if(oe)return t=Gt.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,i!==pu&&(e=Error(k(422),{cause:i}),Mo(Ft(e,n)))):(i!==pu&&(t=Error(k(423),{cause:i}),Mo(Ft(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,i=Ft(i,n),a=Au(e.stateNode,i,a),mr(e,a),Pe!==4&&(Pe=2)),!1;var o=Error(k(520),{cause:i});if(o=Ft(o,n),To===null?To=[o]:To.push(o),Pe!==4&&(Pe=2),t===null)return!0;i=Ft(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=Au(n.stateNode,i,e),mr(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(li===null||!li.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=Qm(a),Wm(a,e,n,i),mr(n,a),!1}n=n.return}while(n!==null);return!1}var jc=Error(k(461)),Je=!1;function nt(e,t,n,i){t.child=e===null?fm(t,null,n,i):Gi(t,e.child,n,i)}function Tf(e,t,n,i,a){n=n.render;var o=t.ref;if("ref"in i){var l={};for(var r in i)r!=="ref"&&(l[r]=i[r])}else l=i;return Ui(t),i=Hc(e,t,n,l,o,a),r=Bc(),e!==null&&!Je?(Pc(e,t,a),kn(e,t,a)):(oe&&r&&Ic(t),t.flags|=1,nt(e,t,i,a),t.child)}function Cf(e,t,n,i,a){if(e===null){var o=n.type;return typeof o=="function"&&!wc(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,Zm(e,t,o,i,a)):(e=Nl(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Xc(e,a)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(l,i)&&e.ref===t.ref)return kn(e,t,a)}return t.flags|=1,e=Nn(o,i),e.ref=t.ref,e.return=t,t.child=e}function Zm(e,t,n,i,a){if(e!==null){var o=e.memoizedProps;if(Io(o,i)&&e.ref===t.ref)if(Je=!1,t.pendingProps=i=o,Xc(e,a))e.flags&131072&&(Je=!0);else return t.lanes=e.lanes,kn(e,t,a)}return Nu(e,t,n,i,a)}function eg(e,t,n,i){var a=i.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(t.flags&128){if(o=o!==null?o.baseLanes|n:n,e!==null){for(i=t.child=e.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;i=a&~o}else i=0,t.child=null;return Ef(e,t,o,n,i)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wl(t,o!==null?o.cachePool:null),o!==null?pf(t,o):xu(),mm(t);else return i=t.lanes=536870912,Ef(e,t,o!==null?o.baseLanes|n:n,n,i)}else o!==null?(wl(t,o.cachePool),pf(t,o),Kn(),t.memoizedState=null):(e!==null&&wl(t,null),xu(),Kn());return nt(e,t,a,n),t.child}function so(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ef(e,t,n,i,a){var o=Dc();return o=o===null?null:{parent:Ye._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&wl(t,null),xu(),mm(t),e!==null&&Oa(e,t,i,!0),t.childLanes=a,null}function Ml(e,t){return t=ns({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Af(e,t,n){return Gi(t,e.child,null,n),e=Ml(t,t.pendingProps),e.flags|=2,wt(t),t.memoizedState=null,e}function Tx(e,t,n){var i=t.pendingProps,a=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(oe){if(i.mode==="hidden")return e=Ml(t,i),t.lanes=536870912,so(null,e);if(Su(t),(e=Ae)?(e=Jg(e,Yt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:di!==null?{id:rn,overflow:un}:null,retryLane:536870912,hydrationErrors:null},n=om(e),n.return=t,t.child=n,at=t,Ae=null)):e=null,e===null)throw fi(t);return t.lanes=536870912,null}return Ml(t,i)}var o=e.memoizedState;if(o!==null){var l=o.dehydrated;if(Su(t),a)if(t.flags&256)t.flags&=-257,t=Af(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(k(558));else if(Je||Oa(e,t,n,!1),a=(n&e.childLanes)!==0,Je||a){if(i=Se,i!==null&&(l=M0(i,n),l!==0&&l!==o.retryLane))throw o.retryLane=l,Fi(e,l),Tt(i,e,l),jc;ls(),t=Af(e,t,n)}else e=o.treeContext,Ae=Kt(l.nextSibling),at=t,oe=!0,ii=null,Yt=!1,e!==null&&sm(t,e),t=Ml(t,i),t.flags|=4096;return t}return e=Nn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Dl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(k(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Nu(e,t,n,i,a){return Ui(t),n=Hc(e,t,n,i,void 0,a),i=Bc(),e!==null&&!Je?(Pc(e,t,a),kn(e,t,a)):(oe&&i&&Ic(t),t.flags|=1,nt(e,t,n,a),t.child)}function Nf(e,t,n,i,a,o){return Ui(t),t.updateQueue=null,n=vm(t,i,n,a),gm(e),i=Bc(),e!==null&&!Je?(Pc(e,t,o),kn(e,t,o)):(oe&&i&&Ic(t),t.flags|=1,nt(e,t,n,o),t.child)}function wf(e,t,n,i,a){if(Ui(t),t.stateNode===null){var o=ra,l=n.contextType;typeof l=="object"&&l!==null&&(o=ot(l)),o=new n(i,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Eu,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=i,o.state=t.memoizedState,o.refs={},Lc(t),l=n.contextType,o.context=typeof l=="object"&&l!==null?ot(l):ra,o.state=t.memoizedState,l=n.getDerivedStateFromProps,typeof l=="function"&&(vr(t,n,l,i),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(l=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),l!==o.state&&Eu.enqueueReplaceState(o,o.state,null),_o(t,i,o,a),yo(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){o=t.stateNode;var r=t.memoizedProps,c=Bi(n,r);o.props=c;var d=o.context,f=n.contextType;l=ra,typeof f=="object"&&f!==null&&(l=ot(f));var m=n.getDerivedStateFromProps;f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function",r=t.pendingProps!==r,f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(r||d!==l)&&Sf(t,o,i,l),Fn=!1;var h=t.memoizedState;o.state=h,_o(t,i,o,a),yo(),d=t.memoizedState,r||h!==d||Fn?(typeof m=="function"&&(vr(t,n,m,i),d=t.memoizedState),(c=Fn||xf(t,n,c,i,h,d,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=d),o.props=i,o.state=d,o.context=l,i=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,yu(e,t),l=t.memoizedProps,f=Bi(n,l),o.props=f,m=t.pendingProps,h=o.context,d=n.contextType,c=ra,typeof d=="object"&&d!==null&&(c=ot(d)),r=n.getDerivedStateFromProps,(d=typeof r=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||h!==c)&&Sf(t,o,i,c),Fn=!1,h=t.memoizedState,o.state=h,_o(t,i,o,a),yo();var g=t.memoizedState;l!==m||h!==g||Fn||e!==null&&e.dependencies!==null&&jl(e.dependencies)?(typeof r=="function"&&(vr(t,n,r,i),g=t.memoizedState),(f=Fn||xf(t,n,f,i,h,g,c)||e!==null&&e.dependencies!==null&&jl(e.dependencies))?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=c,i=f):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return o=i,Dl(e,t),i=(t.flags&128)!==0,o||i?(o=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&i?(t.child=Gi(t,e.child,null,a),t.child=Gi(t,null,n,a)):nt(e,t,n,a),t.memoizedState=o.state,e=t.child):e=kn(e,t,a),e}function If(e,t,n,i){return Li(),t.flags|=256,nt(e,t,n,i),t.child}var yr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _r(e){return{baseLanes:e,cachePool:um()}}function xr(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Rt),e}function tg(e,t,n){var i=t.pendingProps,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(ze.current&2)!==0),l&&(a=!0,t.flags&=-129),l=(t.flags&32)!==0,t.flags&=-33,e===null){if(oe){if(a?Jn(t):Kn(),(e=Ae)?(e=Jg(e,Yt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:di!==null?{id:rn,overflow:un}:null,retryLane:536870912,hydrationErrors:null},n=om(e),n.return=t,t.child=n,at=t,Ae=null)):e=null,e===null)throw fi(t);return zu(e)?t.lanes=32:t.lanes=536870912,null}var r=i.children;return i=i.fallback,a?(Kn(),a=t.mode,r=ns({mode:"hidden",children:r},a),i=Ri(i,a,n,null),r.return=t,i.return=t,r.sibling=i,t.child=r,i=t.child,i.memoizedState=_r(n),i.childLanes=xr(e,l,n),t.memoizedState=yr,so(null,i)):(Jn(t),wu(t,r))}var c=e.memoizedState;if(c!==null&&(r=c.dehydrated,r!==null)){if(o)t.flags&256?(Jn(t),t.flags&=-257,t=Sr(e,t,n)):t.memoizedState!==null?(Kn(),t.child=e.child,t.flags|=128,t=null):(Kn(),r=i.fallback,a=t.mode,i=ns({mode:"visible",children:i.children},a),r=Ri(r,a,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,Gi(t,e.child,null,n),i=t.child,i.memoizedState=_r(n),i.childLanes=xr(e,l,n),t.memoizedState=yr,t=so(null,i));else if(Jn(t),zu(r)){if(l=r.nextSibling&&r.nextSibling.dataset,l)var d=l.dgst;l=d,i=Error(k(419)),i.stack="",i.digest=l,Mo({value:i,source:null,stack:null}),t=Sr(e,t,n)}else if(Je||Oa(e,t,n,!1),l=(n&e.childLanes)!==0,Je||l){if(l=Se,l!==null&&(i=M0(l,n),i!==0&&i!==c.retryLane))throw c.retryLane=i,Fi(e,i),Tt(l,e,i),jc;Ou(r)||ls(),t=Sr(e,t,n)}else Ou(r)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,Ae=Kt(r.nextSibling),at=t,oe=!0,ii=null,Yt=!1,e!==null&&sm(t,e),t=wu(t,i.children),t.flags|=4096);return t}return a?(Kn(),r=i.fallback,a=t.mode,c=e.child,d=c.sibling,i=Nn(c,{mode:"hidden",children:i.children}),i.subtreeFlags=c.subtreeFlags&65011712,d!==null?r=Nn(d,r):(r=Ri(r,a,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,so(null,i),i=t.child,r=e.child.memoizedState,r===null?r=_r(n):(a=r.cachePool,a!==null?(c=Ye._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=um(),r={baseLanes:r.baseLanes|n,cachePool:a}),i.memoizedState=r,i.childLanes=xr(e,l,n),t.memoizedState=yr,so(e.child,i)):(Jn(t),n=e.child,e=n.sibling,n=Nn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(l=t.deletions,l===null?(t.deletions=[e],t.flags|=16):l.push(e)),t.child=n,t.memoizedState=null,n)}function wu(e,t){return t=ns({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ns(e,t){return e=It(22,e,null,t),e.lanes=0,e}function Sr(e,t,n){return Gi(t,e.child,null,n),e=wu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rf(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),mu(e.return,t,n)}function br(e,t,n,i,a,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a,treeForkCount:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=a,l.treeForkCount=o)}function ng(e,t,n){var i=t.pendingProps,a=i.revealOrder,o=i.tail;i=i.children;var l=ze.current,r=(l&2)!==0;if(r?(l=l&1|2,t.flags|=128):l&=1,Te(ze,l),nt(e,t,i,n),i=oe?Ro:0,!r&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rf(e,n,t);else if(e.tag===19)Rf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Wl(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),br(t,!1,a,n,o,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Wl(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}br(t,!0,n,null,o,i);break;case"together":br(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function kn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),hi|=t.lanes,!(n&t.childLanes))if(e!==null){if(Oa(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(k(153));if(t.child!==null){for(e=t.child,n=Nn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Nn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Xc(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&jl(e)))}function Cx(e,t,n){switch(t.tag){case 3:ql(t,t.stateNode.containerInfo),Yn(t,Ye,e.memoizedState.cache),Li();break;case 27:case 5:nu(t);break;case 4:ql(t,t.stateNode.containerInfo);break;case 10:Yn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Su(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Jn(t),t.flags|=128,null):n&t.child.childLanes?tg(e,t,n):(Jn(t),e=kn(e,t,n),e!==null?e.sibling:null);Jn(t);break;case 19:var a=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Oa(e,t,n,!1),i=(n&t.childLanes)!==0),a){if(i)return ng(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Te(ze,ze.current),i)break;return null;case 22:return t.lanes=0,eg(e,t,n,t.pendingProps);case 24:Yn(t,Ye,e.memoizedState.cache)}return kn(e,t,n)}function ig(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Je=!0;else{if(!Xc(e,n)&&!(t.flags&128))return Je=!1,Cx(e,t,n);Je=!!(e.flags&131072)}else Je=!1,oe&&t.flags&1048576&&lm(t,Ro,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Ei(t.elementType),t.type=e,typeof e=="function")wc(e)?(i=Bi(e,i),t.tag=1,t=wf(null,t,e,i,n)):(t.tag=0,t=Nu(null,t,e,i,n));else{if(e!=null){var a=e.$$typeof;if(a===hc){t.tag=11,t=Tf(null,t,e,i,n);break e}else if(a===mc){t.tag=14,t=Cf(null,t,e,i,n);break e}}throw t=eu(e)||e,Error(k(306,t,""))}}return t;case 0:return Nu(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,a=Bi(i,t.pendingProps),wf(e,t,i,a,n);case 3:e:{if(ql(t,t.stateNode.containerInfo),e===null)throw Error(k(387));i=t.pendingProps;var o=t.memoizedState;a=o.element,yu(e,t),_o(t,i,null,n);var l=t.memoizedState;if(i=l.cache,Yn(t,Ye,i),i!==o.cache&&gu(t,[Ye],n,!0),yo(),i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=If(e,t,i,n);break e}else if(i!==a){a=Ft(Error(k(424)),t),Mo(a),t=If(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ae=Kt(e.firstChild),at=t,oe=!0,ii=null,Yt=!0,n=fm(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Li(),i===a){t=kn(e,t,n);break e}nt(e,t,i,n)}t=t.child}return t;case 26:return Dl(e,t),e===null?(n=Xf(t.type,null,t.pendingProps,null))?t.memoizedState=n:oe||(n=t.type,e=t.pendingProps,i=cs(ni.current).createElement(n),i[it]=t,i[Et]=e,lt(i,n,e),We(i),t.stateNode=i):t.memoizedState=Xf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return nu(t),e===null&&oe&&(i=t.stateNode=Kg(t.type,t.pendingProps,ni.current),at=t,Yt=!0,a=Ae,vi(t.type)?(qu=a,Ae=Kt(i.firstChild)):Ae=a),nt(e,t,t.pendingProps.children,n),Dl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&oe&&((a=i=Ae)&&(i=tS(i,t.type,t.pendingProps,Yt),i!==null?(t.stateNode=i,at=t,Ae=Kt(i.firstChild),Yt=!1,a=!0):a=!1),a||fi(t)),nu(t),a=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,i=o.children,Bu(a,o)?i=null:l!==null&&Bu(a,l)&&(t.flags|=32),t.memoizedState!==null&&(a=Hc(e,t,mx,null,null,n),Ho._currentValue=a),Dl(e,t),nt(e,t,i,n),t.child;case 6:return e===null&&oe&&((e=n=Ae)&&(n=nS(n,t.pendingProps,Yt),n!==null?(t.stateNode=n,at=t,Ae=null,e=!0):e=!1),e||fi(t)),null;case 13:return tg(e,t,n);case 4:return ql(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Gi(t,null,i,n):nt(e,t,i,n),t.child;case 11:return Tf(e,t,t.type,t.pendingProps,n);case 7:return nt(e,t,t.pendingProps,n),t.child;case 8:return nt(e,t,t.pendingProps.children,n),t.child;case 12:return nt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Yn(t,t.type,i.value),nt(e,t,i.children,n),t.child;case 9:return a=t.type._context,i=t.pendingProps.children,Ui(t),a=ot(a),i=i(a),t.flags|=1,nt(e,t,i,n),t.child;case 14:return Cf(e,t,t.type,t.pendingProps,n);case 15:return Zm(e,t,t.type,t.pendingProps,n);case 19:return ng(e,t,n);case 31:return Tx(e,t,n);case 22:return eg(e,t,n,t.pendingProps);case 24:return Ui(t),i=ot(Ye),e===null?(a=Dc(),a===null&&(a=Se,o=Mc(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:i,cache:a},Lc(t),Yn(t,Ye,a)):(e.lanes&n&&(yu(e,t),_o(t,null,null,n),yo()),a=e.memoizedState,o=t.memoizedState,a.parent!==i?(a={parent:i,cache:i},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Yn(t,Ye,i)):(i=o.cache,Yn(t,Ye,i),i!==a.cache&&gu(t,[Ye],n,!0))),nt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(k(156,t.tag))}function yn(e){e.flags|=4}function Tr(e,t,n,i,a){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(a&335544128)===a)if(e.stateNode.complete)e.flags|=8192;else if(Ng())e.flags|=8192;else throw Di=Xl,kc}else e.flags&=-16777217}function Mf(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Xg(t))if(Ng())e.flags|=8192;else throw Di=Xl,kc}function dl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?w0():536870912,e.lanes|=t,Ma|=t)}function eo(e,t){if(!oe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ee(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&65011712,i|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ex(e,t,n){var i=t.pendingProps;switch(Rc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(t),null;case 1:return Ee(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),wn(Ye),Ea(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&($i(t)?yn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hr())),Ee(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(yn(t),o!==null?(Ee(t),Mf(t,o)):(Ee(t),Tr(t,a,null,i,n))):o?o!==e.memoizedState?(yn(t),Ee(t),Mf(t,o)):(Ee(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&yn(t),Ee(t),Tr(t,a,e,i,n)),null;case 27:if(Vl(t),n=ni.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&yn(t);else{if(!i){if(t.stateNode===null)throw Error(k(166));return Ee(t),null}e=dn.current,$i(t)?lf(t):(e=Kg(a,i,n),t.stateNode=e,yn(t))}return Ee(t),null;case 5:if(Vl(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&yn(t);else{if(!i){if(t.stateNode===null)throw Error(k(166));return Ee(t),null}if(o=dn.current,$i(t))lf(t);else{var l=cs(ni.current);switch(o){case 1:o=l.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:o=l.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":o=l.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":o=l.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":o=l.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof i.is=="string"?l.createElement("select",{is:i.is}):l.createElement("select"),i.multiple?o.multiple=!0:i.size&&(o.size=i.size);break;default:o=typeof i.is=="string"?l.createElement(a,{is:i.is}):l.createElement(a)}}o[it]=t,o[Et]=i;e:for(l=t.child;l!==null;){if(l.tag===5||l.tag===6)o.appendChild(l.stateNode);else if(l.tag!==4&&l.tag!==27&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===t)break e;for(;l.sibling===null;){if(l.return===null||l.return===t)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}t.stateNode=o;e:switch(lt(o,a,i),a){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&yn(t)}}return Ee(t),Tr(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&yn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(k(166));if(e=ni.current,$i(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,a=at,a!==null)switch(a.tag){case 27:case 5:i=a.memoizedProps}e[it]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Vg(e.nodeValue,n)),e||fi(t,!0)}else e=cs(e).createTextNode(i),e[it]=t,t.stateNode=e}return Ee(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=$i(t),n!==null){if(e===null){if(!i)throw Error(k(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(k(557));e[it]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ee(t),e=!1}else n=hr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(wt(t),t):(wt(t),null);if(t.flags&128)throw Error(k(558))}return Ee(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=$i(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(k(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(k(317));a[it]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ee(t),a=!1}else a=hr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(wt(t),t):(wt(t),null)}return wt(t),t.flags&128?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,a=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(a=i.alternate.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),dl(t,t.updateQueue),Ee(t),null);case 4:return Ea(),e===null&&id(t.stateNode.containerInfo),Ee(t),null;case 10:return wn(t.type),Ee(t),null;case 19:if(Ze(ze),i=t.memoizedState,i===null)return Ee(t),null;if(a=(t.flags&128)!==0,o=i.rendering,o===null)if(a)eo(i,!1);else{if(Pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wl(e),o!==null){for(t.flags|=128,eo(i,!1),e=o.updateQueue,t.updateQueue=e,dl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)am(n,e),n=n.sibling;return Te(ze,ze.current&1|2),oe&&bn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&Mt()>as&&(t.flags|=128,a=!0,eo(i,!1),t.lanes=4194304)}else{if(!a)if(e=Wl(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,dl(t,e),eo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!oe)return Ee(t),null}else 2*Mt()-i.renderingStartTime>as&&n!==536870912&&(t.flags|=128,a=!0,eo(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(e=i.last,e!==null?e.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Mt(),e.sibling=null,n=ze.current,Te(ze,a?n&1|2:n&1),oe&&bn(t,i.treeForkCount),e):(Ee(t),null);case 22:case 23:return wt(t),Uc(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ee(t),t.subtreeFlags&6&&(t.flags|=8192)):Ee(t),n=t.updateQueue,n!==null&&dl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Ze(Mi),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wn(Ye),Ee(t),null;case 25:return null;case 30:return null}throw Error(k(156,t.tag))}function Ax(e,t){switch(Rc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wn(Ye),Ea(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Vl(t),null;case 31:if(t.memoizedState!==null){if(wt(t),t.alternate===null)throw Error(k(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(wt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(k(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ze(ze),null;case 4:return Ea(),null;case 10:return wn(t.type),null;case 22:case 23:return wt(t),Uc(),e!==null&&Ze(Mi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return wn(Ye),null;case 25:return null;default:return null}}function ag(e,t){switch(Rc(t),t.tag){case 3:wn(Ye),Ea();break;case 26:case 27:case 5:Vl(t);break;case 4:Ea();break;case 31:t.memoizedState!==null&&wt(t);break;case 13:wt(t);break;case 19:Ze(ze);break;case 10:wn(t.type);break;case 22:case 23:wt(t),Uc(),e!==null&&Ze(Mi);break;case 24:wn(Ye)}}function jo(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var a=i.next;n=a;do{if((n.tag&e)===e){i=void 0;var o=n.create,l=n.inst;i=o(),l.destroy=i}n=n.next}while(n!==a)}}catch(r){me(t,t.return,r)}}function pi(e,t,n){try{var i=t.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var o=a.next;i=o;do{if((i.tag&e)===e){var l=i.inst,r=l.destroy;if(r!==void 0){l.destroy=void 0,a=t;var c=n,d=r;try{d()}catch(f){me(a,c,f)}}}i=i.next}while(i!==o)}}catch(f){me(t,t.return,f)}}function og(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{hm(t,n)}catch(i){me(e,e.return,i)}}}function lg(e,t,n){n.props=Bi(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){me(e,t,i)}}function So(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(a){me(e,t,a)}}function cn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(a){me(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){me(e,t,a)}else n.current=null}function sg(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(a){me(e,e.return,a)}}function Cr(e,t,n){try{var i=e.stateNode;jx(i,e.type,n,t),i[Et]=t}catch(a){me(e,e.return,a)}}function rg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&vi(e.type)||e.tag===4}function Er(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&vi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Iu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=En));else if(i!==4&&(i===27&&vi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Iu(e,t,n),e=e.sibling;e!==null;)Iu(e,t,n),e=e.sibling}function is(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&vi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(is(e,t,n),e=e.sibling;e!==null;)is(e,t,n),e=e.sibling}function ug(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);lt(t,i,n),t[it]=e,t[Et]=n}catch(o){me(e,e.return,o)}}var Tn=!1,Fe=!1,Ar=!1,Df=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Nx(e,t){if(e=e.containerInfo,Gu=hs,e=X0(e),Ec(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,r=-1,c=-1,d=0,f=0,m=e,h=null;t:for(;;){for(var g;m!==n||a!==0&&m.nodeType!==3||(r=l+a),m!==o||i!==0&&m.nodeType!==3||(c=l+i),m.nodeType===3&&(l+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===e)break t;if(h===n&&++d===a&&(r=l),h===o&&++f===i&&(c=l),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}n=r===-1||c===-1?null:{start:r,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hu={focusedElem:e,selectionRange:n},hs=!1,Qe=t;Qe!==null;)if(t=Qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qe=e;else for(;Qe!==null;){switch(t=Qe,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,i=n.stateNode;try{var _=Bi(n.type,a);e=i.getSnapshotBeforeUpdate(_,o),i.__reactInternalSnapshotBeforeUpdate=e}catch(b){me(n,n.return,b)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Pu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(k(163))}if(e=t.sibling,e!==null){e.return=t.return,Qe=e;break}Qe=t.return}}function cg(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:xn(e,n),i&4&&jo(5,n);break;case 1:if(xn(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(l){me(n,n.return,l)}else{var a=Bi(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){me(n,n.return,l)}}i&64&&og(n),i&512&&So(n,n.return);break;case 3:if(xn(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{hm(e,t)}catch(l){me(n,n.return,l)}}break;case 27:t===null&&i&4&&ug(n);case 26:case 5:xn(e,n),t===null&&i&4&&sg(n),i&512&&So(n,n.return);break;case 12:xn(e,n);break;case 31:xn(e,n),i&4&&pg(e,n);break;case 13:xn(e,n),i&4&&hg(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Hx.bind(null,n),iS(e,n))));break;case 22:if(i=n.memoizedState!==null||Tn,!i){t=t!==null&&t.memoizedState!==null||Fe,a=Tn;var o=Fe;Tn=i,(Fe=t)&&!o?Sn(e,n,(n.subtreeFlags&8772)!==0):xn(e,n),Tn=a,Fe=o}break;case 30:break;default:xn(e,n)}}function dg(e){var t=e.alternate;t!==null&&(e.alternate=null,dg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&_c(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var De=null,St=!1;function _n(e,t,n){for(n=n.child;n!==null;)fg(e,t,n),n=n.sibling}function fg(e,t,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(qo,n)}catch{}switch(n.tag){case 26:Fe||cn(n,t),_n(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Fe||cn(n,t);var i=De,a=St;vi(n.type)&&(De=n.stateNode,St=!1),_n(e,t,n),Eo(n.stateNode),De=i,St=a;break;case 5:Fe||cn(n,t);case 6:if(i=De,a=St,De=null,_n(e,t,n),De=i,St=a,De!==null)if(St)try{(De.nodeType===9?De.body:De.nodeName==="HTML"?De.ownerDocument.body:De).removeChild(n.stateNode)}catch(o){me(n,t,o)}else try{De.removeChild(n.stateNode)}catch(o){me(n,t,o)}break;case 18:De!==null&&(St?(e=De,Yf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ua(e)):Yf(De,n.stateNode));break;case 4:i=De,a=St,De=n.stateNode.containerInfo,St=!0,_n(e,t,n),De=i,St=a;break;case 0:case 11:case 14:case 15:pi(2,n,t),Fe||pi(4,n,t),_n(e,t,n);break;case 1:Fe||(cn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&lg(n,t,i)),_n(e,t,n);break;case 21:_n(e,t,n);break;case 22:Fe=(i=Fe)||n.memoizedState!==null,_n(e,t,n),Fe=i;break;default:_n(e,t,n)}}function pg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ua(e)}catch(n){me(t,t.return,n)}}}function hg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ua(e)}catch(n){me(t,t.return,n)}}function Ix(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Df),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Df),t;default:throw Error(k(435,e.tag))}}function fl(e,t){var n=Ix(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var a=Bx.bind(null,e,i);i.then(a,a)}})}function _t(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i],o=e,l=t,r=l;e:for(;r!==null;){switch(r.tag){case 27:if(vi(r.type)){De=r.stateNode,St=!1;break e}break;case 5:De=r.stateNode,St=!1;break e;case 3:case 4:De=r.stateNode.containerInfo,St=!0;break e}r=r.return}if(De===null)throw Error(k(160));fg(o,l,a),De=null,St=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)mg(t,e),t=t.sibling}var Wt=null;function mg(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_t(t,e),xt(e),i&4&&(pi(3,e,e.return),jo(3,e),pi(5,e,e.return));break;case 1:_t(t,e),xt(e),i&512&&(Fe||n===null||cn(n,n.return)),i&64&&Tn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var a=Wt;if(_t(t,e),xt(e),i&512&&(Fe||n===null||cn(n,n.return)),i&4){var o=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(i){case"title":o=a.getElementsByTagName("title")[0],(!o||o[Yo]||o[it]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=a.createElement(i),a.head.insertBefore(o,a.querySelector("head > title"))),lt(o,i,n),o[it]=e,We(o),i=o;break e;case"link":var l=Wf("link","href",a).get(i+(n.href||""));if(l){for(var r=0;r<l.length;r++)if(o=l[r],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){l.splice(r,1);break t}}o=a.createElement(i),lt(o,i,n),a.head.appendChild(o);break;case"meta":if(l=Wf("meta","content",a).get(i+(n.content||""))){for(r=0;r<l.length;r++)if(o=l[r],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){l.splice(r,1);break t}}o=a.createElement(i),lt(o,i,n),a.head.appendChild(o);break;default:throw Error(k(468,i))}o[it]=e,We(o),i=o}e.stateNode=i}else Zf(a,e.type,e.stateNode);else e.stateNode=Qf(a,i,e.memoizedProps);else o!==i?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,i===null?Zf(a,e.type,e.stateNode):Qf(a,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Cr(e,e.memoizedProps,n.memoizedProps)}break;case 27:_t(t,e),xt(e),i&512&&(Fe||n===null||cn(n,n.return)),n!==null&&i&4&&Cr(e,e.memoizedProps,n.memoizedProps);break;case 5:if(_t(t,e),xt(e),i&512&&(Fe||n===null||cn(n,n.return)),e.flags&32){a=e.stateNode;try{Na(a,"")}catch(_){me(e,e.return,_)}}i&4&&e.stateNode!=null&&(a=e.memoizedProps,Cr(e,a,n!==null?n.memoizedProps:a)),i&1024&&(Ar=!0);break;case 6:if(_t(t,e),xt(e),i&4){if(e.stateNode===null)throw Error(k(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(_){me(e,e.return,_)}}break;case 3:if(Ul=null,a=Wt,Wt=ds(t.containerInfo),_t(t,e),Wt=a,xt(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ua(t.containerInfo)}catch(_){me(e,e.return,_)}Ar&&(Ar=!1,gg(e));break;case 4:i=Wt,Wt=ds(e.stateNode.containerInfo),_t(t,e),xt(e),Wt=i;break;case 12:_t(t,e),xt(e);break;case 31:_t(t,e),xt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,fl(e,i)));break;case 13:_t(t,e),xt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Bs=Mt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,fl(e,i)));break;case 22:a=e.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=Tn,f=Fe;if(Tn=d||a,Fe=f||c,_t(t,e),Fe=f,Tn=d,xt(e),i&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||c||Tn||Fe||Ai(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){c=n=t;try{if(o=c.stateNode,a)l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none";else{r=c.stateNode;var m=c.memoizedProps.style,h=m!=null&&m.hasOwnProperty("display")?m.display:null;r.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(_){me(c,c.return,_)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(_){me(c,c.return,_)}}}else if(t.tag===18){if(n===null){c=t;try{var g=c.stateNode;a?Jf(g,!0):Jf(c.stateNode,!1)}catch(_){me(c,c.return,_)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,fl(e,n))));break;case 19:_t(t,e),xt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,fl(e,i)));break;case 30:break;case 21:break;default:_t(t,e),xt(e)}}function xt(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(rg(i)){n=i;break}i=i.return}if(n==null)throw Error(k(160));switch(n.tag){case 27:var a=n.stateNode,o=Er(e);is(e,o,a);break;case 5:var l=n.stateNode;n.flags&32&&(Na(l,""),n.flags&=-33);var r=Er(e);is(e,r,l);break;case 3:case 4:var c=n.stateNode.containerInfo,d=Er(e);Iu(e,d,c);break;default:throw Error(k(161))}}catch(f){me(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;gg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function xn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)cg(e,t.alternate,t),t=t.sibling}function Ai(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:pi(4,t,t.return),Ai(t);break;case 1:cn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&lg(t,t.return,n),Ai(t);break;case 27:Eo(t.stateNode);case 26:case 5:cn(t,t.return),Ai(t);break;case 22:t.memoizedState===null&&Ai(t);break;case 30:Ai(t);break;default:Ai(t)}e=e.sibling}}function Sn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,a=e,o=t,l=o.flags;switch(o.tag){case 0:case 11:case 15:Sn(a,o,n),jo(4,o);break;case 1:if(Sn(a,o,n),i=o,a=i.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(d){me(i,i.return,d)}if(i=o,a=i.updateQueue,a!==null){var r=i.stateNode;try{var c=a.shared.hiddenCallbacks;if(c!==null)for(a.shared.hiddenCallbacks=null,a=0;a<c.length;a++)pm(c[a],r)}catch(d){me(i,i.return,d)}}n&&l&64&&og(o),So(o,o.return);break;case 27:ug(o);case 26:case 5:Sn(a,o,n),n&&i===null&&l&4&&sg(o),So(o,o.return);break;case 12:Sn(a,o,n);break;case 31:Sn(a,o,n),n&&l&4&&pg(a,o);break;case 13:Sn(a,o,n),n&&l&4&&hg(a,o);break;case 22:o.memoizedState===null&&Sn(a,o,n),So(o,o.return);break;case 30:break;default:Sn(a,o,n)}t=t.sibling}}function Qc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ko(n))}function Wc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ko(e))}function Qt(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vg(e,t,n,i),t=t.sibling}function vg(e,t,n,i){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Qt(e,t,n,i),a&2048&&jo(9,t);break;case 1:Qt(e,t,n,i);break;case 3:Qt(e,t,n,i),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ko(e)));break;case 12:if(a&2048){Qt(e,t,n,i),e=t.stateNode;try{var o=t.memoizedProps,l=o.id,r=o.onPostCommit;typeof r=="function"&&r(l,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){me(t,t.return,c)}}else Qt(e,t,n,i);break;case 31:Qt(e,t,n,i);break;case 13:Qt(e,t,n,i);break;case 23:break;case 22:o=t.stateNode,l=t.alternate,t.memoizedState!==null?o._visibility&2?Qt(e,t,n,i):bo(e,t):o._visibility&2?Qt(e,t,n,i):(o._visibility|=2,Qi(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),a&2048&&Qc(l,t);break;case 24:Qt(e,t,n,i),a&2048&&Wc(t.alternate,t);break;default:Qt(e,t,n,i)}}function Qi(e,t,n,i,a){for(a=a&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,l=t,r=n,c=i,d=l.flags;switch(l.tag){case 0:case 11:case 15:Qi(o,l,r,c,a),jo(8,l);break;case 23:break;case 22:var f=l.stateNode;l.memoizedState!==null?f._visibility&2?Qi(o,l,r,c,a):bo(o,l):(f._visibility|=2,Qi(o,l,r,c,a)),a&&d&2048&&Qc(l.alternate,l);break;case 24:Qi(o,l,r,c,a),a&&d&2048&&Wc(l.alternate,l);break;default:Qi(o,l,r,c,a)}t=t.sibling}}function bo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,a=i.flags;switch(i.tag){case 22:bo(n,i),a&2048&&Qc(i.alternate,i);break;case 24:bo(n,i),a&2048&&Wc(i.alternate,i);break;default:bo(n,i)}t=t.sibling}}var ro=8192;function ji(e,t,n){if(e.subtreeFlags&ro)for(e=e.child;e!==null;)yg(e,t,n),e=e.sibling}function yg(e,t,n){switch(e.tag){case 26:ji(e,t,n),e.flags&ro&&e.memoizedState!==null&&mS(n,Wt,e.memoizedState,e.memoizedProps);break;case 5:ji(e,t,n);break;case 3:case 4:var i=Wt;Wt=ds(e.stateNode.containerInfo),ji(e,t,n),Wt=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=ro,ro=16777216,ji(e,t,n),ro=i):ji(e,t,n));break;default:ji(e,t,n)}}function _g(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function to(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Qe=i,Sg(i,e)}_g(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)xg(e),e=e.sibling}function xg(e){switch(e.tag){case 0:case 11:case 15:to(e),e.flags&2048&&pi(9,e,e.return);break;case 3:to(e);break;case 12:to(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,kl(e)):to(e);break;default:to(e)}}function kl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Qe=i,Sg(i,e)}_g(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:pi(8,t,t.return),kl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,kl(t));break;default:kl(t)}e=e.sibling}}function Sg(e,t){for(;Qe!==null;){var n=Qe;switch(n.tag){case 0:case 11:case 15:pi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Ko(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Qe=i;else e:for(n=e;Qe!==null;){i=Qe;var a=i.sibling,o=i.return;if(dg(i),i===n){Qe=null;break e}if(a!==null){a.return=o,Qe=a;break e}Qe=o}}}var Rx={getCacheForType:function(e){var t=ot(Ye),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ot(Ye).controller.signal}},Mx=typeof WeakMap=="function"?WeakMap:Map,ce=0,Se=null,ne=null,ie=0,he=0,Nt=null,Wn=!1,qa=!1,Zc=!1,Ln=0,Pe=0,hi=0,ki=0,ed=0,Rt=0,Ma=0,To=null,bt=null,Ru=!1,Bs=0,bg=0,as=1/0,os=null,li=null,$e=0,si=null,Da=null,In=0,Mu=0,Du=null,Tg=null,Co=0,ku=null;function Lt(){return ce&2&&ie!==0?ie&-ie:Y.T!==null?nd():D0()}function Cg(){if(Rt===0)if(!(ie&536870912)||oe){var e=al;al<<=1,!(al&3932160)&&(al=262144),Rt=e}else Rt=536870912;return e=Gt.current,e!==null&&(e.flags|=32),Rt}function Tt(e,t,n){(e===Se&&(he===2||he===9)||e.cancelPendingCommit!==null)&&(ka(e,0),Zn(e,ie,Rt,!1)),Fo(e,n),(!(ce&2)||e!==Se)&&(e===Se&&(!(ce&2)&&(ki|=n),Pe===4&&Zn(e,ie,Rt,!1)),pn(e))}function Eg(e,t,n){if(ce&6)throw Error(k(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Vo(e,t),a=i?Lx(e,t):Nr(e,t,!0),o=i;do{if(a===0){qa&&!i&&Zn(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Dx(n)){a=Nr(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var l=0;else l=e.pendingLanes&-536870913,l=l!==0?l:l&536870912?536870912:0;if(l!==0){t=l;e:{var r=e;a=To;var c=r.current.memoizedState.isDehydrated;if(c&&(ka(r,l).flags|=256),l=Nr(r,l,!1),l!==2){if(Zc&&!c){r.errorRecoveryDisabledLanes|=o,ki|=o,a=4;break e}o=bt,bt=a,o!==null&&(bt===null?bt=o:bt.push.apply(bt,o))}a=l}if(o=!1,a!==2)continue}}if(a===1){ka(e,0),Zn(e,t,0,!0);break}e:{switch(i=e,o=a,o){case 0:case 1:throw Error(k(345));case 4:if((t&4194048)!==t)break;case 6:Zn(i,t,Rt,!Wn);break e;case 2:bt=null;break;case 3:case 5:break;default:throw Error(k(329))}if((t&62914560)===t&&(a=Bs+300-Mt(),10<a)){if(Zn(i,t,Rt,!Wn),Ns(i,0,!0)!==0)break e;In=t,i.timeoutHandle=Yg(kf.bind(null,i,n,bt,os,Ru,t,Rt,ki,Ma,Wn,o,"Throttled",-0,0),a);break e}kf(i,n,bt,os,Ru,t,Rt,ki,Ma,Wn,o,null,-0,0)}}break}while(!0);pn(e)}function kf(e,t,n,i,a,o,l,r,c,d,f,m,h,g){if(e.timeoutHandle=-1,m=t.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:En},yg(t,o,m);var _=(o&62914560)===o?Bs-Mt():(o&4194048)===o?bg-Mt():0;if(_=gS(m,_),_!==null){In=o,e.cancelPendingCommit=_(Uf.bind(null,e,t,o,n,i,a,l,r,c,f,m,null,h,g)),Zn(e,o,l,!d);return}}Uf(e,t,o,n,i,a,l,r,c)}function Dx(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var a=n[i],o=a.getSnapshot;a=a.value;try{if(!Ut(o(),a))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zn(e,t,n,i){t&=~ed,t&=~ki,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var a=t;0<a;){var o=31-kt(a),l=1<<o;i[o]=-1,a&=~l}n!==0&&I0(e,n,t)}function Ps(){return ce&6?!0:(Xo(0),!1)}function td(){if(ne!==null){if(he===0)var e=ne.return;else e=ne,An=Yi=null,Oc(e),ya=null,Do=0,e=ne;for(;e!==null;)ag(e.alternate,e),e=e.return;ne=null}}function ka(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Wx(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),In=0,td(),Se=e,ne=n=Nn(e.current,null),ie=t,he=0,Nt=null,Wn=!1,qa=Vo(e,t),Zc=!1,Ma=Rt=ed=ki=hi=Pe=0,bt=To=null,Ru=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var a=31-kt(i),o=1<<a;t|=e[a],i&=~o}return Ln=t,Ms(),n}function Ag(e,t){j=null,Y.H=Lo,t===za||t===ks?(t=df(),he=3):t===kc?(t=df(),he=4):he=t===jc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Nt=t,ne===null&&(Pe=1,ts(e,Ft(t,e.current)))}function Ng(){var e=Gt.current;return e===null?!0:(ie&4194048)===ie?Jt===null:(ie&62914560)===ie||ie&536870912?e===Jt:!1}function wg(){var e=Y.H;return Y.H=Lo,e===null?Lo:e}function Ig(){var e=Y.A;return Y.A=Rx,e}function ls(){Pe=4,Wn||(ie&4194048)!==ie&&Gt.current!==null||(qa=!0),!(hi&134217727)&&!(ki&134217727)||Se===null||Zn(Se,ie,Rt,!1)}function Nr(e,t,n){var i=ce;ce|=2;var a=wg(),o=Ig();(Se!==e||ie!==t)&&(os=null,ka(e,t)),t=!1;var l=Pe;e:do try{if(he!==0&&ne!==null){var r=ne,c=Nt;switch(he){case 8:td(),l=6;break e;case 3:case 2:case 9:case 6:Gt.current===null&&(t=!0);var d=he;if(he=0,Nt=null,da(e,r,c,d),n&&qa){l=0;break e}break;default:d=he,he=0,Nt=null,da(e,r,c,d)}}kx(),l=Pe;break}catch(f){Ag(e,f)}while(!0);return t&&e.shellSuspendCounter++,An=Yi=null,ce=i,Y.H=a,Y.A=o,ne===null&&(Se=null,ie=0,Ms()),l}function kx(){for(;ne!==null;)Rg(ne)}function Lx(e,t){var n=ce;ce|=2;var i=wg(),a=Ig();Se!==e||ie!==t?(os=null,as=Mt()+500,ka(e,t)):qa=Vo(e,t);e:do try{if(he!==0&&ne!==null){t=ne;var o=Nt;t:switch(he){case 1:he=0,Nt=null,da(e,t,o,1);break;case 2:case 9:if(cf(o)){he=0,Nt=null,Lf(t);break}t=function(){he!==2&&he!==9||Se!==e||(he=7),pn(e)},o.then(t,t);break e;case 3:he=7;break e;case 4:he=5;break e;case 7:cf(o)?(he=0,Nt=null,Lf(t)):(he=0,Nt=null,da(e,t,o,7));break;case 5:var l=null;switch(ne.tag){case 26:l=ne.memoizedState;case 5:case 27:var r=ne;if(l?Xg(l):r.stateNode.complete){he=0,Nt=null;var c=r.sibling;if(c!==null)ne=c;else{var d=r.return;d!==null?(ne=d,Os(d)):ne=null}break t}}he=0,Nt=null,da(e,t,o,5);break;case 6:he=0,Nt=null,da(e,t,o,6);break;case 8:td(),Pe=6;break e;default:throw Error(k(462))}}Ux();break}catch(f){Ag(e,f)}while(!0);return An=Yi=null,Y.H=i,Y.A=a,ce=n,ne!==null?0:(Se=null,ie=0,Ms(),Pe)}function Ux(){for(;ne!==null&&!i_();)Rg(ne)}function Rg(e){var t=ig(e.alternate,e,Ln);e.memoizedProps=e.pendingProps,t===null?Os(e):ne=t}function Lf(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Nf(n,t,t.pendingProps,t.type,void 0,ie);break;case 11:t=Nf(n,t,t.pendingProps,t.type.render,t.ref,ie);break;case 5:Oc(t);default:ag(n,t),t=ne=am(t,Ln),t=ig(n,t,Ln)}e.memoizedProps=e.pendingProps,t===null?Os(e):ne=t}function da(e,t,n,i){An=Yi=null,Oc(t),ya=null,Do=0;var a=t.return;try{if(bx(e,a,t,n,ie)){Pe=1,ts(e,Ft(n,e.current)),ne=null;return}}catch(o){if(a!==null)throw ne=a,o;Pe=1,ts(e,Ft(n,e.current)),ne=null;return}t.flags&32768?(oe||i===1?e=!0:qa||ie&536870912?e=!1:(Wn=e=!0,(i===2||i===9||i===3||i===6)&&(i=Gt.current,i!==null&&i.tag===13&&(i.flags|=16384))),Mg(t,e)):Os(t)}function Os(e){var t=e;do{if(t.flags&32768){Mg(t,Wn);return}e=t.return;var n=Ex(t.alternate,t,Ln);if(n!==null){ne=n;return}if(t=t.sibling,t!==null){ne=t;return}ne=t=e}while(t!==null);Pe===0&&(Pe=5)}function Mg(e,t){do{var n=Ax(e.alternate,e);if(n!==null){n.flags&=32767,ne=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ne=e;return}ne=e=n}while(e!==null);Pe=6,ne=null}function Uf(e,t,n,i,a,o,l,r,c){e.cancelPendingCommit=null;do zs();while($e!==0);if(ce&6)throw Error(k(327));if(t!==null){if(t===e.current)throw Error(k(177));if(o=t.lanes|t.childLanes,o|=Ac,p_(e,n,o,l,r,c),e===Se&&(ne=Se=null,ie=0),Da=t,si=e,In=n,Mu=o,Du=a,Tg=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Px(Fl,function(){return Gg(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Y.T,Y.T=null,a=de.p,de.p=2,l=ce,ce|=4;try{Nx(e,t,n)}finally{ce=l,de.p=a,Y.T=i}}$e=1,Dg(),kg(),Lg()}}function Dg(){if($e===1){$e=0;var e=si,t=Da,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Y.T,Y.T=null;var i=de.p;de.p=2;var a=ce;ce|=4;try{mg(t,e);var o=Hu,l=X0(e.containerInfo),r=o.focusedElem,c=o.selectionRange;if(l!==r&&r&&r.ownerDocument&&j0(r.ownerDocument.documentElement,r)){if(c!==null&&Ec(r)){var d=c.start,f=c.end;if(f===void 0&&(f=d),"selectionStart"in r)r.selectionStart=d,r.selectionEnd=Math.min(f,r.value.length);else{var m=r.ownerDocument||document,h=m&&m.defaultView||window;if(h.getSelection){var g=h.getSelection(),_=r.textContent.length,b=Math.min(c.start,_),T=c.end===void 0?b:Math.min(c.end,_);!g.extend&&b>T&&(l=T,T=b,b=l);var x=nf(r,b),v=nf(r,T);if(x&&v&&(g.rangeCount!==1||g.anchorNode!==x.node||g.anchorOffset!==x.offset||g.focusNode!==v.node||g.focusOffset!==v.offset)){var y=m.createRange();y.setStart(x.node,x.offset),g.removeAllRanges(),b>T?(g.addRange(y),g.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),g.addRange(y))}}}}for(m=[],g=r;g=g.parentNode;)g.nodeType===1&&m.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<m.length;r++){var S=m[r];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}hs=!!Gu,Hu=Gu=null}finally{ce=a,de.p=i,Y.T=n}}e.current=t,$e=2}}function kg(){if($e===2){$e=0;var e=si,t=Da,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Y.T,Y.T=null;var i=de.p;de.p=2;var a=ce;ce|=4;try{cg(e,t.alternate,t)}finally{ce=a,de.p=i,Y.T=n}}$e=3}}function Lg(){if($e===4||$e===3){$e=0,a_();var e=si,t=Da,n=In,i=Tg;t.subtreeFlags&10256||t.flags&10256?$e=5:($e=0,Da=si=null,Ug(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(li=null),yc(n),t=t.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(qo,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Y.T,a=de.p,de.p=2,Y.T=null;try{for(var o=e.onRecoverableError,l=0;l<i.length;l++){var r=i[l];o(r.value,{componentStack:r.stack})}}finally{Y.T=t,de.p=a}}In&3&&zs(),pn(e),a=e.pendingLanes,n&261930&&a&42?e===ku?Co++:(Co=0,ku=e):Co=0,Xo(0)}}function Ug(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ko(t)))}function zs(){return Dg(),kg(),Lg(),Gg()}function Gg(){if($e!==5)return!1;var e=si,t=Mu;Mu=0;var n=yc(In),i=Y.T,a=de.p;try{de.p=32>n?32:n,Y.T=null,n=Du,Du=null;var o=si,l=In;if($e=0,Da=si=null,In=0,ce&6)throw Error(k(331));var r=ce;if(ce|=4,xg(o.current),vg(o,o.current,l,n),ce=r,Xo(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(qo,o)}catch{}return!0}finally{de.p=a,Y.T=i,Ug(e,t)}}function Gf(e,t,n){t=Ft(n,t),t=Au(e.stateNode,t,2),e=oi(e,t,2),e!==null&&(Fo(e,2),pn(e))}function me(e,t,n){if(e.tag===3)Gf(e,e,n);else for(;t!==null;){if(t.tag===3){Gf(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(li===null||!li.has(i))){e=Ft(n,e),n=Qm(2),i=oi(t,n,2),i!==null&&(Wm(n,i,t,e),Fo(i,2),pn(i));break}}t=t.return}}function wr(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Mx;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(Zc=!0,a.add(n),e=Gx.bind(null,e,t,n),t.then(e,e))}function Gx(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Se===e&&(ie&n)===n&&(Pe===4||Pe===3&&(ie&62914560)===ie&&300>Mt()-Bs?!(ce&2)&&ka(e,0):ed|=n,Ma===ie&&(Ma=0)),pn(e)}function Hg(e,t){t===0&&(t=w0()),e=Fi(e,t),e!==null&&(Fo(e,t),pn(e))}function Hx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Hg(e,n)}function Bx(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(k(314))}i!==null&&i.delete(t),Hg(e,n)}function Px(e,t){return gc(e,t)}var ss=null,Wi=null,Lu=!1,rs=!1,Ir=!1,ei=0;function pn(e){e!==Wi&&e.next===null&&(Wi===null?ss=Wi=e:Wi=Wi.next=e),rs=!0,Lu||(Lu=!0,zx())}function Xo(e,t){if(!Ir&&rs){Ir=!0;do for(var n=!1,i=ss;i!==null;){if(e!==0){var a=i.pendingLanes;if(a===0)var o=0;else{var l=i.suspendedLanes,r=i.pingedLanes;o=(1<<31-kt(42|e)+1)-1,o&=a&~(l&~r),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,Hf(i,o))}else o=ie,o=Ns(i,i===Se?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(o&3)||Vo(i,o)||(n=!0,Hf(i,o));i=i.next}while(n);Ir=!1}}function Ox(){Bg()}function Bg(){rs=Lu=!1;var e=0;ei!==0&&Qx()&&(e=ei);for(var t=Mt(),n=null,i=ss;i!==null;){var a=i.next,o=Pg(i,t);o===0?(i.next=null,n===null?ss=a:n.next=a,a===null&&(Wi=n)):(n=i,(e!==0||o&3)&&(rs=!0)),i=a}$e!==0&&$e!==5||Xo(e),ei!==0&&(ei=0)}function Pg(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var l=31-kt(o),r=1<<l,c=a[l];c===-1?(!(r&n)||r&i)&&(a[l]=f_(r,t)):c<=t&&(e.expiredLanes|=r),o&=~r}if(t=Se,n=ie,n=Ns(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(he===2||he===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&ir(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Vo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&ir(i),yc(n)){case 2:case 8:n=A0;break;case 32:n=Fl;break;case 268435456:n=N0;break;default:n=Fl}return i=Og.bind(null,e),n=gc(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&ir(i),e.callbackPriority=2,e.callbackNode=null,2}function Og(e,t){if($e!==0&&$e!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(zs()&&e.callbackNode!==n)return null;var i=ie;return i=Ns(e,e===Se?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Eg(e,i,t),Pg(e,Mt()),e.callbackNode!=null&&e.callbackNode===n?Og.bind(null,e):null)}function Hf(e,t){if(zs())return null;Eg(e,t,!0)}function zx(){Zx(function(){ce&6?gc(E0,Ox):Bg()})}function nd(){if(ei===0){var e=wa;e===0&&(e=il,il<<=1,!(il&261888)&&(il=256)),ei=e}return ei}function Bf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Cl(""+e)}function Pf(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function qx(e,t,n,i,a){if(t==="submit"&&n&&n.stateNode===a){var o=Bf((a[Et]||null).action),l=i.submitter;l&&(t=(t=l[Et]||null)?Bf(t.formAction):l.getAttribute("formAction"),t!==null&&(o=t,l=null));var r=new ws("action","action",null,i,a);e.push({event:r,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ei!==0){var c=l?Pf(a,l):new FormData(a);Cu(n,{pending:!0,data:c,method:a.method,action:o},null,c)}}else typeof o=="function"&&(r.preventDefault(),c=l?Pf(a,l):new FormData(a),Cu(n,{pending:!0,data:c,method:a.method,action:o},o,c))},currentTarget:a}]})}}for(var Rr=0;Rr<fu.length;Rr++){var Mr=fu[Rr],Vx=Mr.toLowerCase(),Fx=Mr[0].toUpperCase()+Mr.slice(1);nn(Vx,"on"+Fx)}nn(W0,"onAnimationEnd");nn(Z0,"onAnimationIteration");nn(em,"onAnimationStart");nn("dblclick","onDoubleClick");nn("focusin","onFocus");nn("focusout","onBlur");nn(ox,"onTransitionRun");nn(lx,"onTransitionStart");nn(sx,"onTransitionCancel");nn(tm,"onTransitionEnd");Aa("onMouseEnter",["mouseout","mouseover"]);Aa("onMouseLeave",["mouseout","mouseover"]);Aa("onPointerEnter",["pointerout","pointerover"]);Aa("onPointerLeave",["pointerout","pointerover"]);zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uo));function zg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var l=i.length-1;0<=l;l--){var r=i[l],c=r.instance,d=r.currentTarget;if(r=r.listener,c!==o&&a.isPropagationStopped())break e;o=r,a.currentTarget=d;try{o(a)}catch(f){Jl(f)}a.currentTarget=null,o=c}else for(l=0;l<i.length;l++){if(r=i[l],c=r.instance,d=r.currentTarget,r=r.listener,c!==o&&a.isPropagationStopped())break e;o=r,a.currentTarget=d;try{o(a)}catch(f){Jl(f)}a.currentTarget=null,o=c}}}}function te(e,t){var n=t[au];n===void 0&&(n=t[au]=new Set);var i=e+"__bubble";n.has(i)||(qg(t,e,2,!1),n.add(i))}function Dr(e,t,n){var i=0;t&&(i|=4),qg(n,e,i,t)}var pl="_reactListening"+Math.random().toString(36).slice(2);function id(e){if(!e[pl]){e[pl]=!0,k0.forEach(function(n){n!=="selectionchange"&&(Yx.has(n)||Dr(n,!1,e),Dr(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pl]||(t[pl]=!0,Dr("selectionchange",!1,t))}}function qg(e,t,n,i){switch(tv(t)){case 2:var a=_S;break;case 8:a=xS;break;default:a=sd}n=a.bind(null,t,n,e),a=void 0,!uu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function kr(e,t,n,i,a){var o=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var r=i.stateNode.containerInfo;if(r===a)break;if(l===4)for(l=i.return;l!==null;){var c=l.tag;if((c===3||c===4)&&l.stateNode.containerInfo===a)return;l=l.return}for(;r!==null;){if(l=na(r),l===null)return;if(c=l.tag,c===5||c===6||c===26||c===27){i=o=l;continue e}r=r.parentNode}}i=i.return}z0(function(){var d=o,f=Sc(n),m=[];e:{var h=nm.get(e);if(h!==void 0){var g=ws,_=e;switch(e){case"keypress":if(Al(n)===0)break e;case"keydown":case"keyup":g=H_;break;case"focusin":_="focus",g=rr;break;case"focusout":_="blur",g=rr;break;case"beforeblur":case"afterblur":g=rr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=E_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=O_;break;case W0:case Z0:case em:g=w_;break;case tm:g=q_;break;case"scroll":case"scrollend":g=T_;break;case"wheel":g=F_;break;case"copy":case"cut":case"paste":g=R_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=$d;break;case"toggle":case"beforetoggle":g=J_}var b=(t&4)!==0,T=!b&&(e==="scroll"||e==="scrollend"),x=b?h!==null?h+"Capture":null:h;b=[];for(var v=d,y;v!==null;){var S=v;if(y=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||y===null||x===null||(S=No(v,x),S!=null&&b.push(Go(v,S,y))),T)break;v=v.return}0<b.length&&(h=new g(h,_,null,n,f),m.push({event:h,listeners:b}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==ru&&(_=n.relatedTarget||n.fromElement)&&(na(_)||_[Ba]))break e;if((g||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=d,_=_?na(_):null,_!==null&&(T=zo(_),b=_.tag,_!==T||b!==5&&b!==27&&b!==6)&&(_=null)):(g=null,_=d),g!==_)){if(b=Jd,S="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(b=$d,S="onPointerLeave",x="onPointerEnter",v="pointer"),T=g==null?h:lo(g),y=_==null?h:lo(_),h=new b(S,v+"leave",g,n,f),h.target=T,h.relatedTarget=y,S=null,na(f)===d&&(b=new b(x,v+"enter",_,n,f),b.target=y,b.relatedTarget=T,S=b),T=S,g&&_)t:{for(b=Jx,x=g,v=_,y=0,S=x;S;S=b(S))y++;S=0;for(var E=v;E;E=b(E))S++;for(;0<y-S;)x=b(x),y--;for(;0<S-y;)v=b(v),S--;for(;y--;){if(x===v||v!==null&&x===v.alternate){b=x;break t}x=b(x),v=b(v)}b=null}else b=null;g!==null&&Of(m,h,g,b,!1),_!==null&&T!==null&&Of(m,T,_,b,!0)}}e:{if(h=d?lo(d):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var A=Wd;else if(Qd(h))if(K0)A=nx;else{A=ex;var C=Z_}else g=h.nodeName,!g||g.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?d&&xc(d.elementType)&&(A=Wd):A=tx;if(A&&(A=A(e,d))){J0(m,A,n,f);break e}C&&C(e,h,d),e==="focusout"&&d&&h.type==="number"&&d.memoizedProps.value!=null&&su(h,"number",h.value)}switch(C=d?lo(d):window,e){case"focusin":(Qd(C)||C.contentEditable==="true")&&(oa=C,cu=d,mo=null);break;case"focusout":mo=cu=oa=null;break;case"mousedown":du=!0;break;case"contextmenu":case"mouseup":case"dragend":du=!1,af(m,n,f);break;case"selectionchange":if(ax)break;case"keydown":case"keyup":af(m,n,f)}var R;if(Cc)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else aa?F0(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(V0&&n.locale!=="ko"&&(aa||N!=="onCompositionStart"?N==="onCompositionEnd"&&aa&&(R=q0()):(Qn=f,bc="value"in Qn?Qn.value:Qn.textContent,aa=!0)),C=us(d,N),0<C.length&&(N=new Kd(N,e,null,n,f),m.push({event:N,listeners:C}),R?N.data=R:(R=Y0(n),R!==null&&(N.data=R)))),(R=$_?j_(e,n):X_(e,n))&&(N=us(d,"onBeforeInput"),0<N.length&&(C=new Kd("onBeforeInput","beforeinput",null,n,f),m.push({event:C,listeners:N}),C.data=R)),qx(m,e,d,n,f)}zg(m,t)})}function Go(e,t,n){return{instance:e,listener:t,currentTarget:n}}function us(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,o=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||o===null||(a=No(e,n),a!=null&&i.unshift(Go(e,a,o)),a=No(e,t),a!=null&&i.push(Go(e,a,o))),e.tag===3)return i;e=e.return}return[]}function Jx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Of(e,t,n,i,a){for(var o=t._reactName,l=[];n!==null&&n!==i;){var r=n,c=r.alternate,d=r.stateNode;if(r=r.tag,c!==null&&c===i)break;r!==5&&r!==26&&r!==27||d===null||(c=d,a?(d=No(n,o),d!=null&&l.unshift(Go(n,d,c))):a||(d=No(n,o),d!=null&&l.push(Go(n,d,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Kx=/\r\n?/g,$x=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(Kx,`
`).replace($x,"")}function Vg(e,t){return t=zf(t),zf(e)===t}function ye(e,t,n,i,a,o){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Na(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Na(e,""+i);break;case"className":ll(e,"class",i);break;case"tabIndex":ll(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ll(e,n,i);break;case"style":O0(e,i,o);break;case"data":if(t!=="object"){ll(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Cl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&ye(e,t,"name",a.name,a,null),ye(e,t,"formEncType",a.formEncType,a,null),ye(e,t,"formMethod",a.formMethod,a,null),ye(e,t,"formTarget",a.formTarget,a,null)):(ye(e,t,"encType",a.encType,a,null),ye(e,t,"method",a.method,a,null),ye(e,t,"target",a.target,a,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Cl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=En);break;case"onScroll":i!=null&&te("scroll",e);break;case"onScrollEnd":i!=null&&te("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(k(61));if(n=i.__html,n!=null){if(a.children!=null)throw Error(k(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Cl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":te("beforetoggle",e),te("toggle",e),Tl(e,"popover",i);break;case"xlinkActuate":vn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":vn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":vn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":vn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":vn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":vn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":vn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":vn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":vn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Tl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=S_.get(n)||n,Tl(e,n,i))}}function Uu(e,t,n,i,a,o){switch(n){case"style":O0(e,i,o);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(k(61));if(n=i.__html,n!=null){if(a.children!=null)throw Error(k(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Na(e,i):(typeof i=="number"||typeof i=="bigint")&&Na(e,""+i);break;case"onScroll":i!=null&&te("scroll",e);break;case"onScrollEnd":i!=null&&te("scrollend",e);break;case"onClick":i!=null&&(e.onclick=En);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!L0.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),o=e[Et]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,a),typeof i=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,a);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Tl(e,n,i)}}}function lt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":te("error",e),te("load",e);var i=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var l=n[o];if(l!=null)switch(o){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(k(137,t));default:ye(e,t,o,l,n,null)}}a&&ye(e,t,"srcSet",n.srcSet,n,null),i&&ye(e,t,"src",n.src,n,null);return;case"input":te("invalid",e);var r=o=l=a=null,c=null,d=null;for(i in n)if(n.hasOwnProperty(i)){var f=n[i];if(f!=null)switch(i){case"name":a=f;break;case"type":l=f;break;case"checked":c=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":r=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(k(137,t));break;default:ye(e,t,i,f,n,null)}}H0(e,o,r,c,d,l,a,!1);return;case"select":te("invalid",e),i=l=o=null;for(a in n)if(n.hasOwnProperty(a)&&(r=n[a],r!=null))switch(a){case"value":o=r;break;case"defaultValue":l=r;break;case"multiple":i=r;default:ye(e,t,a,r,n,null)}t=o,n=l,e.multiple=!!i,t!=null?ma(e,!!i,t,!1):n!=null&&ma(e,!!i,n,!0);return;case"textarea":te("invalid",e),o=a=i=null;for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case"value":i=r;break;case"defaultValue":a=r;break;case"children":o=r;break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(k(91));break;default:ye(e,t,l,r,n,null)}P0(e,i,a,o);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:ye(e,t,c,i,n,null)}return;case"dialog":te("beforetoggle",e),te("toggle",e),te("cancel",e),te("close",e);break;case"iframe":case"object":te("load",e);break;case"video":case"audio":for(i=0;i<Uo.length;i++)te(Uo[i],e);break;case"image":te("error",e),te("load",e);break;case"details":te("toggle",e);break;case"embed":case"source":case"link":te("error",e),te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(i=n[d],i!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(k(137,t));default:ye(e,t,d,i,n,null)}return;default:if(xc(t)){for(f in n)n.hasOwnProperty(f)&&(i=n[f],i!==void 0&&Uu(e,t,f,i,n,void 0));return}}for(r in n)n.hasOwnProperty(r)&&(i=n[r],i!=null&&ye(e,t,r,i,n,null))}function jx(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,o=null,l=null,r=null,c=null,d=null,f=null;for(g in n){var m=n[g];if(n.hasOwnProperty(g)&&m!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=m;default:i.hasOwnProperty(g)||ye(e,t,g,null,i,m)}}for(var h in i){var g=i[h];if(m=n[h],i.hasOwnProperty(h)&&(g!=null||m!=null))switch(h){case"type":o=g;break;case"name":a=g;break;case"checked":d=g;break;case"defaultChecked":f=g;break;case"value":l=g;break;case"defaultValue":r=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(k(137,t));break;default:g!==m&&ye(e,t,h,g,i,m)}}lu(e,l,r,c,d,f,o,a);return;case"select":g=l=r=h=null;for(o in n)if(c=n[o],n.hasOwnProperty(o)&&c!=null)switch(o){case"value":break;case"multiple":g=c;default:i.hasOwnProperty(o)||ye(e,t,o,null,i,c)}for(a in i)if(o=i[a],c=n[a],i.hasOwnProperty(a)&&(o!=null||c!=null))switch(a){case"value":h=o;break;case"defaultValue":r=o;break;case"multiple":l=o;default:o!==c&&ye(e,t,a,o,i,c)}t=r,n=l,i=g,h!=null?ma(e,!!n,h,!1):!!i!=!!n&&(t!=null?ma(e,!!n,t,!0):ma(e,!!n,n?[]:"",!1));return;case"textarea":g=h=null;for(r in n)if(a=n[r],n.hasOwnProperty(r)&&a!=null&&!i.hasOwnProperty(r))switch(r){case"value":break;case"children":break;default:ye(e,t,r,null,i,a)}for(l in i)if(a=i[l],o=n[l],i.hasOwnProperty(l)&&(a!=null||o!=null))switch(l){case"value":h=a;break;case"defaultValue":g=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(k(91));break;default:a!==o&&ye(e,t,l,a,i,o)}B0(e,h,g);return;case"option":for(var _ in n)if(h=n[_],n.hasOwnProperty(_)&&h!=null&&!i.hasOwnProperty(_))switch(_){case"selected":e.selected=!1;break;default:ye(e,t,_,null,i,h)}for(c in i)if(h=i[c],g=n[c],i.hasOwnProperty(c)&&h!==g&&(h!=null||g!=null))switch(c){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ye(e,t,c,h,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)h=n[b],n.hasOwnProperty(b)&&h!=null&&!i.hasOwnProperty(b)&&ye(e,t,b,null,i,h);for(d in i)if(h=i[d],g=n[d],i.hasOwnProperty(d)&&h!==g&&(h!=null||g!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(k(137,t));break;default:ye(e,t,d,h,i,g)}return;default:if(xc(t)){for(var T in n)h=n[T],n.hasOwnProperty(T)&&h!==void 0&&!i.hasOwnProperty(T)&&Uu(e,t,T,void 0,i,h);for(f in i)h=i[f],g=n[f],!i.hasOwnProperty(f)||h===g||h===void 0&&g===void 0||Uu(e,t,f,h,i,g);return}}for(var x in n)h=n[x],n.hasOwnProperty(x)&&h!=null&&!i.hasOwnProperty(x)&&ye(e,t,x,null,i,h);for(m in i)h=i[m],g=n[m],!i.hasOwnProperty(m)||h===g||h==null&&g==null||ye(e,t,m,h,i,g)}function qf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var a=n[i],o=a.transferSize,l=a.initiatorType,r=a.duration;if(o&&r&&qf(l)){for(l=0,r=a.responseEnd,i+=1;i<n.length;i++){var c=n[i],d=c.startTime;if(d>r)break;var f=c.transferSize,m=c.initiatorType;f&&qf(m)&&(c=c.responseEnd,l+=f*(c<r?1:(r-d)/(c-d)))}if(--i,t+=8*(o+l)/(a.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Gu=null,Hu=null;function cs(e){return e.nodeType===9?e:e.ownerDocument}function Vf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Bu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Lr=null;function Qx(){var e=window.event;return e&&e.type==="popstate"?e===Lr?!1:(Lr=e,!0):(Lr=null,!1)}var Yg=typeof setTimeout=="function"?setTimeout:void 0,Wx=typeof clearTimeout=="function"?clearTimeout:void 0,Ff=typeof Promise=="function"?Promise:void 0,Zx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ff<"u"?function(e){return Ff.resolve(null).then(e).catch(eS)}:Yg;function eS(e){setTimeout(function(){throw e})}function vi(e){return e==="head"}function Yf(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(a),Ua(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Eo(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Eo(n);for(var o=n.firstChild;o;){var l=o.nextSibling,r=o.nodeName;o[Yo]||r==="SCRIPT"||r==="STYLE"||r==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=l}}else n==="body"&&Eo(e.ownerDocument.body);n=a}while(n);Ua(t)}function Jf(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function Pu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Pu(n),_c(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function tS(e,t,n,i){for(;e.nodeType===1;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Yo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=Kt(e.nextSibling),e===null)break}return null}function nS(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Kt(e.nextSibling),e===null))return null;return e}function Jg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Kt(e.nextSibling),e===null))return null;return e}function Ou(e){return e.data==="$?"||e.data==="$~"}function zu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function iS(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Kt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var qu=null;function Kf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Kt(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function $f(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Kg(e,t,n){switch(t=cs(n),e){case"html":if(e=t.documentElement,!e)throw Error(k(452));return e;case"head":if(e=t.head,!e)throw Error(k(453));return e;case"body":if(e=t.body,!e)throw Error(k(454));return e;default:throw Error(k(451))}}function Eo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);_c(e)}var jt=new Map,jf=new Set;function ds(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gn=de.d;de.d={f:aS,r:oS,D:lS,C:sS,L:rS,m:uS,X:dS,S:cS,M:fS};function aS(){var e=Gn.f(),t=Ps();return e||t}function oS(e){var t=Pa(e);t!==null&&t.tag===5&&t.type==="form"?Om(t):Gn.r(e)}var Va=typeof document>"u"?null:document;function $g(e,t,n){var i=Va;if(i&&typeof t=="string"&&t){var a=Vt(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),jf.has(a)||(jf.add(a),e={rel:e,crossOrigin:n,href:t},i.querySelector(a)===null&&(t=i.createElement("link"),lt(t,"link",e),We(t),i.head.appendChild(t)))}}function lS(e){Gn.D(e),$g("dns-prefetch",e,null)}function sS(e,t){Gn.C(e,t),$g("preconnect",e,t)}function rS(e,t,n){Gn.L(e,t,n);var i=Va;if(i&&e&&t){var a='link[rel="preload"][as="'+Vt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+Vt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+Vt(n.imageSizes)+'"]')):a+='[href="'+Vt(e)+'"]';var o=a;switch(t){case"style":o=La(e);break;case"script":o=Fa(e)}jt.has(o)||(e=Ie({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),jt.set(o,e),i.querySelector(a)!==null||t==="style"&&i.querySelector(Qo(o))||t==="script"&&i.querySelector(Wo(o))||(t=i.createElement("link"),lt(t,"link",e),We(t),i.head.appendChild(t)))}}function uS(e,t){Gn.m(e,t);var n=Va;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+Vt(i)+'"][href="'+Vt(e)+'"]',o=a;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Fa(e)}if(!jt.has(o)&&(e=Ie({rel:"modulepreload",href:e},t),jt.set(o,e),n.querySelector(a)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Wo(o)))return}i=n.createElement("link"),lt(i,"link",e),We(i),n.head.appendChild(i)}}}function cS(e,t,n){Gn.S(e,t,n);var i=Va;if(i&&e){var a=ha(i).hoistableStyles,o=La(e);t=t||"default";var l=a.get(o);if(!l){var r={loading:0,preload:null};if(l=i.querySelector(Qo(o)))r.loading=5;else{e=Ie({rel:"stylesheet",href:e,"data-precedence":t},n),(n=jt.get(o))&&ad(e,n);var c=l=i.createElement("link");We(c),lt(c,"link",e),c._p=new Promise(function(d,f){c.onload=d,c.onerror=f}),c.addEventListener("load",function(){r.loading|=1}),c.addEventListener("error",function(){r.loading|=2}),r.loading|=4,Ll(l,t,i)}l={type:"stylesheet",instance:l,count:1,state:r},a.set(o,l)}}}function dS(e,t){Gn.X(e,t);var n=Va;if(n&&e){var i=ha(n).hoistableScripts,a=Fa(e),o=i.get(a);o||(o=n.querySelector(Wo(a)),o||(e=Ie({src:e,async:!0},t),(t=jt.get(a))&&od(e,t),o=n.createElement("script"),We(o),lt(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(a,o))}}function fS(e,t){Gn.M(e,t);var n=Va;if(n&&e){var i=ha(n).hoistableScripts,a=Fa(e),o=i.get(a);o||(o=n.querySelector(Wo(a)),o||(e=Ie({src:e,async:!0,type:"module"},t),(t=jt.get(a))&&od(e,t),o=n.createElement("script"),We(o),lt(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(a,o))}}function Xf(e,t,n,i){var a=(a=ni.current)?ds(a):null;if(!a)throw Error(k(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=La(n.href),n=ha(a).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=La(n.href);var o=ha(a).hoistableStyles,l=o.get(e);if(l||(a=a.ownerDocument||a,l={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,l),(o=a.querySelector(Qo(e)))&&!o._p&&(l.instance=o,l.state.loading=5),jt.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},jt.set(e,n),o||pS(a,e,n,l.state))),t&&i===null)throw Error(k(528,""));return l}if(t&&i!==null)throw Error(k(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Fa(n),n=ha(a).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(k(444,e))}}function La(e){return'href="'+Vt(e)+'"'}function Qo(e){return'link[rel="stylesheet"]['+e+"]"}function jg(e){return Ie({},e,{"data-precedence":e.precedence,precedence:null})}function pS(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),lt(t,"link",n),We(t),e.head.appendChild(t))}function Fa(e){return'[src="'+Vt(e)+'"]'}function Wo(e){return"script[async]"+e}function Qf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Vt(n.href)+'"]');if(i)return t.instance=i,We(i),i;var a=Ie({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),We(i),lt(i,"style",a),Ll(i,n.precedence,e),t.instance=i;case"stylesheet":a=La(n.href);var o=e.querySelector(Qo(a));if(o)return t.state.loading|=4,t.instance=o,We(o),o;i=jg(n),(a=jt.get(a))&&ad(i,a),o=(e.ownerDocument||e).createElement("link"),We(o);var l=o;return l._p=new Promise(function(r,c){l.onload=r,l.onerror=c}),lt(o,"link",i),t.state.loading|=4,Ll(o,n.precedence,e),t.instance=o;case"script":return o=Fa(n.src),(a=e.querySelector(Wo(o)))?(t.instance=a,We(a),a):(i=n,(a=jt.get(o))&&(i=Ie({},n),od(i,a)),e=e.ownerDocument||e,a=e.createElement("script"),We(a),lt(a,"link",i),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(k(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Ll(i,n.precedence,e));return t.instance}function Ll(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=i.length?i[i.length-1]:null,o=a,l=0;l<i.length;l++){var r=i[l];if(r.dataset.precedence===t)o=r;else if(o!==a)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function ad(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function od(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ul=null;function Wf(e,t,n){if(Ul===null){var i=new Map,a=Ul=new Map;a.set(n,i)}else a=Ul,i=a.get(n),i||(i=new Map,a.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var o=n[a];if(!(o[Yo]||o[it]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var l=o.getAttribute(t)||"";l=e+l;var r=i.get(l);r?r.push(o):i.set(l,[o])}}return i}function Zf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function hS(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Xg(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function mS(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var a=La(i.href),o=t.querySelector(Qo(a));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=fs.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=o,We(o);return}o=t.ownerDocument||t,i=jg(i),(a=jt.get(a))&&ad(i,a),o=o.createElement("link"),We(o);var l=o;l._p=new Promise(function(r,c){l.onload=r,l.onerror=c}),lt(o,"link",i),n.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=fs.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Ur=0;function gS(e,t){return e.stylesheets&&e.count===0&&Gl(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&Gl(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&Ur===0&&(Ur=62500*Xx());var a=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Gl(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>Ur?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(a)}}:null}function fs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ps=null;function Gl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ps=new Map,t.forEach(vS,e),ps=null,fs.call(e))}function vS(e,t){if(!(t.state.loading&4)){var n=ps.get(e);if(n)var i=n.get(null);else{n=new Map,ps.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<a.length;o++){var l=a[o];(l.nodeName==="LINK"||l.getAttribute("media")!=="not all")&&(n.set(l.dataset.precedence,l),i=l)}i&&n.set(null,i)}a=t.instance,l=a.getAttribute("data-precedence"),o=n.get(l)||i,o===i&&n.set(null,a),n.set(l,a),this.count++,i=fs.bind(this),a.addEventListener("load",i),a.addEventListener("error",i),o?o.parentNode.insertBefore(a,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var Ho={$$typeof:Cn,Provider:null,Consumer:null,_currentValue:Ii,_currentValue2:Ii,_threadCount:0};function yS(e,t,n,i,a,o,l,r,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ar(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ar(0),this.hiddenUpdates=ar(null),this.identifierPrefix=i,this.onUncaughtError=a,this.onCaughtError=o,this.onRecoverableError=l,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function Qg(e,t,n,i,a,o,l,r,c,d,f,m){return e=new yS(e,t,n,l,c,d,f,m,r),t=1,o===!0&&(t|=24),o=It(3,null,null,t),e.current=o,o.stateNode=e,t=Mc(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:i,isDehydrated:n,cache:t},Lc(o),e}function Wg(e){return e?(e=ra,e):ra}function Zg(e,t,n,i,a,o){a=Wg(a),i.context===null?i.context=a:i.pendingContext=a,i=ai(t),i.payload={element:n},o=o===void 0?null:o,o!==null&&(i.callback=o),n=oi(e,i,t),n!==null&&(Tt(n,e,t),vo(n,e,t))}function ep(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ld(e,t){ep(e,t),(e=e.alternate)&&ep(e,t)}function ev(e){if(e.tag===13||e.tag===31){var t=Fi(e,67108864);t!==null&&Tt(t,e,67108864),ld(e,67108864)}}function tp(e){if(e.tag===13||e.tag===31){var t=Lt();t=vc(t);var n=Fi(e,t);n!==null&&Tt(n,e,t),ld(e,t)}}var hs=!0;function _S(e,t,n,i){var a=Y.T;Y.T=null;var o=de.p;try{de.p=2,sd(e,t,n,i)}finally{de.p=o,Y.T=a}}function xS(e,t,n,i){var a=Y.T;Y.T=null;var o=de.p;try{de.p=8,sd(e,t,n,i)}finally{de.p=o,Y.T=a}}function sd(e,t,n,i){if(hs){var a=Vu(i);if(a===null)kr(e,t,i,ms,n),np(e,i);else if(bS(a,e,t,n,i))i.stopPropagation();else if(np(e,i),t&4&&-1<SS.indexOf(e)){for(;a!==null;){var o=Pa(a);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var l=Ci(o.pendingLanes);if(l!==0){var r=o;for(r.pendingLanes|=2,r.entangledLanes|=2;l;){var c=1<<31-kt(l);r.entanglements[1]|=c,l&=~c}pn(o),!(ce&6)&&(as=Mt()+500,Xo(0))}}break;case 31:case 13:r=Fi(o,2),r!==null&&Tt(r,o,2),Ps(),ld(o,2)}if(o=Vu(i),o===null&&kr(e,t,i,ms,n),o===a)break;a=o}a!==null&&i.stopPropagation()}else kr(e,t,i,null,n)}}function Vu(e){return e=Sc(e),rd(e)}var ms=null;function rd(e){if(ms=null,e=na(e),e!==null){var t=zo(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=x0(t),e!==null)return e;e=null}else if(n===31){if(e=S0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ms=e,null}function tv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(o_()){case E0:return 2;case A0:return 8;case Fl:case l_:return 32;case N0:return 268435456;default:return 32}default:return 32}}var Fu=!1,ri=null,ui=null,ci=null,Bo=new Map,Po=new Map,$n=[],SS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function np(e,t){switch(e){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Bo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(t.pointerId)}}function no(e,t,n,i,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Pa(t),t!==null&&ev(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function bS(e,t,n,i,a){switch(t){case"focusin":return ri=no(ri,e,t,n,i,a),!0;case"dragenter":return ui=no(ui,e,t,n,i,a),!0;case"mouseover":return ci=no(ci,e,t,n,i,a),!0;case"pointerover":var o=a.pointerId;return Bo.set(o,no(Bo.get(o)||null,e,t,n,i,a)),!0;case"gotpointercapture":return o=a.pointerId,Po.set(o,no(Po.get(o)||null,e,t,n,i,a)),!0}return!1}function nv(e){var t=na(e.target);if(t!==null){var n=zo(t);if(n!==null){if(t=n.tag,t===13){if(t=x0(n),t!==null){e.blockedOn=t,Pd(e.priority,function(){tp(n)});return}}else if(t===31){if(t=S0(n),t!==null){e.blockedOn=t,Pd(e.priority,function(){tp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vu(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);ru=i,n.target.dispatchEvent(i),ru=null}else return t=Pa(n),t!==null&&ev(t),e.blockedOn=n,!1;t.shift()}return!0}function ip(e,t,n){Hl(e)&&n.delete(t)}function TS(){Fu=!1,ri!==null&&Hl(ri)&&(ri=null),ui!==null&&Hl(ui)&&(ui=null),ci!==null&&Hl(ci)&&(ci=null),Bo.forEach(ip),Po.forEach(ip)}function hl(e,t){e.blockedOn===t&&(e.blockedOn=null,Fu||(Fu=!0,je.unstable_scheduleCallback(je.unstable_NormalPriority,TS)))}var ml=null;function ap(e){ml!==e&&(ml=e,je.unstable_scheduleCallback(je.unstable_NormalPriority,function(){ml===e&&(ml=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],a=e[t+2];if(typeof i!="function"){if(rd(i||n)===null)continue;break}var o=Pa(n);o!==null&&(e.splice(t,3),t-=3,Cu(o,{pending:!0,data:a,method:n.method,action:i},i,a))}}))}function Ua(e){function t(c){return hl(c,e)}ri!==null&&hl(ri,e),ui!==null&&hl(ui,e),ci!==null&&hl(ci,e),Bo.forEach(t),Po.forEach(t);for(var n=0;n<$n.length;n++){var i=$n[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<$n.length&&(n=$n[0],n.blockedOn===null);)nv(n),n.blockedOn===null&&$n.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var a=n[i],o=n[i+1],l=a[Et]||null;if(typeof o=="function")l||ap(n);else if(l){var r=null;if(o&&o.hasAttribute("formAction")){if(a=o,l=o[Et]||null)r=l.formAction;else if(rd(a)!==null)continue}else r=l.action;typeof r=="function"?n[i+1]=r:(n.splice(i,3),i-=3),ap(n)}}}function iv(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(l){return a=l})},focusReset:"manual",scroll:"manual"})}function t(){a!==null&&(a(),a=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),a!==null&&(a(),a=null)}}}function ud(e){this._internalRoot=e}qs.prototype.render=ud.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(k(409));var n=t.current,i=Lt();Zg(n,i,e,t,null,null)};qs.prototype.unmount=ud.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zg(e.current,2,null,e,null,null),Ps(),t[Ba]=null}};function qs(e){this._internalRoot=e}qs.prototype.unstable_scheduleHydration=function(e){if(e){var t=D0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$n.length&&t!==0&&t<$n[n].priority;n++);$n.splice(n,0,e),n===0&&nv(e)}};var op=y0.version;if(op!=="19.2.3")throw Error(k(527,op,"19.2.3"));de.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(k(188)):(e=Object.keys(e).join(","),Error(k(268,e)));return e=Wy(t),e=e!==null?b0(e):null,e=e===null?null:e.stateNode,e};var CS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{qo=gl.inject(CS),Dt=gl}catch{}}Es.createRoot=function(e,t){if(!_0(e))throw Error(k(299));var n=!1,i="",a=$m,o=jm,l=Xm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Qg(e,1,!1,null,null,n,i,null,a,o,l,iv),e[Ba]=t.current,id(e),new ud(t)};Es.hydrateRoot=function(e,t,n){if(!_0(e))throw Error(k(299));var i=!1,a="",o=$m,l=jm,r=Xm,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(l=n.onCaughtError),n.onRecoverableError!==void 0&&(r=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),t=Qg(e,1,!0,t,n??null,i,a,c,o,l,r,iv),t.context=Wg(null),n=t.current,i=Lt(),i=vc(i),a=ai(i),a.callback=null,oi(n,a,i),n=i,t.current.lanes=n,Fo(t,n),pn(t),e[Ba]=t.current,id(e),new qs(t)};Es.version="19.2.3";function av(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(av)}catch(e){console.error(e)}}av(),f0.exports=Es;var lp=f0.exports,D=(e=>(e.CASH="",e.STRINGS="",e.COINS="",e.TEXTS="",e))(D||{}),q=(e=>(e.RED="red",e.GREEN="green",e.BLACK="black",e))(q||{}),B=(e=>(e.ZUN="ZUN",e.JIAN="JIAN",e.BAI="BAI",e.JI="JI",e.QING="QING",e))(B||{}),st=(e=>(e.HUMAN="HUMAN",e.AI="AI",e.NETWORK="NETWORK",e))(st||{}),sn=(e=>(e.GOOGLE="google",e.FACEBOOK="facebook",e.WECHAT="wechat",e.DOUYIN="douyin",e))(sn||{}),Oe=(e=>(e.DEALING="DEALING",e.SHUFFLING="SHUFFLING",e.PLAYING="PLAYING",e.KAI_CHONG="KAI_CHONG",e.SCORING="SCORING",e.GAME_OVER="GAME_OVER",e))(Oe||{}),Ga=(e=>(e.EASY="EASY",e.MEDIUM="MEDIUM",e.HARD="HARD",e))(Ga||{}),ue=(e=>(e.SAFE="SAFE",e.NOTICE="NOTICE",e.WARNING="WARNING",e.PENALTY="PENALTY",e))(ue||{}),be=(e=>(e.ANTI_BANKER="ANTI_BANKER",e.ANTI_BAI_LAO="ANTI_BAI_LAO",e.ANTI_SE_YANG="ANTI_SE_YANG",e))(be||{});const Q=(e,t,n,i,a,o,l)=>({id:l,suit:e,name:t,value:n,color:i,rank:a,description:o}),Ct="c_11",rt="c_10",tn="c_9",gs="c_8",ES="c_1",AS="s_9",NS="s_8",wS="s_6",IS="s_5",RS="s_1",MS="k_9",DS="k_1",kS="t_11",LS="t_10",US="t_9",GS="t_1",HS=`



** (Three Preventions)**
1. ** (Prevent the Banker):** Capture
2. ** (Prevent the Millionaire):** 
3. ** (Prevent Patterns):** 33/4

** (Leading Rules):**
1. **:** 
2. **:** /
3. **:** /
4. **:** 
5. **:** 

Penalty
`,BS=()=>{const e=[];return e.push(Q(D.CASH,"",11,q.RED,B.ZUN,"",Ct)),e.push(Q(D.CASH,"",10,q.RED,B.JIAN,"",rt)),e.push(Q(D.CASH,"",9,q.RED,B.BAI,"",tn)),e.push(Q(D.CASH,"",8,q.BLACK,B.QING,"",gs)),e.push(Q(D.CASH,"",7,q.BLACK,B.QING,"","c_7")),e.push(Q(D.CASH,"",6,q.BLACK,B.QING,"","c_6")),e.push(Q(D.CASH,"",5,q.BLACK,B.QING,"","c_5")),e.push(Q(D.CASH,"",4,q.BLACK,B.QING,"","c_4")),e.push(Q(D.CASH,"",3,q.BLACK,B.QING,"","c_3")),e.push(Q(D.CASH,"",2,q.BLACK,B.QING,"","c_2")),e.push(Q(D.CASH,"",1,q.GREEN,B.JI,"",ES)),e.push(Q(D.STRINGS,"",9,q.RED,B.ZUN,"",AS)),e.push(Q(D.STRINGS,"",8,q.RED,B.JIAN,"",NS)),e.push(Q(D.STRINGS,"",7,q.BLACK,B.QING,"","s_7")),e.push(Q(D.STRINGS,"",6,q.BLACK,B.QING,"",wS)),e.push(Q(D.STRINGS,"",5,q.BLACK,B.QING,"",IS)),e.push(Q(D.STRINGS,"",4,q.BLACK,B.QING,"","s_4")),e.push(Q(D.STRINGS,"",3,q.BLACK,B.QING,"","s_3")),e.push(Q(D.STRINGS,"",2,q.BLACK,B.QING,"","s_2")),e.push(Q(D.STRINGS,"",1,q.GREEN,B.JI,"",RS)),e.push(Q(D.COINS,"",9,q.RED,B.ZUN,"",MS)),e.push(Q(D.COINS,"",8,q.RED,B.JIAN,"","k_8")),e.push(Q(D.COINS,"",7,q.BLACK,B.QING,"","k_7")),e.push(Q(D.COINS,"",6,q.BLACK,B.QING,"","k_6")),e.push(Q(D.COINS,"",5,q.BLACK,B.QING,"","k_5")),e.push(Q(D.COINS,"",4,q.BLACK,B.QING,"","k_4")),e.push(Q(D.COINS,"",3,q.BLACK,B.QING,"","k_3")),e.push(Q(D.COINS,"",2,q.BLACK,B.QING,"","k_2")),e.push(Q(D.COINS,"",1,q.GREEN,B.JI,"",DS)),e.push(Q(D.TEXTS,"",11,q.RED,B.ZUN,"",kS)),e.push(Q(D.TEXTS,"",10,q.RED,B.JIAN,"",LS)),e.push(Q(D.TEXTS,"",9,q.BLACK,B.QING,"",US)),e.push(Q(D.TEXTS,"",8,q.BLACK,B.QING,"","t_8")),e.push(Q(D.TEXTS,"",7,q.BLACK,B.QING,"","t_7")),e.push(Q(D.TEXTS,"",6,q.BLACK,B.QING,"","t_6")),e.push(Q(D.TEXTS,"",5,q.BLACK,B.QING,"","t_5")),e.push(Q(D.TEXTS,"",4,q.BLACK,B.QING,"","t_4")),e.push(Q(D.TEXTS,"",3,q.BLACK,B.QING,"","t_3")),e.push(Q(D.TEXTS,"",2,q.BLACK,B.QING,"","t_2")),e.push(Q(D.TEXTS,"",1,q.GREEN,B.JI,"",GS)),e},mi={en:{title:"MA DIAO MASTER",subtitle:"ANCIENT CHINESE BRIDGE",enterGame:"ENTER GAME",continueGame:"CONTINUE",netBattle:"NET BATTLE",signOut:"SIGN OUT",roundStart:"Hand Start",trick:"Trick",yourTurn:"Your Turn",thinking:"Thinking...",winsTrick:"takes the trick",player:"Player",visibleCards:"Table Cards",diaoPoints:"Diao (Penalty)",kaiZhuPoints:"Open Pot",qiaoMenPoints:"Knock",seYangPoints:"Melds",kaiChongPoints:"Breakout",score:"Score",nextRound:"NEXT DEAL",home:"HOME",patterns:"Melds:",confirm:"CONFIRM",skin_imperial:"Imperial Court",skin_christmas:"Victorian",skin_ming:"Ming Scholar",skin_taoist:"Taoist Void",setting_gameplay:"GAMEPLAY",setting_theme:"VISUAL THEME",setting_graphics:"GRAPHICS",setting_avatars:"3D AVATARS",setting_lang:"LANGUAGE",setting_control:"CONTROL MODE",setting_hints:"STRATEGY HINTS",setting_sound:"SOUND (TTS)",setting_base:"BASE SCORE",act_play:"Play Card",ctx_lead:"Lead",ctx_catch:"Capture",ctx_melt:"Discard",act_deal:"Lead",act_catch:"Take",act_melt:"Disc",dir_north:"North",dir_south:"South",dir_east:"East",dir_west:"West",pat_clouds:"Azure Clouds (Ping Bu Qing Yun)",pat_huang_hui_tu:"Imperial Gathering",pat_qian_jun_zhu:"Iron Pillar",pat_hua_du_dou:"Flower Bodice",pat_hua_bi_jian:"Flower Shoulder",pat_qiao_si_shang:"Smart Four Rewards",pat_qiao_si_jian:"Smart Four Shoulders",pat_tian_di_fen:"Heaven & Earth",pat_jian_tian_di:"Shoulder Heaven & Earth",pat_xiao_tian_di:"Lesser Heaven & Earth",pat_bai_duan_jian:"Million Short Shoulder",pat_bai_chang_jian:"Million Long Shoulder",pat_ji_duan_jian:"Extreme Short Shoulder",pat_ji_chang_jian:"Extreme Long Shoulder",pat_bai_ji_si_shang:"Million Extreme Rewards",pat_bai_ji_si_jian:"Million Extreme Shoulders",pat_bai_shang_si_ji:"Million Reward Extremes",pat_bai_jian_si_ji:"Million Shoulder Extremes",pat_jie_jie_gao:"Rising Step by Step",pat_duan_jian:"Short Shoulder",pat_dui_jian:"Pair Shoulder",pat_chang_jian:"Long Shoulder",pat_shang_ji_yu:"Reward Carp Back",pat_jian_ji_yu:"Shoulder Carp Back",pat_bai_ji_yu:"Million Carp Back",pat_six_table:"Six Trick Diao",pat_seven_table:"Seven Trick Diao",pat_eight_table:"Eight Trick Diao",pat_nei_sheng:"Inner Saint Outer King",pat_tian_ran_qu:"Natural Charm",pat_empress:"Empress Ascension",pat_dragon_leap:"Dragon Leap",pat_buddha_pearl:"Buddha Pearl",pat_flower_goddess:"Flower Goddess",pat_butterfly:"Twin Butterflies",pat_three_stack:"Triple Stack",pat_wind_flag:"Wind Flag",pat_mirror_person:"Mirror Image",pat_beauty_med:"Beauty Meditating",pat_borrow_flower:"Borrow Flower",pat_couple_reunion:"Reunion",pat_fairy_son:"Fairy Gift",pat_fo_chi_jiao:"Barefoot Buddha",aiDisabled:"AI Tutor disabled (No API Key).",masterTitle:"Tutor",masterName:"Ma Diao Master",meditating:"Thinking...",chatPlaceholder:"Ask a rule...",chatPlaceholderDisabled:"AI Disabled",soundOn:"Sound On",soundOff:"Mute",diff_easy:"Novice",diff_medium:"Standard",diff_hard:"Expert",quitGame:"Quit",quitConfirm:"Quit current game? Progress will be lost.",cancel:"Cancel",oneClickPlay:"1-Click",riskAlertOn:"Hints: ON",riskAlertOff:"Hints: OFF",risk_safe:"Safe Play",risk_warning:"Strategy Warning",risk_penalty:"GRAND PENALTY",risk_confirm_penalty:"Accept Penalty & Play",risk_confirm_warning:"Ignore Warning",risk_cancel:"Reconsider",warn_title:"Strategy Alert",warn_cash_lead:'Only the "Millionaire" (Bai Lao) should lead Cash. Leading this risks a Penalty.',warn_zun_early:'Leading a "Reward" (Zun) before the "Shoulder" appears is dangerous.',warn_qing_exhaust:"Do not exhaust your Black (Qing) cards while holding the Extreme (Ji).",warn_qian_wan:'Leading "Qian Wan" is a forbidden move.',warn_continue:"Proceed anyway?",phase_kai_chong:"Breakout Phase",flip_card:"Draw",kc_match_success:"Matched!",kc_match_fail:"No Match",kc_turn_pass:"Pass",kc_skip_ineligible:"Skip (Ineligible)",kc_single:"Single",kc_dan_chong:"Single Match (1pt)",kc_brother:"Brother",kc_double:"Twin",kc_triple:"Triplet",kc_seq:"Sequential",kc_gap:"Gap",tab_summary:"Summary",tab_kai_zhu:"Pot / Knock",tab_se_yang:"Melds",tab_kai_chong:"Breakout",tab_kc_se_yang:"BO Melds",pat_kc_shi_hong:"Ten Red Gathering",pat_kc_man_tang_hong:"Full House Red",pat_kc_10_zui:"Drunken Beauty (10)",pat_kc_9_zui:"Drunken Beauty (9)",pat_kc_8_zui:"Drunken Beauty (8)",pat_kc_ju_qing:"All Same Clan",pat_kc_shi_tong:"Ten of a Kind",pat_kc_jiu_tong:"Nine of a Kind",pat_kc_qian_shi_quan:"Full Cash/Texts",pat_kc_guan_suo_quan:"Full Strings/Coins",pat_kc_tai_ji:"Tai Chi (7+1)",pat_kc_yuan_yang:"Mandarin Duck 7",pat_kc_lian_huan:"Chain 7",pat_kc_one_shot_7:"One Shot 7",pat_kc_one_shot_6:"One Shot 6",pat_kc_yin_hua:"Stamp",pat_kc_jin_jue:"Gold Dig",pat_kc_yin_jue:"Silver Dig",pat_kc_shuang_jue:"Double Dig",pat_kc_duo_jin:"Trophy Snatch"},zh_CN:{title:"",subtitle:"",enterGame:"",continueGame:"",netBattle:"",signOut:"",roundStart:"",trick:"",yourTurn:"",thinking:"...",winsTrick:"",player:"",visibleCards:"",diaoPoints:"",kaiZhuPoints:"",qiaoMenPoints:"",seYangPoints:"",kaiChongPoints:"",score:"",nextRound:"",home:"",patterns:":",confirm:"",skin_imperial:"",skin_christmas:"",skin_ming:"",skin_taoist:"",setting_gameplay:"",setting_theme:"",setting_graphics:"",setting_avatars:"3D ",setting_lang:"",setting_control:"",setting_hints:"",setting_sound:" (TTS)",setting_base:"",act_play:"",ctx_lead:"",ctx_catch:"",ctx_melt:"",act_deal:"",act_catch:"",act_melt:"",dir_north:"",dir_south:"",dir_east:"",dir_west:"",pat_clouds:"",pat_huang_hui_tu:"",pat_qian_jun_zhu:"",pat_hua_du_dou:"",pat_hua_bi_jian:"",pat_qiao_si_shang:"",pat_qiao_si_jian:"",pat_tian_di_fen:"",pat_jian_tian_di:"",pat_xiao_tian_di:"",pat_bai_duan_jian:"",pat_bai_chang_jian:"",pat_ji_duan_jian:"",pat_ji_chang_jian:"",pat_bai_ji_si_shang:"",pat_bai_ji_si_jian:"",pat_bai_shang_si_ji:"",pat_bai_jian_si_ji:"",pat_jie_jie_gao:"",pat_duan_jian:"",pat_dui_jian:"",pat_chang_jian:"",pat_shang_ji_yu:"",pat_jian_ji_yu:"",pat_bai_ji_yu:"",pat_six_table:"",pat_seven_table:"",pat_eight_table:"",pat_nei_sheng:"",pat_tian_ran_qu:"",pat_empress:"",pat_dragon_leap:"",pat_buddha_pearl:"",pat_flower_goddess:"",pat_butterfly:"",pat_three_stack:"",pat_wind_flag:"",pat_mirror_person:"",pat_beauty_med:"",pat_borrow_flower:"",pat_couple_reunion:"",pat_fairy_son:"",pat_fo_chi_jiao:"",aiDisabled:"AI (API Key)",masterTitle:"",masterName:"",meditating:"...",chatPlaceholder:"...",chatPlaceholderDisabled:"AI",soundOn:"",soundOff:"",diff_easy:"",diff_medium:"",diff_hard:"",quitGame:"",quitConfirm:"",cancel:"",oneClickPlay:"",riskAlertOn:": ",riskAlertOff:": ",risk_safe:"",risk_warning:"",risk_penalty:" ()",risk_confirm_penalty:" ()",risk_confirm_warning:"",risk_cancel:"",warn_title:"",warn_cash_lead:"",warn_zun_early:"",warn_qing_exhaust:"",warn_qian_wan:"",warn_continue:"",phase_kai_chong:"",flip_card:"",kc_match_success:"!",kc_match_fail:"",kc_turn_pass:"",kc_skip_ineligible:" (/)",kc_single:"",kc_dan_chong:" (1)",kc_brother:"",kc_double:"",kc_triple:"",kc_seq:"",kc_gap:"",tab_summary:"",tab_kai_zhu:" / ",tab_se_yang:"",tab_kai_chong:"",tab_kc_se_yang:"",pat_kc_shi_hong:"",pat_kc_man_tang_hong:"",pat_kc_10_zui:"",pat_kc_9_zui:"",pat_kc_8_zui:"",pat_kc_ju_qing:"",pat_kc_shi_tong:"",pat_kc_jiu_tong:"",pat_kc_qian_shi_quan:"",pat_kc_guan_suo_quan:"",pat_kc_tai_ji:"",pat_kc_yuan_yang:"",pat_kc_lian_huan:"",pat_kc_one_shot_7:"",pat_kc_one_shot_6:"",pat_kc_yin_hua:"",pat_kc_jin_jue:"",pat_kc_yin_jue:"",pat_kc_shuang_jue:"",pat_kc_duo_jin:""},zh_TW:{title:"",subtitle:"",enterGame:"",continueGame:"",netBattle:"",signOut:"",roundStart:"",trick:"",yourTurn:"",thinking:"...",winsTrick:"",player:"",visibleCards:"",diaoPoints:"",kaiZhuPoints:"",qiaoMenPoints:"",seYangPoints:"",kaiChongPoints:"",score:"",nextRound:"",home:"",patterns:":",confirm:"",skin_imperial:"",skin_christmas:"",skin_ming:"",skin_taoist:"",setting_gameplay:"",setting_theme:"",setting_graphics:"",setting_avatars:"3D ",setting_lang:"",setting_control:"",setting_hints:"",setting_sound:" (TTS)",setting_base:"",act_play:"",ctx_lead:"",ctx_catch:"",ctx_melt:"",act_deal:"",act_catch:"",act_melt:"",dir_north:"",dir_south:"",dir_east:"",dir_west:"",pat_clouds:"",pat_huang_hui_tu:"",pat_qian_jun_zhu:"",pat_hua_du_dou:"",pat_hua_bi_jian:"",pat_qiao_si_shang:"",pat_qiao_si_jian:"",pat_tian_di_fen:"",pat_jian_tian_di:"",pat_xiao_tian_di:"",pat_bai_duan_jian:"",pat_bai_chang_jian:"",pat_ji_duan_jian:"",pat_ji_chang_jian:"",pat_bai_ji_si_shang:"",pat_bai_ji_si_jian:"",pat_bai_shang_si_ji:"",pat_bai_jian_si_ji:"",pat_jie_jie_gao:"",pat_duan_jian:"",pat_dui_jian:"",pat_chang_jian:"",pat_shang_ji_yu:"",pat_jian_ji_yu:"",pat_bai_ji_yu:"",pat_six_table:"",pat_seven_table:"",pat_eight_table:"",pat_nei_sheng:"",pat_tian_ran_qu:"",pat_empress:"",pat_dragon_leap:"",pat_buddha_pearl:"",pat_flower_goddess:"",pat_butterfly:"",pat_three_stack:"",pat_wind_flag:"",pat_mirror_person:"",pat_beauty_med:"",pat_borrow_flower:"",pat_couple_reunion:"",pat_fairy_son:"",pat_fo_chi_jiao:"",aiDisabled:"AI (API Key)",masterTitle:"",masterName:"",meditating:"...",chatPlaceholder:"...",chatPlaceholderDisabled:"AI",soundOn:"",soundOff:"",diff_easy:"",diff_medium:"",diff_hard:"",quitGame:"",quitConfirm:"",cancel:"",oneClickPlay:"",riskAlertOn:": ",riskAlertOff:": ",risk_safe:"",risk_warning:"",risk_penalty:" ()",risk_confirm_penalty:" ()",risk_confirm_warning:"",risk_cancel:"",warn_title:"",warn_cash_lead:"",warn_zun_early:"",warn_qing_exhaust:"",warn_qian_wan:"",warn_continue:"",phase_kai_chong:"",flip_card:"",kc_match_success:"!",kc_match_fail:"",kc_turn_pass:"",kc_skip_ineligible:" (/)",kc_single:"",kc_dan_chong:" (1)",kc_brother:"",kc_double:"",kc_triple:"",kc_seq:"",kc_gap:"",tab_summary:"",tab_kai_zhu:" / ",tab_se_yang:"",tab_kai_chong:"",tab_kc_se_yang:"",pat_kc_shi_hong:"",pat_kc_man_tang_hong:"",pat_kc_10_zui:"",pat_kc_9_zui:"",pat_kc_8_zui:"",pat_kc_ju_qing:"",pat_kc_shi_tong:"",pat_kc_jiu_tong:"",pat_kc_qian_shi_quan:"",pat_kc_guan_suo_quan:"",pat_kc_tai_ji:"",pat_kc_yuan_yang:"",pat_kc_lian_huan:"",pat_kc_one_shot_7:"",pat_kc_one_shot_6:"",pat_kc_yin_hua:"",pat_kc_jin_jue:"",pat_kc_yin_jue:"",pat_kc_shuang_jue:"",pat_kc_duo_jin:""},ja:{title:"",subtitle:"",enterGame:"",continueGame:"",netBattle:"",signOut:"",roundStart:"",trick:"",yourTurn:"",thinking:"...",winsTrick:"",player:"",visibleCards:"",diaoPoints:"",kaiZhuPoints:"",qiaoMenPoints:"",seYangPoints:" (Se Yang)",kaiChongPoints:" ()",score:"",nextRound:"",home:"",patterns:":",confirm:"",skin_imperial:"",skin_christmas:"",skin_ming:"",skin_taoist:"",setting_gameplay:"",setting_theme:"",setting_graphics:"",setting_avatars:"3D",setting_lang:"",setting_control:"",setting_hints:"",setting_sound:" (TTS)",setting_base:"",act_play:"",ctx_lead:" (Lead)",ctx_catch:" (Take)",ctx_melt:" (Discard)",act_deal:"",act_catch:"",act_melt:"",dir_north:"",dir_south:"",dir_east:"",dir_west:"",pat_clouds:"",pat_huang_hui_tu:"",pat_qian_jun_zhu:"",pat_nei_sheng:"",pat_tian_ran_qu:"",pat_empress:"",pat_dragon_leap:"",pat_buddha_pearl:"",pat_flower_goddess:"",pat_butterfly:"",pat_three_stack:"",pat_wind_flag:"",pat_mirror_person:"",pat_beauty_med:"",pat_borrow_flower:"",pat_couple_reunion:"",pat_fairy_son:"",pat_fo_chi_jiao:" ()",aiDisabled:"AI",masterTitle:"",masterName:"",meditating:"...",chatPlaceholder:"...",chatPlaceholderDisabled:"AI",soundOn:"",soundOff:"",diff_easy:"",diff_medium:"",diff_hard:"",quitGame:"",quitConfirm:"",cancel:"",oneClickPlay:"1",riskAlertOn:": ",riskAlertOff:": ",risk_safe:"",risk_warning:"",risk_penalty:" ()",risk_confirm_penalty:" ()",risk_confirm_warning:"",risk_cancel:"",warn_title:"",warn_cash_lead:"",warn_zun_early:"",warn_qing_exhaust:"",warn_qian_wan:"",warn_continue:"",phase_kai_chong:"",flip_card:"",kc_match_success:"!",kc_match_fail:"",kc_turn_pass:"",kc_skip_ineligible:"",kc_single:"",kc_dan_chong:" (1)",kc_brother:"",kc_double:"",kc_triple:"",kc_seq:"",kc_gap:"",tab_summary:"",tab_kai_zhu:" / ",tab_se_yang:"",tab_kai_chong:"",tab_kc_se_yang:"",pat_kc_shi_hong:"",pat_kc_man_tang_hong:"",pat_kc_10_zui:"",pat_kc_9_zui:"",pat_kc_8_zui:"",pat_kc_ju_qing:"",pat_kc_shi_tong:"",pat_kc_jiu_tong:"",pat_kc_qian_shi_quan:"",pat_kc_guan_suo_quan:"",pat_kc_tai_ji:"",pat_kc_yuan_yang:"",pat_kc_lian_huan:"",pat_kc_one_shot_7:"",pat_kc_one_shot_6:"",pat_kc_yin_hua:"",pat_kc_jin_jue:"",pat_kc_yin_jue:"",pat_kc_shuang_jue:"",pat_kc_duo_jin:""},ko:{title:"",subtitle:"   ",enterGame:" ",continueGame:"",netBattle:" ",signOut:"",roundStart:" ",trick:"",yourTurn:" ",thinking:" ...",winsTrick:"",player:"",visibleCards:" ",diaoPoints:"",kaiZhuPoints:"",qiaoMenPoints:"",seYangPoints:" ()",kaiChongPoints:"",score:"",nextRound:" ",home:"",patterns:":",confirm:"",skin_imperial:" ",skin_christmas:"",skin_ming:" ",skin_taoist:" ",setting_gameplay:" ",setting_theme:" ",setting_graphics:" ",setting_avatars:"3D ",setting_lang:"",setting_control:" ",setting_hints:" ",setting_sound:" (TTS)",setting_base:" ",act_play:"",ctx_lead:" (Lead)",ctx_catch:" (Capture)",ctx_melt:" (Discard)",act_deal:"",act_catch:"",act_melt:"",dir_north:"",dir_south:"",dir_east:"",dir_west:"",pat_clouds:"",pat_huang_hui_tu:"",pat_qian_jun_zhu:"",pat_hua_du_dou:"",pat_hua_bi_jian:"",pat_qiao_si_shang:"",pat_qiao_si_jian:"",pat_tian_di_fen:"",pat_jian_tian_di:"",pat_xiao_tian_di:"",pat_bai_duan_jian:"",pat_bai_chang_jian:"",pat_ji_duan_jian:"",pat_ji_chang_jian:"",pat_bai_ji_si_shang:"",pat_bai_ji_si_jian:"",pat_bai_shang_si_ji:"",pat_bai_jian_si_ji:"",pat_jie_jie_gao:"",pat_duan_jian:"",pat_dui_jian:"",pat_chang_jian:"",pat_shang_ji_yu:"",pat_jian_ji_yu:"",pat_bai_ji_yu:"",pat_six_table:"",pat_seven_table:"",pat_eight_table:"",pat_nei_sheng:"",pat_tian_ran_qu:"",pat_empress:"",pat_dragon_leap:"",pat_buddha_pearl:"",pat_flower_goddess:"",pat_butterfly:"",pat_three_stack:"",pat_wind_flag:"",pat_mirror_person:"",pat_beauty_med:"",pat_borrow_flower:"",pat_couple_reunion:"",pat_fairy_son:"",pat_fo_chi_jiao:" ( )",aiDisabled:"AI ",masterTitle:"",masterName:" ",meditating:" ...",chatPlaceholder:" ...",chatPlaceholderDisabled:"AI ",soundOn:" ",soundOff:" ",diff_easy:"",diff_medium:"",diff_hard:"",quitGame:" ",quitConfirm:" ?   .",cancel:"",oneClickPlay:"",riskAlertOn:": ",riskAlertOff:": ",risk_safe:"",risk_warning:" ",risk_penalty:" ()",risk_confirm_penalty:"  ",risk_confirm_warning:" ",risk_cancel:" ",warn_title:" ",warn_cash_lead:'(Bai Wan)  ""  (Cash)    .   .',warn_zun_early:'  "(Shoulder)"    "(Reward/Zun)"     .',warn_qing_exhaust:'"(Extreme/Ji)"   ,   (Black)    .',warn_qian_wan:'"(Qian Wan)"     .',warn_continue:" (  )?",phase_kai_chong:" ",flip_card:"",kc_match_success:" !",kc_match_fail:" ",kc_turn_pass:"",kc_skip_ineligible:"",kc_single:"",kc_dan_chong:" (1)",kc_brother:"",kc_double:"",kc_triple:"",kc_seq:"",kc_gap:"",tab_summary:"",tab_kai_zhu:" / ",tab_se_yang:"",tab_kai_chong:"",tab_kc_se_yang:" ",pat_kc_shi_hong:"",pat_kc_man_tang_hong:"",pat_kc_10_zui:"",pat_kc_9_zui:"",pat_kc_8_zui:"",pat_kc_ju_qing:"",pat_kc_shi_tong:"",pat_kc_jiu_tong:"",pat_kc_qian_shi_quan:"",pat_kc_guan_suo_quan:"",pat_kc_tai_ji:"",pat_kc_yuan_yang:"",pat_kc_lian_huan:"",pat_kc_one_shot_7:"",pat_kc_one_shot_6:"",pat_kc_yin_hua:"",pat_kc_jin_jue:"",pat_kc_yin_jue:"",pat_kc_shuang_jue:"",pat_kc_duo_jin:""}},ov={[D.TEXTS]:{viceShoulderVal:10,viceExtremeVal:1},[D.CASH]:{viceShoulderVal:9,viceExtremeVal:1},[D.STRINGS]:{viceShoulderVal:8,viceExtremeVal:1},[D.COINS]:{viceShoulderVal:8,viceExtremeVal:1}},sp=e=>[11,10,9,1].includes(e),bi=e=>e.color===q.RED||e.color===q.GREEN,Gr=(e,t,n)=>{if(Math.abs(e-t)===1)return!0;if(n===D.CASH||n===D.TEXTS){if(e===11&&t===1||e===1&&t===11)return!0}else if(e===9&&t===1||e===1&&t===9)return!0;return!1},Hr=(e,t)=>{const n=ov[t];if(!n)return!1;const i=Math.min(n.viceExtremeVal,n.viceShoulderVal),a=Math.max(n.viceExtremeVal,n.viceShoulderVal);return t===D.CASH&&e===8?!1:e>i&&e<a},wi=(e,t,n,i)=>{if(e===t||Gr(e,t,n)||n===D.CASH&&(e===9&&t===8||e===8&&t===9))return!0;const a=new Set,o=[e];for(a.add(e);o.length>0;){const l=o.shift();if(Gr(l,t,n)||n===D.CASH&&(l===9&&t===8||l===8&&t===9))return!0;for(const r of i)if(!a.has(r)){let c=Gr(l,r,n);!c&&n===D.CASH&&(l===9&&r===8||l===8&&r===9)&&(c=!0),c&&(a.add(r),o.push(r))}}return!1},Br=(e,t,n)=>{const i=ov[t];return i?!!(n.has(i.viceShoulderVal)&&wi(e,i.viceShoulderVal,t,n)||n.has(i.viceExtremeVal)&&wi(e,i.viceExtremeVal,t,n)||t===D.CASH&&n.has(8)&&wi(e,8,t,n)):!1},PS=(e,t)=>{if(e.suit!==D.CASH)return 1;if(e.value===11){if(t.wanCaughtQian&&t.qianCaughtBai)return 3;if(t.wanCaughtQian||t.wanCaughtBai)return 2}else if(e.value===10&&t.qianCaughtBai)return 2;return 1},rp=(e,t,n,i)=>{const a=new Set;n&&n.forEach(g=>{g.playerId===e.id&&a.add(g.matchedCard.id)});const o=new Set;e.capturedCards.forEach(g=>{g.suit===t.suit&&o.add(g.value)}),o.add(t.value);const l=e.capturedCards.filter(g=>g.suit===t.suit&&!a.has(g.id));if(l.length===0)return null;let r=0;const c=[],d=[];let f=999;if(t.suit===D.CASH&&t.value===8){const g=l.find(b=>b.value===9),_=l.find(b=>b.value===7);if(g&&_)return{score:5,matchType:"JIAN_LING",description:" (5): (2) + (3)",validCards:[g,_],priority:0}}for(const g of l){let _=0,b="",T=PS(g,i);const x=g.value,v=t.value,y=g.suit;if(g.rank===B.JIAN){const S=y===D.CASH||y===D.TEXTS?11:9;if(!o.has(S))continue}if(y===D.CASH){const S=x===8||v===8,E=x<8&&x>1||v<8&&v>1;if(S&&E&&!o.has(9))continue}if(bi(g)&&bi(t))if(y===D.CASH)sp(x)&&sp(v)&&(_=5,b=" (5)");else{const S=g.rank,E=t.rank;(S===B.ZUN||S===B.JI)&&E===B.JIAN?(_=2,b=" (2)"):S===B.JIAN&&(E===B.ZUN||E===B.JI)?E===B.ZUN?(_=3,b=" (3)"):E===B.JI&&(_=2,b=" (2)"):S===B.ZUN&&E===B.JI?(_=3,b=" (3)"):S===B.JI&&E===B.ZUN&&(_=3,b=" (3)")}else if(bi(g)&&!bi(t)){const S=Hr(v,y);let E=!0;S&&!Br(v,y,o)&&(E=!1),E&&(wi(x,v,y,o)?(_=2,b=" (2)"):_=0)}else if(!bi(g)&&bi(t))y===D.CASH&&x===8&&o.has(9)&&(_=3,b=" (3)");else if(wi(x,v,y,o)){let S=!0;const E=Math.max(x,v),A=Math.min(x,v);if(Hr(x,y)||Hr(v,y))if(y===D.CASH){const C=wi(E,8,y,o),R=wi(A,2,y,o);!C&&!R&&(S=!1)}else!Br(E,y,o)&&!Br(A,y,o)&&(S=!1);S&&(_=2,b=" (2)")}if(y===D.COINS&&(x===9&&v===3||x===3&&v===9)&&!o.has(1)&&!o.has(2)&&(_=0),_>0){const S=_*T;r+=S,c.push(g);let E=b;T>1&&(E+=` [x${T}]`),d.push(E);const A=Math.abs(x-v);A<f&&(f=A)}}if(r===0)return null;let m="DAN_CHONG";if(c.length>=3?m="SHUN_LING":c.length===2&&(m="BROTHER"),m==="DAN_CHONG"){const g=c[0],_=g.id===gs;if(!bi(g)&&!_)return null}const h=Array.from(new Set(d));return{score:r,matchType:m,description:`${OS(m)}: ${h.join(", ")}`,validCards:c,priority:f}},OS=e=>({SHUN_LING:"",BROTHER:"",DAN_CHONG:"",JIAN_LING:"",OTHER:""})[e]||e,lv=e=>e.color===q.RED,zS=e=>e.color===q.GREEN,qS=e=>lv(e)||zS(e),VS=e=>({details:[],score:0}),FS=e=>{const t=[];let n=0;const i=e,a=i.filter(l=>lv(l)),o=a.length;if(o>=10){const l=1+(o-10);t.push({name:`Ten Red Gathering (${o})`,score:l,cards:a,category:"KC_SE_YANG"}),n+=l}return o===i.length&&i.length>8&&(t.push({name:"Full House Red",score:3,cards:a,category:"KC_SE_YANG"}),n+=3),{details:t,score:n}},YS=({players:e,potCard:t,lang:n,history:i,currentAttempterId:a,specialCaptures:o})=>{const l=e.find(c=>c.id===a);if(l){const c=rp(l,t,i,o);if(c)return{playerId:a,matchedCard:t,sourceCards:c.validCards,score:c.score,matchType:c.matchType,priorityScore:c.priority,description:c.description}}const r=[1,2,3].map(c=>(a+c)%4);for(const c of r){const d=e.find(f=>f.id===c);if(d){const f=rp(d,t,i,o);if(f)return{playerId:c,matchedCard:t,sourceCards:f.validCards,score:f.score,matchType:f.matchType,priorityScore:f.priority,description:f.description}}}return null},JS=({players:e,bankerId:t,lang:n,kaiChongHistory:i,violationLog:a,baseScore:o})=>{const l=o,r=e.map(h=>({playerId:h.id,trickCount:0,diaoRawValue:0,diaoPointChange:0,kaiZhuPointChange:0,qiaoMenPointChange:0,seYangPointChange:0,kaiChongPointChange:0,kcSeYangPointChange:0,totalRoundChange:0,netScore:0,patternDetails:[],kaiChongDetails:[],cardsWonCount:0,visibleTrickCards:[],allCapturedCards:[],violations:a.filter(g=>g.playerId===h.id&&g.riskLevel==="PENALTY"),penaltyReason:void 0,patterns:[],scoringCards:[]}));r.forEach(h=>{const g=e.find(C=>C.id===h.playerId),_=i.filter(C=>C.playerId===g.id),b=new Set(_.map(C=>C.matchedCard.id)),T=g.capturedCards.filter(C=>!b.has(C.id)),x=g.trickPile.filter(C=>C.round<=8&&!C.isKaiChong).length;h.trickCount=x,h.cardsWonCount=T.length,h.allCapturedCards=g.capturedCards,h.visibleTrickCards=g.trickPile.filter(C=>C.isFaceUp).map(C=>C.card),h.kaiChongDetails=_.map(C=>({...C,score:C.score*l}));let v=0;h.kaiChongDetails.forEach(C=>v+=C.score),h.kaiChongPointChange=v;const{details:y,score:S}=VS();h.seYangPointChange=S*l,h.patternDetails.push(...y.map(C=>({...C,score:C.score*l})));const{details:E,score:A}=FS(g.capturedCards);h.kcSeYangPointChange=A*l,h.patternDetails.push(...E.map(C=>({...C,score:C.score*l}))),h.patterns=h.patternDetails.map(C=>C.name),h.scoringCards=g.capturedCards.filter(C=>qS(C))});const d=r.map(h=>h.trickCount).sort((h,g)=>h-g).join("")==="0233";r.forEach(h=>{h.trickCount<2?h.diaoRawValue=-1:h.trickCount===2?h.diaoRawValue=0:h.diaoRawValue=d&&h.trickCount===3?.5:1});const f=r.find(h=>h.playerId===t);r.forEach(h=>{if(h.playerId!==t){const g=(h.diaoRawValue-f.diaoRawValue)*l;h.diaoPointChange=g}});const m=r.reduce((h,g)=>g.playerId!==t?h+g.diaoPointChange:h,0);return f.diaoPointChange=-m,r.forEach(h=>{h.totalRoundChange=h.diaoPointChange+h.kaiZhuPointChange+h.qiaoMenPointChange+h.seYangPointChange+h.kaiChongPointChange+h.kcSeYangPointChange}),r};var Ne=(e=>(e.LOU_ZHUANG="LOU_ZHUANG",e.ZONG_ZHUANG="ZONG_ZHUANG",e.JI_ZHUO="JI_ZHUO",e.LEAD_QIAN_WAN="LEAD_QIAN_WAN",e.ZONG_QU_GAME="ZONG_QU",e.FANG_GONG_QIAN="FANG_GONG_QIAN",e.LOU_ZHUANG_FAIL="LOU_ZHUANG_FAIL",e.DAO_LI="DAO_LI",e.BU_LI_WAN="BU_LI_WAN",e.BU_LI_SHANG="BU_LI_SHANG",e.DAO_LI_QIAN_HONG="DAO_LI_QIAN_HONG",e.TI_JIN_QIAN_WANG="TI_JIN_QIAN_WANG",e.WO_DI_BAI_LAO="WO_DI_BAI_LAO",e.WU_SHANG_BAO_BAI="WU_SHANG_BAO_BAI",e.BU_BAO_BAI="BU_BAO_BAI",e.QIAN_SENG_WO_DI="QIAN_SENG_WO_DI",e.JIN_MEN_CI_XU="JIN_MEN_CI_XU",e.WU_ZHUO_TI_WAN="WU_ZHUO_TI_WAN",e.CHUANG_QIAN="CHUANG_QIAN",e))(Ne||{});const sv=e=>e.color===q.GREEN,up=(e,t,n,i,a)=>{const o=new Set;if(t.forEach(r=>o.add(r.id)),n.forEach(r=>o.add(r.id)),i.forEach(r=>o.add(r.card.id)),a){const r=a.rank===B.QING,c=a.id===gs;r&&!c&&o.add(a.id)}const l=e.suit===D.CASH||e.suit===D.TEXTS?11:9;for(let r=e.value+1;r<=l;r++)if(!(t.some(d=>d.suit===e.suit&&d.value===r)||n.some(d=>d.suit===e.suit&&d.value===r)||i.some(d=>d.card.suit===e.suit&&d.card.value===r)||a&&a.suit===e.suit&&a.value===r&&a.rank===B.QING&&a.id!==gs))return!1;return!0},KS=e=>e.suit===D.TEXTS?e.value>=7:e.value>=6,$S=(e,t,n)=>e.filter(i=>i.suit===t.suit&&i.value>t.value),jS=(e,t)=>{if((e.capturedCards?e.capturedCards.length:0)>0)return null;const i=e.hand,a=i.some(c=>c.id===Ct),o=i.some(c=>c.id===rt),l=i.some(c=>c.id===tn);if(a&&o&&l&&i.length>1&&t.id===rt)return{riskLevel:ue.PENALTY,ruleId:Ne.TI_JIN_QIAN_WANG,message:">1",tacticalContext:be.ANTI_BANKER};if(a&&o&&!l)return t.id===rt?{riskLevel:ue.PENALTY,ruleId:Ne.DAO_LI_QIAN_HONG,message:"",tacticalContext:be.ANTI_BANKER}:t.id!==Ct?{riskLevel:ue.PENALTY,ruleId:Ne.BU_LI_WAN,message:"",tacticalContext:be.ANTI_BANKER}:null;const r=[D.CASH,D.STRINGS,D.COINS,D.TEXTS];for(const c of r){const d=i.filter(h=>h.suit===c),f=d.find(h=>h.rank===B.ZUN),m=d.find(h=>h.rank===B.JIAN);if(f&&m){const h=t.id===f.id||t.id===m.id,g=d.some(_=>_.id===t.id&&(Math.abs(_.value-f.value)===1||Math.abs(_.value-m.value)===1));if(t.suit!==c)return{riskLevel:ue.PENALTY,ruleId:Ne.BU_LI_SHANG,message:"",tacticalContext:be.ANTI_BANKER};if(!h&&!g)return{riskLevel:ue.PENALTY,ruleId:Ne.BU_LI_SHANG,message:"",tacticalContext:be.ANTI_BANKER}}}return null},XS=(e,t,n)=>{if(e.isDealer)return null;const i=e.hand;if(!i.some(f=>f.id===tn))return null;const o=n.filter(f=>f.suit!==D.CASH);if(!(o.length>0))return null;const r=n.some(f=>f.isBanker);if(r&&t.suit===D.CASH)return{riskLevel:ue.PENALTY,ruleId:Ne.WO_DI_BAI_LAO,message:"",tacticalContext:be.ANTI_BAI_LAO};const c=new Set(o.map(f=>f.suit));if(c.size>=2&&t.suit===D.CASH)return{riskLevel:ue.PENALTY,ruleId:Ne.WO_DI_BAI_LAO,message:"",tacticalContext:be.ANTI_BAI_LAO};const d=i.some(f=>f.rank===B.ZUN);return!d&&t.suit===D.CASH?{riskLevel:ue.PENALTY,ruleId:Ne.WU_SHANG_BAO_BAI,message:"",tacticalContext:be.ANTI_BAI_LAO}:!r&&c.size<2&&d&&t.suit!==D.CASH?{riskLevel:ue.PENALTY,ruleId:Ne.BU_BAO_BAI,message:"",tacticalContext:be.ANTI_BAI_LAO}:null},QS=(e,t,n)=>{if(e.isDealer)return null;const i=e.hand,a=new Set(n.filter(f=>f.suit!==D.CASH).map(f=>f.suit)),o=i.filter(f=>f.suit!==D.CASH&&!a.has(f.suit)),l=i.some(f=>f.id===tn),r=i.some(f=>f.id===Ct),c=i.some(f=>f.id===rt),d=n.some(f=>f.suit===D.CASH&&f.isBanker);return r&&c&&!l&&t.id===Ct?null:!d&&!r&&!c&&l&&i.some(m=>m.suit===D.CASH&&m.rank===B.QING&&m.value>4)&&t.id!==tn?{riskLevel:ue.PENALTY,ruleId:Ne.QIAN_SENG_WO_DI,message:"",tacticalContext:be.ANTI_BANKER}:o.length>0&&t.suit===D.CASH?{riskLevel:ue.PENALTY,ruleId:Ne.JIN_MEN_CI_XU,message:"/",tacticalContext:be.ANTI_BANKER}:null},WS=(e,t,n)=>{if(e.isDealer)return null;const i=e.hand,a=i.length,o=i.some(f=>f.id===Ct),l=i.some(f=>f.id===rt),r=i.some(f=>f.id===tn);if([Ct,rt,tn].includes(t.id)&&a===4)return{riskLevel:ue.PENALTY,ruleId:Ne.WU_ZHUO_TI_WAN,message:"4",tacticalContext:be.ANTI_BANKER};const d=n.some(f=>f.suit===D.CASH&&f.leaderId===e.id);if(o&&l&&a>1){if(r&&t.id===Ct)return{riskLevel:ue.PENALTY,ruleId:Ne.TI_JIN_QIAN_WANG,message:"",tacticalContext:be.ANTI_BANKER};if(!r){if(d&&t.id===rt)return{riskLevel:ue.PENALTY,ruleId:Ne.TI_JIN_QIAN_WANG,message:"",tacticalContext:be.ANTI_BANKER};if(!d&&t.id===rt)return{riskLevel:ue.PENALTY,ruleId:Ne.DAO_LI_QIAN_HONG,message:"",tacticalContext:be.ANTI_BANKER}}}if(l&&!r&&a>1){if(!o&&t.id===rt)return{riskLevel:ue.PENALTY,ruleId:Ne.CHUANG_QIAN,message:"",tacticalContext:be.ANTI_BANKER};if(o&&t.id===rt&&d)return{riskLevel:ue.PENALTY,ruleId:Ne.CHUANG_QIAN,message:"",tacticalContext:be.ANTI_BANKER}}return null},ZS=(e,t,n,i,a,o,l,r,c)=>{const d=e.id===o,f=e.hand;if(!d&&a.length>0){const m=f.filter(y=>y.suit===n.suit&&y.value>n.value).sort((y,S)=>S.value-y.value),h=m.length>0,g=n.suit===D.CASH,_=e.capturedCards?e.capturedCards.length:0,b=f.some(y=>y.id===Ct||y.id===rt),T=f.filter(y=>y.suit!==D.CASH&&y.rank===B.ZUN).length,x=!g&&_===0&&b&&T<2,v=a.some(y=>y.playerId===o);if(h){const y=t.suit===n.suit&&t.value>n.value;if(v){if(i!==o&&y){if(n.suit===D.CASH&&t.suit===D.CASH){const E=n.value===9||n.value===10,A=t.value===10||t.value===11;if(E&&A)return null}if(!sv(n))return{riskLevel:ue.PENALTY,ruleId:Ne.JI_ZHUO,message:"",tacticalContext:be.ANTI_SE_YANG}}}else if(x){const S=up(t,f,l,a,c),E=t.id===m[0].id,C=$S(f,n).some(R=>R.id===t.id);return y?null:{riskLevel:ue.PENALTY,ruleId:Ne.LOU_ZHUANG,message:"",tacticalContext:be.ANTI_BANKER}}else if(!y){const S=up(t,f,l,a,c),E=t.id===m[0].id;if(S||E)return{riskLevel:ue.PENALTY,ruleId:Ne.LOU_ZHUANG_FAIL,message:"",tacticalContext:be.ANTI_BANKER}}}}return null},eb=(e,t,n,i,a)=>sv(n)&&e.hand.some(o=>o.suit===n.suit&&o.value>n.value)&&!(t.suit===n.suit&&t.value>n.value)?{riskLevel:ue.PENALTY,ruleId:Ne.ZONG_QU_GAME,message:"",tacticalContext:be.ANTI_SE_YANG}:n.id===rt&&e.hand.some(o=>o.id===Ct)&&t.id!==Ct?{riskLevel:ue.PENALTY,ruleId:Ne.FANG_GONG_QIAN,message:"",tacticalContext:be.ANTI_BANKER}:null,rv=(e,t,n,i,a,o,l=[],r=null,c=1,d=null,f=null)=>{if(n.length===0){const v=jS(e,t);if(v)return v;const y=XS(e,t,l);if(y)return y;const S=QS(e,t,l);if(S)return S;const E=WS(e,t,l);return E||(t.id===rt&&e.hand.length===8&&!e.isDealer?{riskLevel:ue.PENALTY,ruleId:Ne.LEAD_QIAN_WAN,message:"",tacticalContext:be.ANTI_BANKER}:null)}const m=n[0].card.suit;let h=n[0].card,g=n[0].playerId,_=h.value;n.forEach(v=>{v.card.suit===m&&v.card.value>_&&(_=v.card.value,h=v.card,g=v.playerId)});const b=eb(e,t,h);if(b)return b;const T=ZS(e,t,h,g,n,i,o,r,d);return T||(e.hand.some(v=>v.suit===h.suit&&v.value>h.value)&&g===i&&!e.isDealer&&!(t.suit===h.suit&&t.value>h.value)&&(KS(h)||n.length===3)?{riskLevel:ue.PENALTY,ruleId:Ne.ZONG_ZHUANG,message:"",tacticalContext:be.ANTI_BANKER}:{riskLevel:ue.SAFE,ruleId:"SAFE",message:"",tacticalContext:be.ANTI_BANKER})},tb=(e,t,n,i,a,o,l,r)=>{if(t.suit===D.CASH){if(l.has(Ct)&&l.has(rt)&&l.has(tn))return"SAFE";const _=e.hand.some(b=>b.id===tn);return e.isDealer?_?"SAFE":"FORBIDDEN":_&&r&&r.id!==Ct?"SAFE":"FORBIDDEN"}const c=i.filter(g=>g.suit!==D.CASH),d=new Set;c.forEach(g=>{g.isBanker||d.add(g.suit)});let f=null,m=!1;const h=c.find(g=>g.isBanker);if(h)for(const g of c){if(g.suit===h.suit&&g.isBanker){f=g.suit,m=!0;break}g.isBanker}if(!m){const g=Array.from(d);if(g.length>=2){const _=[D.STRINGS,D.COINS,D.TEXTS],b=new Set([g[0],g[1]]),T=_.find(x=>!b.has(x));T&&(f=T)}}return f&&t.suit===f?"FORBIDDEN":"SAFE"},nb=(e,t,n,i,a,o)=>e.hand,ib={playerId:-1,gamesPlayed:0,winRate:0,aggression:.5,riskTolerance:.3,bluffFrequency:.1,lastRole:"PEASANT",lastResult:"DRAW"},ab="ma_diao_ai_memory_v2_zh",cp=()=>{try{const e=localStorage.getItem(ab);if(e)return JSON.parse(e)}catch(e){console.warn("AI",e)}return{}},cd=(e,t)=>t.aiLearningStates&&t.aiLearningStates[e]?t.aiLearningStates[e]:{...ib,playerId:e},ob=(e,t,n,i)=>{const a={...e};a.gamesPlayed+=1,a.lastRole=n?"BANKER":"PEASANT";const o=t.totalRoundChange>0;a.lastResult=o?"WIN":t.totalRoundChange<0?"LOSS":"DRAW";const l=a.winRate*(a.gamesPlayed-1);if(a.winRate=(l+(o?1:0))/a.gamesPlayed,t.violations&&t.violations.length>0){a.riskTolerance=Math.max(.05,a.riskTolerance-.25);const c=t.violations.some(f=>f.ruleId.includes("JI_ZHUO")||f.ruleId==="JIN_MEN_CI_XU"||f.ruleId==="CHUANG_QIAN"),d=t.violations.some(f=>f.ruleId==="LOU_ZHUANG"||f.ruleId==="ZONG_ZHUANG"||f.ruleId==="ZONG_QU");return c&&(a.aggression=Math.max(.1,a.aggression-.2)),d&&(a.bluffFrequency=Math.max(0,a.bluffFrequency-.1)),a}const r=.05;return o?(a.aggression>.5?a.aggression=Math.min(1,a.aggression+r):a.aggression=Math.max(0,a.aggression-r),a.riskTolerance>.4&&(a.riskTolerance=Math.min(.9,a.riskTolerance+r))):(a.aggression>.6?a.aggression-=r*2:a.aggression<.4&&(a.aggression+=r*2),a.riskTolerance=Math.max(.1,a.riskTolerance-r)),i===Ga.HARD?(a.riskTolerance=Math.max(.2,a.riskTolerance),a.aggression=Math.max(.3,a.aggression)):i===Ga.EASY&&(a.riskTolerance=Math.min(.8,Math.max(.5,a.riskTolerance))),a};let ke=null;const Yu="ma_diao_supabase_url",Ju="ma_diao_supabase_key",dd="match_logs",Vs="profiles",uv="friendships",fd="ma_diao_mock_user",Sa="ma_diao_mock_profile",vs="ma_diao_mock_friends",ln=(e,t)=>Array.from({length:t-e+1},(n,i)=>e+i),lb={EAST_ASIA:{regionName:"East Asia",countries:["cn","jp","kr","hk","tw","sg","vn"],names:["Wei","Jie","Ming","Hao","Yi","Long","Chen","Ken","Ryu","Hiro","Satoshi","Takumi","Min-Ho","Ji-Sung","Soo","Jin"],titles:["The Scholar","Master","Sifu","Ronin","Poet","Hand","Fox","Dragon"],maleIds:[...ln(0,10),...ln(60,65)],femaleIds:[...ln(0,10),...ln(60,65)]},WESTERN:{regionName:"Western",countries:["us","gb","fr","de","it","ru","au","ca"],names:["John","Arthur","William","James","Leo","Oliver","Harry","Alice","Rose","Clara","Emma","Sofia","Charlotte"],titles:["The Duke","Knight","Ace","Gambler","Baron","Duchess","Queen"],maleIds:[...ln(11,40)],femaleIds:[...ln(11,40)]},GLOBAL_SOUTH:{regionName:"Global South",countries:["br","mx","in","za","ng","eg","th","ph","sa"],names:["Mateo","Diego","Ravi","Arjun","Malik","Omar","Amir","Luna","Camila","Priya","Zara","Nia","Fatima"],titles:["Traveler","Merchant","Guide","Mystic","Wanderer","Sheikh","Raja"],maleIds:[...ln(41,59),...ln(66,78)],femaleIds:[...ln(41,59),...ln(66,78)]}},pd=e=>{let t=e;if(!t){const _=Math.random();_<.5?t="EAST_ASIA":_<.8?t="WESTERN":t="GLOBAL_SOUTH"}const n=lb[t],i=Math.random()>.5,a=i?"FEMALE":"MALE",o=n.names[Math.floor(Math.random()*n.names.length)],l=n.titles[Math.floor(Math.random()*n.titles.length)],r=n.countries[Math.floor(Math.random()*n.countries.length)],c=i?n.femaleIds:n.maleIds,d=c.length>0?c[Math.floor(Math.random()*c.length)]:Math.floor(Math.random()*50),m=`https://xsgames.co/randomusers/assets/avatars/${i?"female":"male"}/${d}.jpg`,h=Math.random();let g="CENTER";return h<.35?g="LEFT":h<.7&&(g="RIGHT"),{id:`ai_${Date.now()}_${Math.random().toString(36).substring(7)}`,username:`${o} ${l}`,gender:a,age:18+Math.floor(Math.random()*45),country:r,gazeDirection:g,is_looking_for_match:!0,last_active:Date.now(),friends:[],avatar_url:m,location:{lat:30+Math.random()*10,lng:110+Math.random()*20}}},cv=Array.from({length:20}).map(()=>pd()),dv=(e,t)=>{let n=e||localStorage.getItem(Yu),i=t||localStorage.getItem(Ju);if(n&&i)try{const a=window.supabase;if(a&&a.createClient)return ke=a.createClient(n,i),e&&localStorage.setItem(Yu,e),t&&localStorage.setItem(Ju,t),console.log("Cloud Service (MemFire/Supabase) initialized."),!0}catch(a){console.error("Failed to init Cloud",a)}return!1},fv=()=>({url:localStorage.getItem(Yu)||"",key:localStorage.getItem(Ju)||""}),Zo=async()=>{if(ke){const{data:{user:t}}=await ke.auth.getUser();if(t)return t}const e=localStorage.getItem(fd);return e?JSON.parse(e):null},sb=async e=>{if(!ke)return{error:"CLOUD_NOT_CONFIGURED"};try{const{data:t,error:n}=await ke.auth.signInWithOAuth({provider:e,options:{redirectTo:window.location.origin}});return{data:t,error:n}}catch(t){return{error:t}}},rb=async e=>{const t={id:`guest_${Date.now()}_${Math.floor(Math.random()*1e3)}`,email:`${e}_guest@jianghu.com`,app_metadata:{provider:e},user_metadata:{},aud:"authenticated",created_at:new Date().toISOString()};localStorage.setItem(fd,JSON.stringify(t));const n=pd("EAST_ASIA"),a={...{...n,username:`Guest ${n.username.split(" ")[0]}`},id:t.id,is_looking_for_match:!0,last_active:Date.now(),updated_at:new Date,friends:[]};return localStorage.setItem(Sa,JSON.stringify(a)),{user:t,error:null}},ub=async()=>{ke&&await ke.auth.signOut(),localStorage.removeItem(fd)},Fs=e=>e.startsWith("guest_"),cb=async e=>{const t=await Zo();if(!t)return null;const n={id:t.id,username:e.username||t.email?.split("@")[0]||"Wanderer",avatar_url:e.avatar_url,gender:e.gender,age:e.age,country:e.country||"cn",location:e.location,is_looking_for_match:e.is_looking_for_match,last_active:Date.now(),updated_at:new Date,friends:[]};if(Fs(t.id)){const a={...JSON.parse(localStorage.getItem(Sa)||"{}"),...n,...e};return localStorage.setItem(Sa,JSON.stringify(a)),a}else if(ke){const{friends:i,...a}=n,{error:o}=await ke.from(Vs).upsert(a);return o&&localStorage.setItem(Sa,JSON.stringify(n)),n}return null},dp=async e=>{let t=e;if(!t){const i=await Zo();if(!i)return null;t=i.id}if(!t||typeof t!="string")return null;if(Fs(t)){const i=localStorage.getItem(Sa);if(i){const a=JSON.parse(i),o=JSON.parse(localStorage.getItem(vs)||"[]");return{...a,friends:o}}return null}if(ke){const{data:i,error:a}=await ke.from(Vs).select("*").eq("id",t).single();if(!a&&i)return i}const n=localStorage.getItem(Sa);return n?JSON.parse(n):null},fp=async e=>{let t=[];if(ke){const a=Date.now()-3e5,{data:o}=await ke.from(Vs).select("*").neq("id",e.id).eq("is_looking_for_match",!0).gt("last_active",a).limit(20);o&&(t=o)}const n=Array.from({length:5}).map(()=>pd(Math.random()>.3?"EAST_ASIA":void 0));return t=[...t,...n],t.map(a=>{let o=0;return e.gender!=="OTHER"&&a.gender!=="OTHER"&&e.gender!==a.gender&&(o+=50),Math.abs(e.age-a.age)<=5&&(o+=20),{profile:a,score:o}}).sort((a,o)=>o.score-a.score).map(a=>a.profile)},db=async e=>{const t=await Zo();if(!t)return!1;if(Fs(t.id)){const n=JSON.parse(localStorage.getItem(vs)||"[]");return n.includes(e)||(n.push(e),localStorage.setItem(vs,JSON.stringify(n))),!0}if(ke){const{error:n}=await ke.from(uv).insert([{user_id_1:t.id,user_id_2:e,status:"accepted"}]);return!n}return!1},pv=async()=>{const e=await Zo();if(!e)return[];if(Fs(e.id)){const t=JSON.parse(localStorage.getItem(vs)||"[]");return cv.slice(0,t.length)}if(ke){const{data:t}=await ke.from(uv).select("*").or(`user_id_1.eq.${e.id},user_id_2.eq.${e.id}`);if(t){const n=t.map(a=>a.user_id_1===e.id?a.user_id_2:a.user_id_1),{data:i}=await ke.from(Vs).select("*").in("id",n);return i||[]}}return[]},fb=async e=>{ke&&e.matchLogs.length>0&&ke.from(dd).upsert({id:e.matchLogs[0].id,timestamp:e.matchLogs[0].timestamp,data:e.matchLogs[0]}).then()},pb=async()=>{if(!ke)return[];const{data:e}=await ke.from(dd).select("*").order("timestamp",{ascending:!1}).limit(50);return e||[]},hb=async e=>{if(!ke)return!1;const{error:t}=await ke.from(dd).delete().eq("id",e);return!t},hv="ma_diao_stats_v1";try{const e=fv();e.url&&e.key&&dv(e.url,e.key)}catch(e){console.warn("Failed to auto-init cloud service:",e)}const mb=()=>{const e={totalRounds:0,bankerWins:0,peasantWins:0,lastRoundWinnerType:"DRAW",aggressionModifier:0,aiLearningStates:cp(),matchLogs:[]};try{const t=localStorage.getItem(hv);if(t){const n=JSON.parse(t);return{...e,...n,matchLogs:n.matchLogs||[],aiLearningStates:cp()}}}catch(t){console.error("Failed to load stats",t)}return e},gb=e=>{try{const{aiLearningStates:t,...n}=e;localStorage.setItem(hv,JSON.stringify(n)),fb(e)}catch(t){console.error("Failed to save stats",t)}};function mv(e){const t=[...e];for(let n=t.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[t[n],t[i]]=[t[i],t[n]]}return t}const vl=e=>{const t=n=>{switch(n){case D.CASH:return 4;case D.STRINGS:return 3;case D.COINS:return 2;case D.TEXTS:return 1;default:return 0}};return[...e].sort((n,i)=>{const a=t(n.suit),o=t(i.suit);return a!==o?o-a:i.value-n.value})},vb=()=>{const e=BS();return mv(e)},yb=e=>{const[t,n]=I.useState([]),[i,a]=I.useState([]),[o,l]=I.useState([]),[r,c]=I.useState([]),[d,f]=I.useState(0),[m,h]=I.useState(Oe.DEALING),[g,_]=I.useState(3),[b,T]=I.useState([]),[x,v]=I.useState(1),[y,S]=I.useState(""),[E,A]=I.useState([]),[C,R]=I.useState(new Set),[N,M]=I.useState([]),[L,O]=I.useState([]),[z,$]=I.useState(null),[G,w]=I.useState(null),[U,P]=I.useState(()=>mb()),[ge,ve]=I.useState({wanCaughtQian:!1,wanCaughtBai:!1,qianCaughtBai:!1}),[mn,mt]=I.useState(null),[gt,vt]=I.useState(0),[V,Re]=I.useState([]),[X,Ge]=I.useState(null),[Xe,He]=I.useState(null),[tt,yt]=I.useState(null),[Ht,Bt]=I.useState(null),[on,_i]=I.useState(null),On=(le,fe,ae)=>{_i({type:le,playerId:fe,context:ae,timestamp:Date.now()})},Ty=le=>{le&&e.playSound("WOOD"),He(le)},Ed=()=>{c([]),l([]),Ge(null),T([]),v(1),A([]),R(new Set),O([]),M([]),S(""),Re([]),vt(0),ve({wanCaughtQian:!1,wanCaughtBai:!1,qianCaughtBai:!1}),He(null),yt(null),Bt(null),$(null),w(null)},Ad=(le,fe)=>{e.playSound("PAPER"),h(Oe.SHUFFLING),Ed(),setTimeout(()=>{const ae=vb();n(ae);const pe=[vl(ae.slice(0,8)),vl(ae.slice(8,16)),vl(ae.slice(16,24)),vl(ae.slice(24,32))],W=ae.slice(32,39).map(Me=>({...Me,isPot:!0})),Z={...ae[39],isPot:!0};let se=[],F=0;const Ce=1e3;if(fe&&fe.length===4)F=(fe.findIndex(Me=>Me.isDealer)+1)%4,se=fe.map((Me,gn)=>({...Me,hand:pe[gn],trickPile:[],capturedCards:[],isDealer:Me.id===F,isBaiLaoRevealed:!1,isSuspectedBaiLao:!1}));else{const Me=mv([...cv]),gn=Ki=>{const Rd=Me.findIndex(Ws=>Ws.gazeDirection===Ki);if(Rd!==-1){const[Ws]=Me.splice(Rd,1);return Ws}return null},ja=gn("LEFT")||gn("CENTER")||Me.pop(),xe=gn("RIGHT")||gn("CENTER")||Me.pop(),Ue=gn("CENTER")||Me.pop(),xi=Ki=>({id:`bot_${Math.random().toString(36).substring(7)}`,username:Ki,gender:"OTHER",age:30,country:"cn",is_looking_for_match:!1,last_active:Date.now(),friends:[],gazeDirection:"CENTER"}),zn=ja||xi("Bot 1"),el=Ue||xi("Bot 2"),Id=xe||xi("Bot 3");se=[{id:0,name:le?.username||"You",type:st.HUMAN,hand:pe[0],trickPile:[],capturedCards:[],isDealer:!1,position:"Bottom",score:Ce,profile:le},{id:1,name:zn.username,type:st.AI,hand:pe[1],trickPile:[],capturedCards:[],isDealer:!1,position:"Right",score:Ce,profile:zn},{id:2,name:el.username,type:st.AI,hand:pe[2],trickPile:[],capturedCards:[],isDealer:!1,position:"Top",score:Ce,profile:el},{id:3,name:Id.username,type:st.AI,hand:pe[3],trickPile:[],capturedCards:[],isDealer:!1,position:"Left",score:Ce,profile:Id}],F=Math.floor(Math.random()*4),se.forEach(Ki=>Ki.isDealer=Ki.id===F)}a(se),l(W),Ge(Z),_(F);const ee=(Z.value-1)%4,Ke=(F+ee)%4;f(Ke),h(Oe.PLAYING),S(Ke===0?"You Lead First":`Player ${Ke} Leads`),setTimeout(()=>S(""),5e3),On("GAME_START",Ke),e.playSound("DRUM")},2e3)},Cy=()=>{Ad(void 0,i)},Ey=()=>{h(Oe.DEALING),a([]),Ed()},Nd=le=>{f(le)},wd=(le,fe)=>{if(!le||le.length===0)return;const ae=le[0].card.suit;let pe=le[0].playerId,W=-1,Z=null;if(le.forEach(F=>{!F.isFaceDown&&F.card.suit===ae&&F.card.value>W&&(W=F.card.value,pe=F.playerId,Z=F.card)}),Z||(pe=le[0].playerId,Z=le[0].card),mt(pe),Z.suit===D.CASH){const F=Z.value,Ce=le.some(Ke=>Ke.card.id===rt),ee=le.some(Ke=>Ke.card.id===tn);ve(Ke=>{const Me={...Ke};return F===11?(Ce&&(Me.wanCaughtQian=!0),ee&&(Me.wanCaughtBai=!0)):F===10&&ee&&(Me.qianCaughtBai=!0),Me})}const se=Z.rank===B.ZUN||Z.rank===B.BAI;se&&e.playSound("CHIME"),On("TRICK_WIN",pe,{isBig:se}),setTimeout(()=>{mt(null),c([]);const F=fe.map(Ce=>{let ee=[...Ce.trickPile],Ke=[...Ce.capturedCards];return Ce.id===pe&&Z&&(ee.push({card:Z,isFaceUp:!0,round:x}),Ke.push(Z)),{...Ce,trickPile:ee,capturedCards:Ke}});a(F),x===8?(h(Oe.KAI_CHONG),S("Kai Chong Phase"),vt(0),f(pe),e.playSound("DRUM")):(v(x+1),Nd(pe))},1500)},Ay=async(le,fe,ae=!1)=>{const pe=i.find(xe=>xe.id===le);if(!pe)return;const W=pe.hand.find(xe=>xe.id===fe);if(!W)return;const Z=r.map(xe=>({card:xe.card,playerId:xe.playerId}));if(le===0&&e.isRiskAlertOn&&!ae){const xe=rv(pe,W,Z,g,i,E,L,z,x,X,G);if(xe&&xe.riskLevel!==ue.SAFE){yt({cardId:fe,assessment:xe}),e.playSound("WOOD");return}}yt(null),S(""),e.playSound("STONE");const se=r.length>0?r[0].card.suit:null;let F=!1;if(se)if(W.suit!==se)F=!0;else{let xe=-1;r.forEach(Ue=>{!Ue.isFaceDown&&Ue.card.suit===se&&Ue.card.value>xe&&(xe=Ue.card.value)}),W.value<=xe&&(F=!0)}x===8&&(!pe.capturedCards||pe.capturedCards.length===0)&&(F=!0),F||R(xe=>{const Ue=new Set(xe);return Ue.add(W.id),Ue});const Ce=W.id===tn,ee=W.id===Ct,Ke=r.length===0&&W.suit===D.CASH,Me=Ce&&!F,gn=i.some(xe=>xe.isBaiLaoRevealed);a(xe=>xe.map(Ue=>{if(Ue.id===le){const xi=Ue.hand.filter(el=>el.id!==fe);let zn={...Ue,hand:xi};return Me?(zn.isBaiLaoRevealed=!0,zn.isSuspectedBaiLao=!1):gn||Ke&&!ee&&!F&&(zn.isSuspectedBaiLao||(zn.isSuspectedBaiLao=!0)),zn}return Ue}));const ja=[...r,{playerId:le,card:W,isFaceDown:F}];if(c(ja),A(xe=>[...xe,W]),r.length===0&&($({card:W,playerId:le}),le===g&&!G&&w(W),L.some(Ue=>Ue.suit===W.suit)||O(Ue=>[...Ue,{suit:W.suit,leaderId:le,isBanker:le===g}])),He(null),ja.length===4){const xe=i.map(Ue=>Ue.id===le?{...Ue,hand:Ue.hand.filter(xi=>xi.id!==fe)}:Ue);setTimeout(()=>wd(ja,xe),1e3)}else Nd((d+1)%4)};return I.useEffect(()=>{x===8&&m===Oe.PLAYING&&r.length===0&&(async()=>{S("Bi Zhang");let fe=[],ae=[...i];const pe=[0,1,2,3].map(W=>(d+W)%4);for(const W of pe){const Z=ae.find(ee=>ee.id===W);if(Z.hand.length===0)continue;const se=Z.hand[0];let F=!1;if(!Z.capturedCards||Z.capturedCards.length===0)F=!0;else if(fe.length>0){const ee=fe[0].card.suit;if(se.suit!==ee)F=!0;else{let Ke=-1;fe.forEach(Me=>{!Me.isFaceDown&&Me.card.suit===ee&&Me.card.value>Ke&&(Ke=Me.card.value)}),se.value<=Ke&&(F=!0)}}const Ce={playerId:W,card:se,isFaceDown:F};F||R(ee=>new Set(ee).add(se.id)),fe.push(Ce),ae=ae.map(ee=>ee.id===W?{...ee,hand:[]}:ee),a(ae),c([...fe]),e.playSound("PAPER"),await new Promise(ee=>setTimeout(ee,800))}wd(fe,ae)})()},[x,m]),I.useEffect(()=>{let le;return m===Oe.KAI_CHONG&&(gt<7?le=setTimeout(()=>{const fe=o[gt];if(!fe){vt(Z=>Z+1);return}e.playSound("PAPER");const ae=[];i.forEach(Z=>{const se=YS({players:i,potCard:fe,lang:e.language,history:V,currentAttempterId:Z.id,specialCaptures:ge});se&&ae.push(se)});const pe=d;ae.sort((Z,se)=>{if(Z.priorityScore!==se.priorityScore)return Z.priorityScore-se.priorityScore;const F=(Z.playerId-pe+4)%4,Ce=(se.playerId-pe+4)%4;return F-Ce});const W=ae[0];W?(Re(Z=>[...Z,W]),On("KAI_CHONG_SUCCESS",W.playerId),f(W.playerId),e.playSound("CHIME"),a(Z=>Z.map(se=>{if(se.id===W.playerId){const F=W.sourceCards.filter(ee=>ee.suit===W.matchedCard.suit&&ee.value===W.matchedCard.value).map(ee=>ee.id),Ce=se.trickPile.map(ee=>F.includes(ee.card.id)?{...ee,hidden:!0}:ee);return Ce.push({card:W.matchedCard,isFaceUp:!0,round:9,isKaiChong:!0}),{...se,trickPile:Ce,capturedCards:[...se.capturedCards,W.matchedCard]}}return se}))):(On("KAI_CHONG_FAIL",pe),f((pe+1)%4)),vt(Z=>Z+1)},1200):le=setTimeout(()=>{e.playSound("DRUM");const fe=JS({players:i,bankerId:g,lang:e.language,kaiChongHistory:V,violationLog:N,baseScore:e.baseScore||2}),ae={...U};ae.totalRounds=(ae.totalRounds||0)+1;const pe=fe.find(F=>F.playerId===g)?.totalRoundChange||0;pe>0?(ae.bankerWins++,ae.lastRoundWinnerType="BANKER"):pe<0?(ae.peasantWins++,ae.lastRoundWinnerType="PEASANT"):ae.lastRoundWinnerType="DRAW";const W=i.map(F=>{const Ce=fe.find(ee=>ee.playerId===F.id);return{...F,score:F.score+(Ce?.totalRoundChange||0)}});a(W);const Z=fe.find(F=>F.playerId===0);Z&&Z.violations.length>0&&On("VIOLATION"),On("ROUND_END");const se={...ae.aiLearningStates||{}};W.forEach(F=>{if(F.type===st.AI){const Ce=fe.find(ee=>ee.playerId===F.id);if(Ce){const ee=cd(F.id,U);se[F.id]=ob(ee,Ce,F.id===g,e.difficulty)}}}),ae.aiLearningStates=se,gb(ae),P(ae),T(fe),c([]),l([]),Ge(null),mt(null),h(Oe.SCORING)},1500)),()=>clearTimeout(le)},[m,gt]),{state:{players:i,deck:t,pot:o,tableCards:r,currentPlayerIndex:d,phase:m,bankerId:g,roundResults:b,trickNumber:x,gameMessage:y,recordedCards:E,faceUpPlayedCardIds:C,violationLog:N,openedSuits:L,firstLeadInfo:z,gameHistory:U,trickWinnerId:mn,kaiChongCardIndex:gt,kaiChongHistory:V,mianZhangCard:X,selectedCardId:Xe,pendingRisk:tt,violationNotification:Ht,lastGameEvent:on,bankerFirstLeadCard:G},actions:{startGame:Ad,startNextRound:Cy,exitToTitle:Ey,executePlayCard:Ay,setSelectedCardId:Ty,setPendingRisk:yt,setViolationNotification:Bt}}};var _b={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xb,Sb;function bb(){return{geminiUrl:xb,vertexUrl:Sb}}function Tb(e,t,n,i){var a,o;if(!e?.baseUrl){const l=bb();return t?(a=l.vertexUrl)!==null&&a!==void 0?a:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hn{}function H(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,a)=>{if(Object.prototype.hasOwnProperty.call(t,a)){const o=t[a];return o!=null?String(o):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function u(e,t,n){for(let o=0;o<t.length-1;o++){const l=t[o];if(l.endsWith("[]")){const r=l.slice(0,-2);if(!(r in e))if(Array.isArray(n))e[r]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(e[r])){const c=e[r];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];u(f,t.slice(o+1),n[d])}else for(const d of c)u(d,t.slice(o+1),n)}return}else if(l.endsWith("[0]")){const r=l.slice(0,-3);r in e||(e[r]=[{}]);const c=e[r];u(c[0],t.slice(o+1),n);return}(!e[l]||typeof e[l]!="object")&&(e[l]={}),e=e[l]}const i=t[t.length-1],a=e[i];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function s(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;const a=t[i];if(a.endsWith("[]")){const o=a.slice(0,-2);if(o in e){const l=e[o];return Array.isArray(l)?l.map(r=>s(r,t.slice(i+1),n)):n}else return n}else e=e[a]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function Cb(e,t){for(const[n,i]of Object.entries(t)){const a=n.split("."),o=i.split("."),l=new Set;let r=-1;for(let c=0;c<a.length;c++)if(a[c]==="*"){r=c;break}if(r!==-1&&o.length>r)for(let c=r;c<o.length;c++){const d=o[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&l.add(d)}Ku(e,a,o,0,l)}}function Ku(e,t,n,i,a){if(i>=t.length||typeof e!="object"||e===null)return;const o=t[i];if(o.endsWith("[]")){const l=o.slice(0,-2),r=e;if(l in r&&Array.isArray(r[l]))for(const c of r[l])Ku(c,t,n,i+1,a)}else if(o==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const l=e,r=Object.keys(l).filter(d=>!d.startsWith("_")&&!a.has(d)),c={};for(const d of r)c[d]=l[d];for(const[d,f]of Object.entries(c)){const m=[];for(const h of n.slice(i))h==="*"?m.push(d):m.push(h);u(l,m,f)}for(const d of r)delete l[d]}}else{const l=e;o in l&&Ku(l[o],t,n,i+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hd(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eb(e){const t={},n=s(e,["operationName"]);n!=null&&u(t,["operationName"],n);const i=s(e,["resourceName"]);return i!=null&&u(t,["_url","resourceName"],i),t}function Ab(e){const t={},n=s(e,["name"]);n!=null&&u(t,["name"],n);const i=s(e,["metadata"]);i!=null&&u(t,["metadata"],i);const a=s(e,["done"]);a!=null&&u(t,["done"],a);const o=s(e,["error"]);o!=null&&u(t,["error"],o);const l=s(e,["response","generateVideoResponse"]);return l!=null&&u(t,["response"],wb(l)),t}function Nb(e){const t={},n=s(e,["name"]);n!=null&&u(t,["name"],n);const i=s(e,["metadata"]);i!=null&&u(t,["metadata"],i);const a=s(e,["done"]);a!=null&&u(t,["done"],a);const o=s(e,["error"]);o!=null&&u(t,["error"],o);const l=s(e,["response"]);return l!=null&&u(t,["response"],Ib(l)),t}function wb(e){const t={},n=s(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Rb(l))),u(t,["generatedVideos"],o)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&u(t,["raiMediaFilteredCount"],i);const a=s(e,["raiMediaFilteredReasons"]);return a!=null&&u(t,["raiMediaFilteredReasons"],a),t}function Ib(e){const t={},n=s(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Mb(l))),u(t,["generatedVideos"],o)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&u(t,["raiMediaFilteredCount"],i);const a=s(e,["raiMediaFilteredReasons"]);return a!=null&&u(t,["raiMediaFilteredReasons"],a),t}function Rb(e){const t={},n=s(e,["video"]);return n!=null&&u(t,["video"],Hb(n)),t}function Mb(e){const t={},n=s(e,["_self"]);return n!=null&&u(t,["video"],Bb(n)),t}function Db(e){const t={},n=s(e,["operationName"]);return n!=null&&u(t,["_url","operationName"],n),t}function kb(e){const t={},n=s(e,["operationName"]);return n!=null&&u(t,["_url","operationName"],n),t}function Lb(e){const t={},n=s(e,["name"]);n!=null&&u(t,["name"],n);const i=s(e,["metadata"]);i!=null&&u(t,["metadata"],i);const a=s(e,["done"]);a!=null&&u(t,["done"],a);const o=s(e,["error"]);o!=null&&u(t,["error"],o);const l=s(e,["response"]);return l!=null&&u(t,["response"],Ub(l)),t}function Ub(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["parent"]);i!=null&&u(t,["parent"],i);const a=s(e,["documentName"]);return a!=null&&u(t,["documentName"],a),t}function gv(e){const t={},n=s(e,["name"]);n!=null&&u(t,["name"],n);const i=s(e,["metadata"]);i!=null&&u(t,["metadata"],i);const a=s(e,["done"]);a!=null&&u(t,["done"],a);const o=s(e,["error"]);o!=null&&u(t,["error"],o);const l=s(e,["response"]);return l!=null&&u(t,["response"],Gb(l)),t}function Gb(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["parent"]);i!=null&&u(t,["parent"],i);const a=s(e,["documentName"]);return a!=null&&u(t,["documentName"],a),t}function Hb(e){const t={},n=s(e,["uri"]);n!=null&&u(t,["uri"],n);const i=s(e,["encodedVideo"]);i!=null&&u(t,["videoBytes"],hd(i));const a=s(e,["encoding"]);return a!=null&&u(t,["mimeType"],a),t}function Bb(e){const t={},n=s(e,["gcsUri"]);n!=null&&u(t,["uri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&u(t,["videoBytes"],hd(i));const a=s(e,["mimeType"]);return a!=null&&u(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pp;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(pp||(pp={}));var hp;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(hp||(hp={}));var mp;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(mp||(mp={}));var ti;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(ti||(ti={}));var gp;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(gp||(gp={}));var vp;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(vp||(vp={}));var yp;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(yp||(yp={}));var _p;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(_p||(_p={}));var xp;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(xp||(xp={}));var Sp;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(Sp||(Sp={}));var bp;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(bp||(bp={}));var Tp;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Tp||(Tp={}));var Cp;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Cp||(Cp={}));var Ep;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(Ep||(Ep={}));var Ap;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Ap||(Ap={}));var Np;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Np||(Np={}));var wp;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(wp||(wp={}));var Ip;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Ip||(Ip={}));var Rp;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Rp||(Rp={}));var Oo;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Oo||(Oo={}));var Mp;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mp||(Mp={}));var Dp;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Dp||(Dp={}));var kp;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(kp||(kp={}));var $u;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})($u||($u={}));var Lp;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Lp||(Lp={}));var Up;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Up||(Up={}));var Gp;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Gp||(Gp={}));var Hp;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Hp||(Hp={}));var Bp;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Bp||(Bp={}));var Pp;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Pp||(Pp={}));var Op;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Op||(Op={}));var zp;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(zp||(zp={}));var qp;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(qp||(qp={}));var Vp;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Vp||(Vp={}));var Fp;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Fp||(Fp={}));var Yp;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Yp||(Yp={}));var Jp;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Jp||(Jp={}));var Kp;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Kp||(Kp={}));var $p;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})($p||($p={}));var jp;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(jp||(jp={}));var Xp;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Xp||(Xp={}));var Qp;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Qp||(Qp={}));var Wp;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Wp||(Wp={}));var Zp;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(Zp||(Zp={}));var eh;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(eh||(eh={}));var th;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(th||(th={}));var nh;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(nh||(nh={}));var ih;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(ih||(ih={}));var ah;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ah||(ah={}));var oh;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(oh||(oh={}));var lh;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(lh||(lh={}));var sh;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(sh||(sh={}));var rh;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(rh||(rh={}));var uh;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(uh||(uh={}));var ch;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(ch||(ch={}));var fa;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(fa||(fa={}));class ju{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class io{get text(){var t,n,i,a,o,l,r,c;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const m=[];for(const h of(c=(r=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||r===void 0?void 0:r.parts)!==null&&c!==void 0?c:[]){for(const[g,_]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(_!==null||_!==void 0)&&m.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,d+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var t,n,i,a,o,l,r,c;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const m of(c=(r=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||r===void 0?void 0:r.parts)!==null&&c!==void 0?c:[]){for(const[h,g]of Object.entries(m))h!=="inlineData"&&(g!==null||g!==void 0)&&f.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,i,a,o,l,r,c;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(r=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||r===void 0?void 0:r.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(d?.length!==0)return d}get executableCode(){var t,n,i,a,o,l,r,c,d;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(r=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||r===void 0?void 0:r.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,i,a,o,l,r,c,d;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(r=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||r===void 0?void 0:r.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.output}}class dh{}class fh{}class Pb{}class Ob{}class zb{}class qb{}class ph{}class hh{}class mh{}class Vb{}class ys{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new ys;let a;const o=t;return n?a=Nb(o):a=Ab(o),Object.assign(i,a),i}}class gh{}class vh{}class yh{}class _h{}class Fb{}class Yb{}class Jb{}class md{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new md,o=Lb(t);return Object.assign(i,o),i}}class Kb{}class $b{}class jb{}class xh{}class Xb{get text(){var t,n,i;let a="",o=!1;const l=[];for(const r of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(r))c!=="text"&&c!=="thought"&&d!==null&&l.push(c);if(typeof r.text=="string"){if(typeof r.thought=="boolean"&&r.thought)continue;o=!0,a+=r.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?a:void 0}get data(){var t,n,i;let a="";const o=[];for(const l of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[r,c]of Object.entries(l))r!=="inlineData"&&c!==null&&o.push(r);l.inlineData&&typeof l.inlineData.data=="string"&&(a+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class Qb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class gd{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new gd,o=gv(t);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function re(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function vv(e,t){const n=re(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function yv(e){return Array.isArray(e)?e.map(t=>_s(t)):[_s(e)]}function _s(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function _v(e){const t=_s(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function xv(e){const t=_s(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Sh(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Sv(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Sh(t)):[Sh(e)]}function Xu(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function bh(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Th(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function ut(e){if(e==null)throw new Error("ContentUnion is required");return Xu(e)?e:{role:"user",parts:Sv(e)}}function vd(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=ut(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=ut(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>ut(n)):[ut(t)]}function $t(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(bh(e)||Th(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ut(e)]}const t=[],n=[],i=Xu(e[0]);for(const a of e){const o=Xu(a);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(a);else{if(bh(a)||Th(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return i||t.push({role:"user",parts:Sv(n)}),t}function Wb(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(ti).includes(n[0].toUpperCase())?n[0].toUpperCase():ti.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(ti).includes(i.toUpperCase())?i.toUpperCase():ti.TYPE_UNSPECIFIED})}}function ba(e){const t={},n=["items"],i=["anyOf"],a=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=e.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(t.nullable=!0,e=o[1]):o[1].type==="null"&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&Wb(e.type,t);for(const[l,r]of Object.entries(e))if(r!=null)if(l=="type"){if(r==="null")throw new Error("type: null can not be the only possible type for the field.");if(r instanceof Array)continue;t.type=Object.values(ti).includes(r.toUpperCase())?r.toUpperCase():ti.TYPE_UNSPECIFIED}else if(n.includes(l))t[l]=ba(r);else if(i.includes(l)){const c=[];for(const d of r){if(d.type=="null"){t.nullable=!0;continue}c.push(ba(d))}t[l]=c}else if(a.includes(l)){const c={};for(const[d,f]of Object.entries(r))c[d]=ba(f);t[l]=c}else{if(l==="additionalProperties")continue;t[l]=r}return t}function yd(e){return ba(e)}function _d(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function xd(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Ya(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=ba(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=ba(t.response));return e}function Ja(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Zb(e,t,n,i=1){const a=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:a?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:a?`${n}/${t}`:t}function Bn(e,t){if(typeof t!="string")throw new Error("name must be a string");return Zb(e,t,"cachedContents")}function bv(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function yi(e){return hd(e)}function eT(e){return e!=null&&typeof e=="object"&&"name"in e}function tT(e){return e!=null&&typeof e=="object"&&"video"in e}function nT(e){return e!=null&&typeof e=="object"&&"uri"in e}function Tv(e){var t;let n;if(eT(e)&&(n=e.name),!(nT(e)&&(n=e.uri,n===void 0))&&!(tT(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Cv(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Ev(e){for(const t of["models","tunedModels","publisherModels"])if(iT(e,t))return e[t];return[]}function iT(e,t){return e!==null&&typeof e=="object"&&t in e}function aT(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function oT(e,t={}){const n=[],i=new Set;for(const a of e){const o=a.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=aT(a,t);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Av(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(a>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function lT(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Nv(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return e;let o=!1;for(const l of a){if(typeof l!="object"||l===null)continue;const c=l.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Ka(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function wv(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sT(e){const t={},n=s(e,["responsesFile"]);n!=null&&u(t,["fileName"],n);const i=s(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>zT(l))),u(t,["inlinedResponses"],o)}const a=s(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),u(t,["inlinedEmbedContentResponses"],o)}return t}function rT(e){const t={},n=s(e,["predictionsFormat"]);n!=null&&u(t,["format"],n);const i=s(e,["gcsDestination","outputUriPrefix"]);i!=null&&u(t,["gcsUri"],i);const a=s(e,["bigqueryDestination","outputUri"]);return a!=null&&u(t,["bigqueryUri"],a),t}function uT(e){const t={},n=s(e,["format"]);n!=null&&u(t,["predictionsFormat"],n);const i=s(e,["gcsUri"]);i!=null&&u(t,["gcsDestination","outputUriPrefix"],i);const a=s(e,["bigqueryUri"]);if(a!=null&&u(t,["bigqueryDestination","outputUri"],a),s(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(s(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Bl(e){const t={},n=s(e,["name"]);n!=null&&u(t,["name"],n);const i=s(e,["metadata","displayName"]);i!=null&&u(t,["displayName"],i);const a=s(e,["metadata","state"]);a!=null&&u(t,["state"],wv(a));const o=s(e,["metadata","createTime"]);o!=null&&u(t,["createTime"],o);const l=s(e,["metadata","endTime"]);l!=null&&u(t,["endTime"],l);const r=s(e,["metadata","updateTime"]);r!=null&&u(t,["updateTime"],r);const c=s(e,["metadata","model"]);c!=null&&u(t,["model"],c);const d=s(e,["metadata","output"]);return d!=null&&u(t,["dest"],sT(Nv(d))),t}function Qu(e){const t={},n=s(e,["name"]);n!=null&&u(t,["name"],n);const i=s(e,["displayName"]);i!=null&&u(t,["displayName"],i);const a=s(e,["state"]);a!=null&&u(t,["state"],wv(a));const o=s(e,["error"]);o!=null&&u(t,["error"],o);const l=s(e,["createTime"]);l!=null&&u(t,["createTime"],l);const r=s(e,["startTime"]);r!=null&&u(t,["startTime"],r);const c=s(e,["endTime"]);c!=null&&u(t,["endTime"],c);const d=s(e,["updateTime"]);d!=null&&u(t,["updateTime"],d);const f=s(e,["model"]);f!=null&&u(t,["model"],f);const m=s(e,["inputConfig"]);m!=null&&u(t,["src"],cT(m));const h=s(e,["outputConfig"]);h!=null&&u(t,["dest"],rT(Nv(h)));const g=s(e,["completionStats"]);return g!=null&&u(t,["completionStats"],g),t}function cT(e){const t={},n=s(e,["instancesFormat"]);n!=null&&u(t,["format"],n);const i=s(e,["gcsSource","uris"]);i!=null&&u(t,["gcsUri"],i);const a=s(e,["bigquerySource","inputUri"]);return a!=null&&u(t,["bigqueryUri"],a),t}function dT(e,t){const n={};if(s(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=s(t,["fileName"]);i!=null&&u(n,["fileName"],i);const a=s(t,["inlinedRequests"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>OT(e,l))),u(n,["requests","requests"],o)}return n}function fT(e){const t={},n=s(e,["format"]);n!=null&&u(t,["instancesFormat"],n);const i=s(e,["gcsUri"]);i!=null&&u(t,["gcsSource","uris"],i);const a=s(e,["bigqueryUri"]);if(a!=null&&u(t,["bigquerySource","inputUri"],a),s(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function pT(e){const t={},n=s(e,["data"]);if(n!=null&&u(t,["data"],n),s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function hT(e,t){const n={},i=s(t,["name"]);return i!=null&&u(n,["_url","name"],Ka(e,i)),n}function mT(e,t){const n={},i=s(t,["name"]);return i!=null&&u(n,["_url","name"],Ka(e,i)),n}function gT(e){const t={},n=s(e,["content"]);n!=null&&u(t,["content"],n);const i=s(e,["citationMetadata"]);i!=null&&u(t,["citationMetadata"],vT(i));const a=s(e,["tokenCount"]);a!=null&&u(t,["tokenCount"],a);const o=s(e,["finishReason"]);o!=null&&u(t,["finishReason"],o);const l=s(e,["avgLogprobs"]);l!=null&&u(t,["avgLogprobs"],l);const r=s(e,["groundingMetadata"]);r!=null&&u(t,["groundingMetadata"],r);const c=s(e,["index"]);c!=null&&u(t,["index"],c);const d=s(e,["logprobsResult"]);d!=null&&u(t,["logprobsResult"],d);const f=s(e,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),u(t,["safetyRatings"],h)}const m=s(e,["urlContextMetadata"]);return m!=null&&u(t,["urlContextMetadata"],m),t}function vT(e){const t={},n=s(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),u(t,["citations"],i)}return t}function Iv(e){const t={},n=s(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>$T(o))),u(t,["parts"],a)}const i=s(e,["role"]);return i!=null&&u(t,["role"],i),t}function yT(e,t){const n={},i=s(e,["displayName"]);if(t!==void 0&&i!=null&&u(t,["batch","displayName"],i),s(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function _T(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&u(t,["displayName"],i);const a=s(e,["dest"]);return t!==void 0&&a!=null&&u(t,["outputConfig"],uT(lT(a))),n}function Ch(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["src"]);a!=null&&u(n,["batch","inputConfig"],dT(e,Av(e,a)));const o=s(t,["config"]);return o!=null&&yT(o,n),n}function xT(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["model"],re(e,i));const a=s(t,["src"]);a!=null&&u(n,["inputConfig"],fT(Av(e,a)));const o=s(t,["config"]);return o!=null&&_T(o,n),n}function ST(e,t){const n={},i=s(e,["displayName"]);return t!==void 0&&i!=null&&u(t,["batch","displayName"],i),n}function bT(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["src"]);a!=null&&u(n,["batch","inputConfig"],IT(e,a));const o=s(t,["config"]);return o!=null&&ST(o,n),n}function TT(e,t){const n={},i=s(t,["name"]);return i!=null&&u(n,["_url","name"],Ka(e,i)),n}function CT(e,t){const n={},i=s(t,["name"]);return i!=null&&u(n,["_url","name"],Ka(e,i)),n}function ET(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&u(t,["name"],i);const a=s(e,["done"]);a!=null&&u(t,["done"],a);const o=s(e,["error"]);return o!=null&&u(t,["error"],o),t}function AT(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&u(t,["name"],i);const a=s(e,["done"]);a!=null&&u(t,["done"],a);const o=s(e,["error"]);return o!=null&&u(t,["error"],o),t}function NT(e,t){const n={},i=s(t,["contents"]);if(i!=null){let o=vd(e,i);Array.isArray(o)&&(o=o.map(l=>l)),u(n,["requests[]","request","content"],o)}const a=s(t,["config"]);return a!=null&&(u(n,["_self"],wT(a,n)),Cb(n,{"requests[].*":"requests[].request.*"})),n}function wT(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&u(t,["requests[]","taskType"],i);const a=s(e,["title"]);t!==void 0&&a!=null&&u(t,["requests[]","title"],a);const o=s(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&u(t,["requests[]","outputDimensionality"],o),s(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function IT(e,t){const n={},i=s(t,["fileName"]);i!=null&&u(n,["file_name"],i);const a=s(t,["inlinedRequests"]);return a!=null&&u(n,["requests"],NT(e,a)),n}function RT(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function MT(e){const t={},n=s(e,["id"]);n!=null&&u(t,["id"],n);const i=s(e,["args"]);i!=null&&u(t,["args"],i);const a=s(e,["name"]);if(a!=null&&u(t,["name"],a),s(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function DT(e){const t={},n=s(e,["mode"]);n!=null&&u(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);if(i!=null&&u(t,["allowedFunctionNames"],i),s(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function kT(e,t,n){const i={},a=s(t,["systemInstruction"]);n!==void 0&&a!=null&&u(n,["systemInstruction"],Iv(ut(a)));const o=s(t,["temperature"]);o!=null&&u(i,["temperature"],o);const l=s(t,["topP"]);l!=null&&u(i,["topP"],l);const r=s(t,["topK"]);r!=null&&u(i,["topK"],r);const c=s(t,["candidateCount"]);c!=null&&u(i,["candidateCount"],c);const d=s(t,["maxOutputTokens"]);d!=null&&u(i,["maxOutputTokens"],d);const f=s(t,["stopSequences"]);f!=null&&u(i,["stopSequences"],f);const m=s(t,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const h=s(t,["logprobs"]);h!=null&&u(i,["logprobs"],h);const g=s(t,["presencePenalty"]);g!=null&&u(i,["presencePenalty"],g);const _=s(t,["frequencyPenalty"]);_!=null&&u(i,["frequencyPenalty"],_);const b=s(t,["seed"]);b!=null&&u(i,["seed"],b);const T=s(t,["responseMimeType"]);T!=null&&u(i,["responseMimeType"],T);const x=s(t,["responseSchema"]);x!=null&&u(i,["responseSchema"],yd(x));const v=s(t,["responseJsonSchema"]);if(v!=null&&u(i,["responseJsonSchema"],v),s(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const y=s(t,["safetySettings"]);if(n!==void 0&&y!=null){let z=y;Array.isArray(z)&&(z=z.map($=>jT($))),u(n,["safetySettings"],z)}const S=s(t,["tools"]);if(n!==void 0&&S!=null){let z=Ja(S);Array.isArray(z)&&(z=z.map($=>QT(Ya($)))),u(n,["tools"],z)}const E=s(t,["toolConfig"]);if(n!==void 0&&E!=null&&u(n,["toolConfig"],XT(E)),s(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=s(t,["cachedContent"]);n!==void 0&&A!=null&&u(n,["cachedContent"],Bn(e,A));const C=s(t,["responseModalities"]);C!=null&&u(i,["responseModalities"],C);const R=s(t,["mediaResolution"]);R!=null&&u(i,["mediaResolution"],R);const N=s(t,["speechConfig"]);if(N!=null&&u(i,["speechConfig"],_d(N)),s(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=s(t,["thinkingConfig"]);M!=null&&u(i,["thinkingConfig"],M);const L=s(t,["imageConfig"]);L!=null&&u(i,["imageConfig"],PT(L));const O=s(t,["enableEnhancedCivicAnswers"]);return O!=null&&u(i,["enableEnhancedCivicAnswers"],O),i}function LT(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>gT(d))),u(t,["candidates"],c)}const a=s(e,["modelVersion"]);a!=null&&u(t,["modelVersion"],a);const o=s(e,["promptFeedback"]);o!=null&&u(t,["promptFeedback"],o);const l=s(e,["responseId"]);l!=null&&u(t,["responseId"],l);const r=s(e,["usageMetadata"]);return r!=null&&u(t,["usageMetadata"],r),t}function UT(e,t){const n={},i=s(t,["name"]);return i!=null&&u(n,["_url","name"],Ka(e,i)),n}function GT(e,t){const n={},i=s(t,["name"]);return i!=null&&u(n,["_url","name"],Ka(e,i)),n}function HT(e){const t={};if(s(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=s(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function BT(e){const t={};if(s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=s(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function PT(e){const t={},n=s(e,["aspectRatio"]);n!=null&&u(t,["aspectRatio"],n);const i=s(e,["imageSize"]);if(i!=null&&u(t,["imageSize"],i),s(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(s(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function OT(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["request","model"],re(e,i));const a=s(t,["contents"]);if(a!=null){let r=$t(a);Array.isArray(r)&&(r=r.map(c=>Iv(c))),u(n,["request","contents"],r)}const o=s(t,["metadata"]);o!=null&&u(n,["metadata"],o);const l=s(t,["config"]);return l!=null&&u(n,["request","generationConfig"],kT(e,l,s(n,["request"],{}))),n}function zT(e){const t={},n=s(e,["response"]);n!=null&&u(t,["response"],LT(n));const i=s(e,["error"]);return i!=null&&u(t,["error"],i),t}function qT(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const a=s(e,["pageToken"]);if(t!==void 0&&a!=null&&u(t,["_query","pageToken"],a),s(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function VT(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const a=s(e,["pageToken"]);t!==void 0&&a!=null&&u(t,["_query","pageToken"],a);const o=s(e,["filter"]);return t!==void 0&&o!=null&&u(t,["_query","filter"],o),n}function FT(e){const t={},n=s(e,["config"]);return n!=null&&qT(n,t),t}function YT(e){const t={},n=s(e,["config"]);return n!=null&&VT(n,t),t}function JT(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const a=s(e,["operations"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Bl(l))),u(t,["batchJobs"],o)}return t}function KT(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const a=s(e,["batchPredictionJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Qu(l))),u(t,["batchJobs"],o)}return t}function $T(e){const t={},n=s(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const i=s(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const a=s(e,["executableCode"]);a!=null&&u(t,["executableCode"],a);const o=s(e,["fileData"]);o!=null&&u(t,["fileData"],RT(o));const l=s(e,["functionCall"]);l!=null&&u(t,["functionCall"],MT(l));const r=s(e,["functionResponse"]);r!=null&&u(t,["functionResponse"],r);const c=s(e,["inlineData"]);c!=null&&u(t,["inlineData"],pT(c));const d=s(e,["text"]);d!=null&&u(t,["text"],d);const f=s(e,["thought"]);f!=null&&u(t,["thought"],f);const m=s(e,["thoughtSignature"]);m!=null&&u(t,["thoughtSignature"],m);const h=s(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function jT(e){const t={},n=s(e,["category"]);if(n!=null&&u(t,["category"],n),s(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=s(e,["threshold"]);return i!=null&&u(t,["threshold"],i),t}function XT(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&u(t,["functionCallingConfig"],DT(n));const i=s(e,["retrievalConfig"]);return i!=null&&u(t,["retrievalConfig"],i),t}function QT(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),u(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearchRetrieval"]);i!=null&&u(t,["googleSearchRetrieval"],i);const a=s(e,["computerUse"]);a!=null&&u(t,["computerUse"],a);const o=s(e,["fileSearch"]);o!=null&&u(t,["fileSearch"],o);const l=s(e,["codeExecution"]);if(l!=null&&u(t,["codeExecution"],l),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=s(e,["googleMaps"]);r!=null&&u(t,["googleMaps"],HT(r));const c=s(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],BT(c));const d=s(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Un;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Un||(Un={}));class Ji{constructor(t,n,i,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,a)}init(t,n,i){var a,o;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(a=l.config)===null||a===void 0?void 0:a.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WT extends Hn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ji(Un.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=Ch(this.apiClient,t),i=n._url,a=H("{model}:batchGenerateContent",i),r=n.batch.inputConfig.requests,c=r.requests,d=[];for(const f of c){const m=Object.assign({},f);if(m.systemInstruction){const h=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=h,m.request=g}d.push(m)}return r.requests=d,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},a=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${a}`),i.dest===void 0){const o=this.getGcsUri(t),l=this.getBigqueryUri(t);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${a}`;else if(l)i.dest=`${l}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=xT(this.apiClient,t);return r=H("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>Qu(f))}else{const d=Ch(this.apiClient,t);return r=H("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Bl(f))}}async createEmbeddingsInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=bT(this.apiClient,t);return o=H("{model}:asyncBatchEmbedContent",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>Bl(c))}}async get(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=GT(this.apiClient,t);return r=H("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>Qu(f))}else{const d=UT(this.apiClient,t);return r=H("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Bl(f))}}async cancel(t){var n,i,a,o;let l="",r={};if(this.apiClient.isVertexAI()){const c=mT(this.apiClient,t);l=H("batchPredictionJobs/{name}:cancel",c._url),r=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:r,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=hT(this.apiClient,t);l=H("batches/{name}:cancel",c._url),r=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:r,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=YT(t);return r=H("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=KT(f),h=new xh;return Object.assign(h,m),h})}else{const d=FT(t);return r=H("batches",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=JT(f),h=new xh;return Object.assign(h,m),h})}}async delete(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=CT(this.apiClient,t);return r=H("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>AT(f))}else{const d=TT(this.apiClient,t);return r=H("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>ET(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZT(e){const t={},n=s(e,["data"]);if(n!=null&&u(t,["data"],n),s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function Eh(e){const t={},n=s(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>bC(o))),u(t,["parts"],a)}const i=s(e,["role"]);return i!=null&&u(t,["role"],i),t}function eC(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const a=s(e,["expireTime"]);t!==void 0&&a!=null&&u(t,["expireTime"],a);const o=s(e,["displayName"]);t!==void 0&&o!=null&&u(t,["displayName"],o);const l=s(e,["contents"]);if(t!==void 0&&l!=null){let f=$t(l);Array.isArray(f)&&(f=f.map(m=>Eh(m))),u(t,["contents"],f)}const r=s(e,["systemInstruction"]);t!==void 0&&r!=null&&u(t,["systemInstruction"],Eh(ut(r)));const c=s(e,["tools"]);if(t!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>CC(m))),u(t,["tools"],f)}const d=s(e,["toolConfig"]);if(t!==void 0&&d!=null&&u(t,["toolConfig"],TC(d)),s(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function tC(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const a=s(e,["expireTime"]);t!==void 0&&a!=null&&u(t,["expireTime"],a);const o=s(e,["displayName"]);t!==void 0&&o!=null&&u(t,["displayName"],o);const l=s(e,["contents"]);if(t!==void 0&&l!=null){let m=$t(l);Array.isArray(m)&&(m=m.map(h=>h)),u(t,["contents"],m)}const r=s(e,["systemInstruction"]);t!==void 0&&r!=null&&u(t,["systemInstruction"],ut(r));const c=s(e,["tools"]);if(t!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>EC(h))),u(t,["tools"],m)}const d=s(e,["toolConfig"]);t!==void 0&&d!=null&&u(t,["toolConfig"],d);const f=s(e,["kmsKeyName"]);return t!==void 0&&f!=null&&u(t,["encryption_spec","kmsKeyName"],f),n}function nC(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["model"],vv(e,i));const a=s(t,["config"]);return a!=null&&eC(a,n),n}function iC(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["model"],vv(e,i));const a=s(t,["config"]);return a!=null&&tC(a,n),n}function aC(e,t){const n={},i=s(t,["name"]);return i!=null&&u(n,["_url","name"],Bn(e,i)),n}function oC(e,t){const n={},i=s(t,["name"]);return i!=null&&u(n,["_url","name"],Bn(e,i)),n}function lC(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function sC(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function rC(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function uC(e){const t={},n=s(e,["id"]);n!=null&&u(t,["id"],n);const i=s(e,["args"]);i!=null&&u(t,["args"],i);const a=s(e,["name"]);if(a!=null&&u(t,["name"],a),s(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function cC(e){const t={},n=s(e,["mode"]);n!=null&&u(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);if(i!=null&&u(t,["allowedFunctionNames"],i),s(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function dC(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&u(t,["description"],n);const i=s(e,["name"]);i!=null&&u(t,["name"],i);const a=s(e,["parameters"]);a!=null&&u(t,["parameters"],a);const o=s(e,["parametersJsonSchema"]);o!=null&&u(t,["parametersJsonSchema"],o);const l=s(e,["response"]);l!=null&&u(t,["response"],l);const r=s(e,["responseJsonSchema"]);return r!=null&&u(t,["responseJsonSchema"],r),t}function fC(e,t){const n={},i=s(t,["name"]);return i!=null&&u(n,["_url","name"],Bn(e,i)),n}function pC(e,t){const n={},i=s(t,["name"]);return i!=null&&u(n,["_url","name"],Bn(e,i)),n}function hC(e){const t={};if(s(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=s(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function mC(e){const t={};if(s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=s(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function gC(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const a=s(e,["pageToken"]);return t!==void 0&&a!=null&&u(t,["_query","pageToken"],a),n}function vC(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const a=s(e,["pageToken"]);return t!==void 0&&a!=null&&u(t,["_query","pageToken"],a),n}function yC(e){const t={},n=s(e,["config"]);return n!=null&&gC(n,t),t}function _C(e){const t={},n=s(e,["config"]);return n!=null&&vC(n,t),t}function xC(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const a=s(e,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),u(t,["cachedContents"],o)}return t}function SC(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const a=s(e,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),u(t,["cachedContents"],o)}return t}function bC(e){const t={},n=s(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const i=s(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const a=s(e,["executableCode"]);a!=null&&u(t,["executableCode"],a);const o=s(e,["fileData"]);o!=null&&u(t,["fileData"],rC(o));const l=s(e,["functionCall"]);l!=null&&u(t,["functionCall"],uC(l));const r=s(e,["functionResponse"]);r!=null&&u(t,["functionResponse"],r);const c=s(e,["inlineData"]);c!=null&&u(t,["inlineData"],ZT(c));const d=s(e,["text"]);d!=null&&u(t,["text"],d);const f=s(e,["thought"]);f!=null&&u(t,["thought"],f);const m=s(e,["thoughtSignature"]);m!=null&&u(t,["thoughtSignature"],m);const h=s(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function TC(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&u(t,["functionCallingConfig"],cC(n));const i=s(e,["retrievalConfig"]);return i!=null&&u(t,["retrievalConfig"],i),t}function CC(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),u(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearchRetrieval"]);i!=null&&u(t,["googleSearchRetrieval"],i);const a=s(e,["computerUse"]);a!=null&&u(t,["computerUse"],a);const o=s(e,["fileSearch"]);o!=null&&u(t,["fileSearch"],o);const l=s(e,["codeExecution"]);if(l!=null&&u(t,["codeExecution"],l),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=s(e,["googleMaps"]);r!=null&&u(t,["googleMaps"],hC(r));const c=s(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],mC(c));const d=s(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}function EC(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>dC(h))),u(t,["functionDeclarations"],m)}const i=s(e,["retrieval"]);i!=null&&u(t,["retrieval"],i);const a=s(e,["googleSearchRetrieval"]);a!=null&&u(t,["googleSearchRetrieval"],a);const o=s(e,["computerUse"]);if(o!=null&&u(t,["computerUse"],o),s(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=s(e,["codeExecution"]);l!=null&&u(t,["codeExecution"],l);const r=s(e,["enterpriseWebSearch"]);r!=null&&u(t,["enterpriseWebSearch"],r);const c=s(e,["googleMaps"]);c!=null&&u(t,["googleMaps"],c);const d=s(e,["googleSearch"]);d!=null&&u(t,["googleSearch"],d);const f=s(e,["urlContext"]);return f!=null&&u(t,["urlContext"],f),t}function AC(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const a=s(e,["expireTime"]);return t!==void 0&&a!=null&&u(t,["expireTime"],a),n}function NC(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const a=s(e,["expireTime"]);return t!==void 0&&a!=null&&u(t,["expireTime"],a),n}function wC(e,t){const n={},i=s(t,["name"]);i!=null&&u(n,["_url","name"],Bn(e,i));const a=s(t,["config"]);return a!=null&&AC(a,n),n}function IC(e,t){const n={},i=s(t,["name"]);i!=null&&u(n,["_url","name"],Bn(e,i));const a=s(t,["config"]);return a!=null&&NC(a,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RC extends Hn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ji(Un.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=iC(this.apiClient,t);return r=H("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const d=nC(this.apiClient,t);return r=H("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async get(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=pC(this.apiClient,t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const d=fC(this.apiClient,t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async delete(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=oC(this.apiClient,t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=sC(f),h=new yh;return Object.assign(h,m),h})}else{const d=aC(this.apiClient,t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=lC(f),h=new yh;return Object.assign(h,m),h})}}async update(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=IC(this.apiClient,t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const d=wC(this.apiClient,t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async listInternal(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=_C(t);return r=H("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=SC(f),h=new _h;return Object.assign(h,m),h})}else{const d=yC(t);return r=H("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=xC(f),h=new _h;return Object.assign(h,m),h})}}}function xs(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n}function Ah(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(e){return this instanceof J?(this.v=e,this):new J(e)}function Zt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),r("next"),r("throw"),r("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(g){return function(_){return Promise.resolve(_).then(g,m)}}function r(g,_){i[g]&&(a[g]=function(b){return new Promise(function(T,x){o.push([g,b,T,x])>1||c(g,b)})},_&&(a[g]=_(a[g])))}function c(g,_){try{d(i[g](_))}catch(b){h(o[0][3],b)}}function d(g){g.value instanceof J?Promise.resolve(g.value.v).then(f,m):h(o[0][2],g)}function f(g){c("next",g)}function m(g){c("throw",g)}function h(g,_){g(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function en(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ah=="function"?Ah(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(l){return new Promise(function(r,c){l=e[o](l),a(r,c,l.done,l.value)})}}function a(o,l,r,c){Promise.resolve(c).then(function(d){o({value:d,done:r})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MC(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Rv(n)}function Rv(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function DC(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Nh(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const a=[];let o=!0;for(;i<n&&e[i].role==="model";)a.push(e[i]),o&&!Rv(e[i])&&(o=!1),i++;o?t.push(...a):t.pop()}return t}class kC{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new LC(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}let LC=class{constructor(t,n,i,a={},o=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=a,this.history=o,this.sendPromise=Promise.resolve(),DC(o)}async sendMessage(t){var n;await this.sendPromise;const i=ut(t.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,r;const c=await a,d=(l=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,f=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let h=[];f!=null&&(h=(r=f.slice(m))!==null&&r!==void 0?r:[]);const g=d?[d]:[];this.recordHistory(i,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(t){var n;await this.sendPromise;const i=ut(t.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const o=await a;return this.processStreamResponse(o,i)}getHistory(t=!1){const n=t?Nh(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return Zt(this,arguments,function*(){var a,o,l,r,c,d;const f=[];try{for(var m=!0,h=en(t),g;g=yield J(h.next()),a=g.done,!a;m=!0){r=g.value,m=!1;const _=r;if(MC(_)){const b=(d=(c=_.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;b!==void 0&&f.push(b)}yield yield J(_)}}catch(_){o={error:_}}finally{try{!m&&!a&&(l=h.return)&&(yield J(l.call(h)))}finally{if(o)throw o.error}}this.recordHistory(n,f)})}recordHistory(t,n,i){let a=[];n.length>0&&n.every(o=>o.role!==void 0)?a=n:a.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Nh(i)):this.history.push(t),this.history.push(...a)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ys extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Ys.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UC(e){const t={},n=s(e,["file"]);return n!=null&&u(t,["file"],n),t}function GC(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function HC(e){const t={},n=s(e,["name"]);return n!=null&&u(t,["_url","file"],Tv(n)),t}function BC(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function PC(e){const t={},n=s(e,["name"]);return n!=null&&u(t,["_url","file"],Tv(n)),t}function OC(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const a=s(e,["pageToken"]);return t!==void 0&&a!=null&&u(t,["_query","pageToken"],a),n}function zC(e){const t={},n=s(e,["config"]);return n!=null&&OC(n,t),t}function qC(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const a=s(e,["files"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),u(t,["files"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VC extends Hn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ji(Un.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=zC(t);return o=H("files",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>{const d=qC(c),f=new Kb;return Object.assign(f,d),f})}}async createInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=UC(t);return o=H("upload/v1beta/files",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const d=GC(c),f=new $b;return Object.assign(f,d),f})}}async get(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=PC(t);return o=H("files/{file}",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=HC(t);return o=H("files/{file}",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>{const d=BC(c),f=new jb;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pl(e){const t={},n=s(e,["data"]);if(n!=null&&u(t,["data"],n),s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function FC(e){const t={},n=s(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>lE(o))),u(t,["parts"],a)}const i=s(e,["role"]);return i!=null&&u(t,["role"],i),t}function YC(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function JC(e){const t={},n=s(e,["id"]);n!=null&&u(t,["id"],n);const i=s(e,["args"]);i!=null&&u(t,["args"],i);const a=s(e,["name"]);if(a!=null&&u(t,["name"],a),s(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function KC(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&u(t,["description"],n);const i=s(e,["name"]);i!=null&&u(t,["name"],i);const a=s(e,["parameters"]);a!=null&&u(t,["parameters"],a);const o=s(e,["parametersJsonSchema"]);o!=null&&u(t,["parametersJsonSchema"],o);const l=s(e,["response"]);l!=null&&u(t,["response"],l);const r=s(e,["responseJsonSchema"]);return r!=null&&u(t,["responseJsonSchema"],r),t}function $C(e){const t={},n=s(e,["modelSelectionConfig"]);n!=null&&u(t,["modelConfig"],n);const i=s(e,["responseJsonSchema"]);i!=null&&u(t,["responseJsonSchema"],i);const a=s(e,["audioTimestamp"]);a!=null&&u(t,["audioTimestamp"],a);const o=s(e,["candidateCount"]);o!=null&&u(t,["candidateCount"],o);const l=s(e,["enableAffectiveDialog"]);l!=null&&u(t,["enableAffectiveDialog"],l);const r=s(e,["frequencyPenalty"]);r!=null&&u(t,["frequencyPenalty"],r);const c=s(e,["logprobs"]);c!=null&&u(t,["logprobs"],c);const d=s(e,["maxOutputTokens"]);d!=null&&u(t,["maxOutputTokens"],d);const f=s(e,["mediaResolution"]);f!=null&&u(t,["mediaResolution"],f);const m=s(e,["presencePenalty"]);m!=null&&u(t,["presencePenalty"],m);const h=s(e,["responseLogprobs"]);h!=null&&u(t,["responseLogprobs"],h);const g=s(e,["responseMimeType"]);g!=null&&u(t,["responseMimeType"],g);const _=s(e,["responseModalities"]);_!=null&&u(t,["responseModalities"],_);const b=s(e,["responseSchema"]);b!=null&&u(t,["responseSchema"],b);const T=s(e,["routingConfig"]);T!=null&&u(t,["routingConfig"],T);const x=s(e,["seed"]);x!=null&&u(t,["seed"],x);const v=s(e,["speechConfig"]);v!=null&&u(t,["speechConfig"],Mv(v));const y=s(e,["stopSequences"]);y!=null&&u(t,["stopSequences"],y);const S=s(e,["temperature"]);S!=null&&u(t,["temperature"],S);const E=s(e,["thinkingConfig"]);E!=null&&u(t,["thinkingConfig"],E);const A=s(e,["topK"]);A!=null&&u(t,["topK"],A);const C=s(e,["topP"]);if(C!=null&&u(t,["topP"],C),s(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function jC(e){const t={};if(s(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=s(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function XC(e){const t={};if(s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=s(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function QC(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig"],i);const a=s(e,["responseModalities"]);t!==void 0&&a!=null&&u(t,["setup","generationConfig","responseModalities"],a);const o=s(e,["temperature"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig","temperature"],o);const l=s(e,["topP"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topP"],l);const r=s(e,["topK"]);t!==void 0&&r!=null&&u(t,["setup","generationConfig","topK"],r);const c=s(e,["maxOutputTokens"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","maxOutputTokens"],c);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","mediaResolution"],d);const f=s(e,["seed"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","seed"],f);const m=s(e,["speechConfig"]);t!==void 0&&m!=null&&u(t,["setup","generationConfig","speechConfig"],xd(m));const h=s(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const g=s(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],g);const _=s(e,["systemInstruction"]);t!==void 0&&_!=null&&u(t,["setup","systemInstruction"],FC(ut(_)));const b=s(e,["tools"]);if(t!==void 0&&b!=null){let A=Ja(b);Array.isArray(A)&&(A=A.map(C=>rE(Ya(C)))),u(t,["setup","tools"],A)}const T=s(e,["sessionResumption"]);t!==void 0&&T!=null&&u(t,["setup","sessionResumption"],sE(T));const x=s(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&u(t,["setup","inputAudioTranscription"],x);const v=s(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&u(t,["setup","outputAudioTranscription"],v);const y=s(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&u(t,["setup","realtimeInputConfig"],y);const S=s(e,["contextWindowCompression"]);t!==void 0&&S!=null&&u(t,["setup","contextWindowCompression"],S);const E=s(e,["proactivity"]);if(t!==void 0&&E!=null&&u(t,["setup","proactivity"],E),s(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function WC(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig"],$C(i));const a=s(e,["responseModalities"]);t!==void 0&&a!=null&&u(t,["setup","generationConfig","responseModalities"],a);const o=s(e,["temperature"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig","temperature"],o);const l=s(e,["topP"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topP"],l);const r=s(e,["topK"]);t!==void 0&&r!=null&&u(t,["setup","generationConfig","topK"],r);const c=s(e,["maxOutputTokens"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","maxOutputTokens"],c);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","mediaResolution"],d);const f=s(e,["seed"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","seed"],f);const m=s(e,["speechConfig"]);t!==void 0&&m!=null&&u(t,["setup","generationConfig","speechConfig"],Mv(xd(m)));const h=s(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const g=s(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],g);const _=s(e,["systemInstruction"]);t!==void 0&&_!=null&&u(t,["setup","systemInstruction"],ut(_));const b=s(e,["tools"]);if(t!==void 0&&b!=null){let C=Ja(b);Array.isArray(C)&&(C=C.map(R=>uE(Ya(R)))),u(t,["setup","tools"],C)}const T=s(e,["sessionResumption"]);t!==void 0&&T!=null&&u(t,["setup","sessionResumption"],T);const x=s(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&u(t,["setup","inputAudioTranscription"],x);const v=s(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&u(t,["setup","outputAudioTranscription"],v);const y=s(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&u(t,["setup","realtimeInputConfig"],y);const S=s(e,["contextWindowCompression"]);t!==void 0&&S!=null&&u(t,["setup","contextWindowCompression"],S);const E=s(e,["proactivity"]);t!==void 0&&E!=null&&u(t,["setup","proactivity"],E);const A=s(e,["explicitVadSignal"]);return t!==void 0&&A!=null&&u(t,["setup","explicitVadSignal"],A),n}function ZC(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["setup","model"],re(e,i));const a=s(t,["config"]);return a!=null&&u(n,["config"],QC(a,n)),n}function eE(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["setup","model"],re(e,i));const a=s(t,["config"]);return a!=null&&u(n,["config"],WC(a,n)),n}function tE(e){const t={},n=s(e,["musicGenerationConfig"]);return n!=null&&u(t,["musicGenerationConfig"],n),t}function nE(e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),u(t,["weightedPrompts"],i)}return t}function iE(e){const t={},n=s(e,["media"]);if(n!=null){let d=yv(n);Array.isArray(d)&&(d=d.map(f=>Pl(f))),u(t,["mediaChunks"],d)}const i=s(e,["audio"]);i!=null&&u(t,["audio"],Pl(xv(i)));const a=s(e,["audioStreamEnd"]);a!=null&&u(t,["audioStreamEnd"],a);const o=s(e,["video"]);o!=null&&u(t,["video"],Pl(_v(o)));const l=s(e,["text"]);l!=null&&u(t,["text"],l);const r=s(e,["activityStart"]);r!=null&&u(t,["activityStart"],r);const c=s(e,["activityEnd"]);return c!=null&&u(t,["activityEnd"],c),t}function aE(e){const t={},n=s(e,["media"]);if(n!=null){let d=yv(n);Array.isArray(d)&&(d=d.map(f=>f)),u(t,["mediaChunks"],d)}const i=s(e,["audio"]);i!=null&&u(t,["audio"],xv(i));const a=s(e,["audioStreamEnd"]);a!=null&&u(t,["audioStreamEnd"],a);const o=s(e,["video"]);o!=null&&u(t,["video"],_v(o));const l=s(e,["text"]);l!=null&&u(t,["text"],l);const r=s(e,["activityStart"]);r!=null&&u(t,["activityStart"],r);const c=s(e,["activityEnd"]);return c!=null&&u(t,["activityEnd"],c),t}function oE(e){const t={},n=s(e,["setupComplete"]);n!=null&&u(t,["setupComplete"],n);const i=s(e,["serverContent"]);i!=null&&u(t,["serverContent"],i);const a=s(e,["toolCall"]);a!=null&&u(t,["toolCall"],a);const o=s(e,["toolCallCancellation"]);o!=null&&u(t,["toolCallCancellation"],o);const l=s(e,["usageMetadata"]);l!=null&&u(t,["usageMetadata"],cE(l));const r=s(e,["goAway"]);r!=null&&u(t,["goAway"],r);const c=s(e,["sessionResumptionUpdate"]);c!=null&&u(t,["sessionResumptionUpdate"],c);const d=s(e,["voiceActivityDetectionSignal"]);return d!=null&&u(t,["voiceActivityDetectionSignal"],d),t}function lE(e){const t={},n=s(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const i=s(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const a=s(e,["executableCode"]);a!=null&&u(t,["executableCode"],a);const o=s(e,["fileData"]);o!=null&&u(t,["fileData"],YC(o));const l=s(e,["functionCall"]);l!=null&&u(t,["functionCall"],JC(l));const r=s(e,["functionResponse"]);r!=null&&u(t,["functionResponse"],r);const c=s(e,["inlineData"]);c!=null&&u(t,["inlineData"],Pl(c));const d=s(e,["text"]);d!=null&&u(t,["text"],d);const f=s(e,["thought"]);f!=null&&u(t,["thought"],f);const m=s(e,["thoughtSignature"]);m!=null&&u(t,["thoughtSignature"],m);const h=s(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function sE(e){const t={},n=s(e,["handle"]);if(n!=null&&u(t,["handle"],n),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Mv(e){const t={},n=s(e,["voiceConfig"]);n!=null&&u(t,["voiceConfig"],n);const i=s(e,["languageCode"]);if(i!=null&&u(t,["languageCode"],i),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function rE(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),u(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearchRetrieval"]);i!=null&&u(t,["googleSearchRetrieval"],i);const a=s(e,["computerUse"]);a!=null&&u(t,["computerUse"],a);const o=s(e,["fileSearch"]);o!=null&&u(t,["fileSearch"],o);const l=s(e,["codeExecution"]);if(l!=null&&u(t,["codeExecution"],l),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=s(e,["googleMaps"]);r!=null&&u(t,["googleMaps"],jC(r));const c=s(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],XC(c));const d=s(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}function uE(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>KC(h))),u(t,["functionDeclarations"],m)}const i=s(e,["retrieval"]);i!=null&&u(t,["retrieval"],i);const a=s(e,["googleSearchRetrieval"]);a!=null&&u(t,["googleSearchRetrieval"],a);const o=s(e,["computerUse"]);if(o!=null&&u(t,["computerUse"],o),s(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=s(e,["codeExecution"]);l!=null&&u(t,["codeExecution"],l);const r=s(e,["enterpriseWebSearch"]);r!=null&&u(t,["enterpriseWebSearch"],r);const c=s(e,["googleMaps"]);c!=null&&u(t,["googleMaps"],c);const d=s(e,["googleSearch"]);d!=null&&u(t,["googleSearch"],d);const f=s(e,["urlContext"]);return f!=null&&u(t,["urlContext"],f),t}function cE(e){const t={},n=s(e,["promptTokenCount"]);n!=null&&u(t,["promptTokenCount"],n);const i=s(e,["cachedContentTokenCount"]);i!=null&&u(t,["cachedContentTokenCount"],i);const a=s(e,["candidatesTokenCount"]);a!=null&&u(t,["responseTokenCount"],a);const o=s(e,["toolUsePromptTokenCount"]);o!=null&&u(t,["toolUsePromptTokenCount"],o);const l=s(e,["thoughtsTokenCount"]);l!=null&&u(t,["thoughtsTokenCount"],l);const r=s(e,["totalTokenCount"]);r!=null&&u(t,["totalTokenCount"],r);const c=s(e,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(_=>_)),u(t,["promptTokensDetails"],g)}const d=s(e,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(_=>_)),u(t,["cacheTokensDetails"],g)}const f=s(e,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(_=>_)),u(t,["responseTokensDetails"],g)}const m=s(e,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(_=>_)),u(t,["toolUsePromptTokensDetails"],g)}const h=s(e,["trafficType"]);return h!=null&&u(t,["trafficType"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dE(e){const t={},n=s(e,["data"]);if(n!=null&&u(t,["data"],n),s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function fE(e){const t={},n=s(e,["content"]);n!=null&&u(t,["content"],n);const i=s(e,["citationMetadata"]);i!=null&&u(t,["citationMetadata"],pE(i));const a=s(e,["tokenCount"]);a!=null&&u(t,["tokenCount"],a);const o=s(e,["finishReason"]);o!=null&&u(t,["finishReason"],o);const l=s(e,["avgLogprobs"]);l!=null&&u(t,["avgLogprobs"],l);const r=s(e,["groundingMetadata"]);r!=null&&u(t,["groundingMetadata"],r);const c=s(e,["index"]);c!=null&&u(t,["index"],c);const d=s(e,["logprobsResult"]);d!=null&&u(t,["logprobsResult"],d);const f=s(e,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),u(t,["safetyRatings"],h)}const m=s(e,["urlContextMetadata"]);return m!=null&&u(t,["urlContextMetadata"],m),t}function pE(e){const t={},n=s(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),u(t,["citations"],i)}return t}function hE(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["contents"]);if(a!=null){let o=$t(a);Array.isArray(o)&&(o=o.map(l=>l)),u(n,["contents"],o)}return n}function mE(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["tokensInfo"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),u(t,["tokensInfo"],a)}return t}function gE(e){const t={},n=s(e,["values"]);n!=null&&u(t,["values"],n);const i=s(e,["statistics"]);return i!=null&&u(t,["statistics"],vE(i)),t}function vE(e){const t={},n=s(e,["truncated"]);n!=null&&u(t,["truncated"],n);const i=s(e,["token_count"]);return i!=null&&u(t,["tokenCount"],i),t}function Js(e){const t={},n=s(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>AA(o))),u(t,["parts"],a)}const i=s(e,["role"]);return i!=null&&u(t,["role"],i),t}function yE(e){const t={},n=s(e,["controlType"]);n!=null&&u(t,["controlType"],n);const i=s(e,["enableControlImageComputation"]);return i!=null&&u(t,["computeControl"],i),t}function _E(e){const t={};if(s(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function xE(e,t){const n={},i=s(e,["systemInstruction"]);t!==void 0&&i!=null&&u(t,["systemInstruction"],ut(i));const a=s(e,["tools"]);if(t!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(r=>Gv(r))),u(t,["tools"],l)}const o=s(e,["generationConfig"]);return t!==void 0&&o!=null&&u(t,["generationConfig"],dA(o)),n}function SE(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["contents"]);if(a!=null){let l=$t(a);Array.isArray(l)&&(l=l.map(r=>Js(r))),u(n,["contents"],l)}const o=s(t,["config"]);return o!=null&&_E(o),n}function bE(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["contents"]);if(a!=null){let l=$t(a);Array.isArray(l)&&(l=l.map(r=>r)),u(n,["contents"],l)}const o=s(t,["config"]);return o!=null&&xE(o,n),n}function TE(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["totalTokens"]);i!=null&&u(t,["totalTokens"],i);const a=s(e,["cachedContentTokenCount"]);return a!=null&&u(t,["cachedContentTokenCount"],a),t}function CE(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["totalTokens"]);return i!=null&&u(t,["totalTokens"],i),t}function EE(e,t){const n={},i=s(t,["model"]);return i!=null&&u(n,["_url","name"],re(e,i)),n}function AE(e,t){const n={},i=s(t,["model"]);return i!=null&&u(n,["_url","name"],re(e,i)),n}function NE(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function wE(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function IE(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&u(t,["parameters","storageUri"],i);const a=s(e,["negativePrompt"]);t!==void 0&&a!=null&&u(t,["parameters","negativePrompt"],a);const o=s(e,["numberOfImages"]);t!==void 0&&o!=null&&u(t,["parameters","sampleCount"],o);const l=s(e,["aspectRatio"]);t!==void 0&&l!=null&&u(t,["parameters","aspectRatio"],l);const r=s(e,["guidanceScale"]);t!==void 0&&r!=null&&u(t,["parameters","guidanceScale"],r);const c=s(e,["seed"]);t!==void 0&&c!=null&&u(t,["parameters","seed"],c);const d=s(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&u(t,["parameters","safetySetting"],d);const f=s(e,["personGeneration"]);t!==void 0&&f!=null&&u(t,["parameters","personGeneration"],f);const m=s(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&u(t,["parameters","includeSafetyAttributes"],m);const h=s(e,["includeRaiReason"]);t!==void 0&&h!=null&&u(t,["parameters","includeRaiReason"],h);const g=s(e,["language"]);t!==void 0&&g!=null&&u(t,["parameters","language"],g);const _=s(e,["outputMimeType"]);t!==void 0&&_!=null&&u(t,["parameters","outputOptions","mimeType"],_);const b=s(e,["outputCompressionQuality"]);t!==void 0&&b!=null&&u(t,["parameters","outputOptions","compressionQuality"],b);const T=s(e,["addWatermark"]);t!==void 0&&T!=null&&u(t,["parameters","addWatermark"],T);const x=s(e,["labels"]);t!==void 0&&x!=null&&u(t,["labels"],x);const v=s(e,["editMode"]);t!==void 0&&v!=null&&u(t,["parameters","editMode"],v);const y=s(e,["baseSteps"]);return t!==void 0&&y!=null&&u(t,["parameters","editConfig","baseSteps"],y),n}function RE(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["prompt"]);a!=null&&u(n,["instances[0]","prompt"],a);const o=s(t,["referenceImages"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>DA(c))),u(n,["instances[0]","referenceImages"],r)}const l=s(t,["config"]);return l!=null&&IE(l,n),n}function ME(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Ks(o))),u(t,["generatedImages"],a)}return t}function DE(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&u(t,["requests[]","taskType"],i);const a=s(e,["title"]);t!==void 0&&a!=null&&u(t,["requests[]","title"],a);const o=s(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&u(t,["requests[]","outputDimensionality"],o),s(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function kE(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&u(t,["instances[]","task_type"],i);const a=s(e,["title"]);t!==void 0&&a!=null&&u(t,["instances[]","title"],a);const o=s(e,["outputDimensionality"]);t!==void 0&&o!=null&&u(t,["parameters","outputDimensionality"],o);const l=s(e,["mimeType"]);t!==void 0&&l!=null&&u(t,["instances[]","mimeType"],l);const r=s(e,["autoTruncate"]);return t!==void 0&&r!=null&&u(t,["parameters","autoTruncate"],r),n}function LE(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["contents"]);if(a!=null){let r=vd(e,a);Array.isArray(r)&&(r=r.map(c=>c)),u(n,["requests[]","content"],r)}const o=s(t,["config"]);o!=null&&DE(o,n);const l=s(t,["model"]);return l!==void 0&&u(n,["requests[]","model"],re(e,l)),n}function UE(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["contents"]);if(a!=null){let l=vd(e,a);Array.isArray(l)&&(l=l.map(r=>r)),u(n,["instances[]","content"],l)}const o=s(t,["config"]);return o!=null&&kE(o,n),n}function GE(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),u(t,["embeddings"],o)}const a=s(e,["metadata"]);return a!=null&&u(t,["metadata"],a),t}function HE(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>gE(l))),u(t,["embeddings"],o)}const a=s(e,["metadata"]);return a!=null&&u(t,["metadata"],a),t}function BE(e){const t={},n=s(e,["endpoint"]);n!=null&&u(t,["name"],n);const i=s(e,["deployedModelId"]);return i!=null&&u(t,["deployedModelId"],i),t}function PE(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function OE(e){const t={},n=s(e,["id"]);n!=null&&u(t,["id"],n);const i=s(e,["args"]);i!=null&&u(t,["args"],i);const a=s(e,["name"]);if(a!=null&&u(t,["name"],a),s(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function zE(e){const t={},n=s(e,["mode"]);n!=null&&u(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);if(i!=null&&u(t,["allowedFunctionNames"],i),s(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function qE(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&u(t,["description"],n);const i=s(e,["name"]);i!=null&&u(t,["name"],i);const a=s(e,["parameters"]);a!=null&&u(t,["parameters"],a);const o=s(e,["parametersJsonSchema"]);o!=null&&u(t,["parametersJsonSchema"],o);const l=s(e,["response"]);l!=null&&u(t,["response"],l);const r=s(e,["responseJsonSchema"]);return r!=null&&u(t,["responseJsonSchema"],r),t}function VE(e,t,n){const i={},a=s(t,["systemInstruction"]);n!==void 0&&a!=null&&u(n,["systemInstruction"],Js(ut(a)));const o=s(t,["temperature"]);o!=null&&u(i,["temperature"],o);const l=s(t,["topP"]);l!=null&&u(i,["topP"],l);const r=s(t,["topK"]);r!=null&&u(i,["topK"],r);const c=s(t,["candidateCount"]);c!=null&&u(i,["candidateCount"],c);const d=s(t,["maxOutputTokens"]);d!=null&&u(i,["maxOutputTokens"],d);const f=s(t,["stopSequences"]);f!=null&&u(i,["stopSequences"],f);const m=s(t,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const h=s(t,["logprobs"]);h!=null&&u(i,["logprobs"],h);const g=s(t,["presencePenalty"]);g!=null&&u(i,["presencePenalty"],g);const _=s(t,["frequencyPenalty"]);_!=null&&u(i,["frequencyPenalty"],_);const b=s(t,["seed"]);b!=null&&u(i,["seed"],b);const T=s(t,["responseMimeType"]);T!=null&&u(i,["responseMimeType"],T);const x=s(t,["responseSchema"]);x!=null&&u(i,["responseSchema"],yd(x));const v=s(t,["responseJsonSchema"]);if(v!=null&&u(i,["responseJsonSchema"],v),s(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const y=s(t,["safetySettings"]);if(n!==void 0&&y!=null){let z=y;Array.isArray(z)&&(z=z.map($=>kA($))),u(n,["safetySettings"],z)}const S=s(t,["tools"]);if(n!==void 0&&S!=null){let z=Ja(S);Array.isArray(z)&&(z=z.map($=>OA(Ya($)))),u(n,["tools"],z)}const E=s(t,["toolConfig"]);if(n!==void 0&&E!=null&&u(n,["toolConfig"],PA(E)),s(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=s(t,["cachedContent"]);n!==void 0&&A!=null&&u(n,["cachedContent"],Bn(e,A));const C=s(t,["responseModalities"]);C!=null&&u(i,["responseModalities"],C);const R=s(t,["mediaResolution"]);R!=null&&u(i,["mediaResolution"],R);const N=s(t,["speechConfig"]);if(N!=null&&u(i,["speechConfig"],_d(N)),s(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=s(t,["thinkingConfig"]);M!=null&&u(i,["thinkingConfig"],M);const L=s(t,["imageConfig"]);L!=null&&u(i,["imageConfig"],gA(L));const O=s(t,["enableEnhancedCivicAnswers"]);return O!=null&&u(i,["enableEnhancedCivicAnswers"],O),i}function FE(e,t,n){const i={},a=s(t,["systemInstruction"]);n!==void 0&&a!=null&&u(n,["systemInstruction"],ut(a));const o=s(t,["temperature"]);o!=null&&u(i,["temperature"],o);const l=s(t,["topP"]);l!=null&&u(i,["topP"],l);const r=s(t,["topK"]);r!=null&&u(i,["topK"],r);const c=s(t,["candidateCount"]);c!=null&&u(i,["candidateCount"],c);const d=s(t,["maxOutputTokens"]);d!=null&&u(i,["maxOutputTokens"],d);const f=s(t,["stopSequences"]);f!=null&&u(i,["stopSequences"],f);const m=s(t,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const h=s(t,["logprobs"]);h!=null&&u(i,["logprobs"],h);const g=s(t,["presencePenalty"]);g!=null&&u(i,["presencePenalty"],g);const _=s(t,["frequencyPenalty"]);_!=null&&u(i,["frequencyPenalty"],_);const b=s(t,["seed"]);b!=null&&u(i,["seed"],b);const T=s(t,["responseMimeType"]);T!=null&&u(i,["responseMimeType"],T);const x=s(t,["responseSchema"]);x!=null&&u(i,["responseSchema"],yd(x));const v=s(t,["responseJsonSchema"]);v!=null&&u(i,["responseJsonSchema"],v);const y=s(t,["routingConfig"]);y!=null&&u(i,["routingConfig"],y);const S=s(t,["modelSelectionConfig"]);S!=null&&u(i,["modelConfig"],S);const E=s(t,["safetySettings"]);if(n!==void 0&&E!=null){let w=E;Array.isArray(w)&&(w=w.map(U=>U)),u(n,["safetySettings"],w)}const A=s(t,["tools"]);if(n!==void 0&&A!=null){let w=Ja(A);Array.isArray(w)&&(w=w.map(U=>Gv(Ya(U)))),u(n,["tools"],w)}const C=s(t,["toolConfig"]);n!==void 0&&C!=null&&u(n,["toolConfig"],C);const R=s(t,["labels"]);n!==void 0&&R!=null&&u(n,["labels"],R);const N=s(t,["cachedContent"]);n!==void 0&&N!=null&&u(n,["cachedContent"],Bn(e,N));const M=s(t,["responseModalities"]);M!=null&&u(i,["responseModalities"],M);const L=s(t,["mediaResolution"]);L!=null&&u(i,["mediaResolution"],L);const O=s(t,["speechConfig"]);O!=null&&u(i,["speechConfig"],Uv(_d(O)));const z=s(t,["audioTimestamp"]);z!=null&&u(i,["audioTimestamp"],z);const $=s(t,["thinkingConfig"]);$!=null&&u(i,["thinkingConfig"],$);const G=s(t,["imageConfig"]);if(G!=null&&u(i,["imageConfig"],vA(G)),s(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function wh(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["contents"]);if(a!=null){let l=$t(a);Array.isArray(l)&&(l=l.map(r=>Js(r))),u(n,["contents"],l)}const o=s(t,["config"]);return o!=null&&u(n,["generationConfig"],VE(e,o,n)),n}function Ih(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["contents"]);if(a!=null){let l=$t(a);Array.isArray(l)&&(l=l.map(r=>r)),u(n,["contents"],l)}const o=s(t,["config"]);return o!=null&&u(n,["generationConfig"],FE(e,o,n)),n}function Rh(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>fE(d))),u(t,["candidates"],c)}const a=s(e,["modelVersion"]);a!=null&&u(t,["modelVersion"],a);const o=s(e,["promptFeedback"]);o!=null&&u(t,["promptFeedback"],o);const l=s(e,["responseId"]);l!=null&&u(t,["responseId"],l);const r=s(e,["usageMetadata"]);return r!=null&&u(t,["usageMetadata"],r),t}function Mh(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>f)),u(t,["candidates"],d)}const a=s(e,["createTime"]);a!=null&&u(t,["createTime"],a);const o=s(e,["modelVersion"]);o!=null&&u(t,["modelVersion"],o);const l=s(e,["promptFeedback"]);l!=null&&u(t,["promptFeedback"],l);const r=s(e,["responseId"]);r!=null&&u(t,["responseId"],r);const c=s(e,["usageMetadata"]);return c!=null&&u(t,["usageMetadata"],c),t}function YE(e,t){const n={};if(s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=s(e,["numberOfImages"]);t!==void 0&&i!=null&&u(t,["parameters","sampleCount"],i);const a=s(e,["aspectRatio"]);t!==void 0&&a!=null&&u(t,["parameters","aspectRatio"],a);const o=s(e,["guidanceScale"]);if(t!==void 0&&o!=null&&u(t,["parameters","guidanceScale"],o),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=s(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&u(t,["parameters","safetySetting"],l);const r=s(e,["personGeneration"]);t!==void 0&&r!=null&&u(t,["parameters","personGeneration"],r);const c=s(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&u(t,["parameters","includeSafetyAttributes"],c);const d=s(e,["includeRaiReason"]);t!==void 0&&d!=null&&u(t,["parameters","includeRaiReason"],d);const f=s(e,["language"]);t!==void 0&&f!=null&&u(t,["parameters","language"],f);const m=s(e,["outputMimeType"]);t!==void 0&&m!=null&&u(t,["parameters","outputOptions","mimeType"],m);const h=s(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&u(t,["parameters","outputOptions","compressionQuality"],h),s(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=s(e,["imageSize"]);if(t!==void 0&&g!=null&&u(t,["parameters","sampleImageSize"],g),s(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function JE(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&u(t,["parameters","storageUri"],i);const a=s(e,["negativePrompt"]);t!==void 0&&a!=null&&u(t,["parameters","negativePrompt"],a);const o=s(e,["numberOfImages"]);t!==void 0&&o!=null&&u(t,["parameters","sampleCount"],o);const l=s(e,["aspectRatio"]);t!==void 0&&l!=null&&u(t,["parameters","aspectRatio"],l);const r=s(e,["guidanceScale"]);t!==void 0&&r!=null&&u(t,["parameters","guidanceScale"],r);const c=s(e,["seed"]);t!==void 0&&c!=null&&u(t,["parameters","seed"],c);const d=s(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&u(t,["parameters","safetySetting"],d);const f=s(e,["personGeneration"]);t!==void 0&&f!=null&&u(t,["parameters","personGeneration"],f);const m=s(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&u(t,["parameters","includeSafetyAttributes"],m);const h=s(e,["includeRaiReason"]);t!==void 0&&h!=null&&u(t,["parameters","includeRaiReason"],h);const g=s(e,["language"]);t!==void 0&&g!=null&&u(t,["parameters","language"],g);const _=s(e,["outputMimeType"]);t!==void 0&&_!=null&&u(t,["parameters","outputOptions","mimeType"],_);const b=s(e,["outputCompressionQuality"]);t!==void 0&&b!=null&&u(t,["parameters","outputOptions","compressionQuality"],b);const T=s(e,["addWatermark"]);t!==void 0&&T!=null&&u(t,["parameters","addWatermark"],T);const x=s(e,["labels"]);t!==void 0&&x!=null&&u(t,["labels"],x);const v=s(e,["imageSize"]);t!==void 0&&v!=null&&u(t,["parameters","sampleImageSize"],v);const y=s(e,["enhancePrompt"]);return t!==void 0&&y!=null&&u(t,["parameters","enhancePrompt"],y),n}function KE(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["prompt"]);a!=null&&u(n,["instances[0]","prompt"],a);const o=s(t,["config"]);return o!=null&&YE(o,n),n}function $E(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["prompt"]);a!=null&&u(n,["instances[0]","prompt"],a);const o=s(t,["config"]);return o!=null&&JE(o,n),n}function jE(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>sA(l))),u(t,["generatedImages"],o)}const a=s(e,["positivePromptSafetyAttributes"]);return a!=null&&u(t,["positivePromptSafetyAttributes"],kv(a)),t}function XE(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Ks(l))),u(t,["generatedImages"],o)}const a=s(e,["positivePromptSafetyAttributes"]);return a!=null&&u(t,["positivePromptSafetyAttributes"],Lv(a)),t}function QE(e,t){const n={},i=s(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&u(t,["parameters","sampleCount"],i),s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=s(e,["durationSeconds"]);if(t!==void 0&&a!=null&&u(t,["parameters","durationSeconds"],a),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=s(e,["aspectRatio"]);t!==void 0&&o!=null&&u(t,["parameters","aspectRatio"],o);const l=s(e,["resolution"]);t!==void 0&&l!=null&&u(t,["parameters","resolution"],l);const r=s(e,["personGeneration"]);if(t!==void 0&&r!=null&&u(t,["parameters","personGeneration"],r),s(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=s(e,["negativePrompt"]);t!==void 0&&c!=null&&u(t,["parameters","negativePrompt"],c);const d=s(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&u(t,["parameters","enhancePrompt"],d),s(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=s(e,["lastFrame"]);t!==void 0&&f!=null&&u(t,["instances[0]","lastFrame"],$s(f));const m=s(e,["referenceImages"]);if(t!==void 0&&m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>ZA(g))),u(t,["instances[0]","referenceImages"],h)}if(s(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(s(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function WE(e,t){const n={},i=s(e,["numberOfVideos"]);t!==void 0&&i!=null&&u(t,["parameters","sampleCount"],i);const a=s(e,["outputGcsUri"]);t!==void 0&&a!=null&&u(t,["parameters","storageUri"],a);const o=s(e,["fps"]);t!==void 0&&o!=null&&u(t,["parameters","fps"],o);const l=s(e,["durationSeconds"]);t!==void 0&&l!=null&&u(t,["parameters","durationSeconds"],l);const r=s(e,["seed"]);t!==void 0&&r!=null&&u(t,["parameters","seed"],r);const c=s(e,["aspectRatio"]);t!==void 0&&c!=null&&u(t,["parameters","aspectRatio"],c);const d=s(e,["resolution"]);t!==void 0&&d!=null&&u(t,["parameters","resolution"],d);const f=s(e,["personGeneration"]);t!==void 0&&f!=null&&u(t,["parameters","personGeneration"],f);const m=s(e,["pubsubTopic"]);t!==void 0&&m!=null&&u(t,["parameters","pubsubTopic"],m);const h=s(e,["negativePrompt"]);t!==void 0&&h!=null&&u(t,["parameters","negativePrompt"],h);const g=s(e,["enhancePrompt"]);t!==void 0&&g!=null&&u(t,["parameters","enhancePrompt"],g);const _=s(e,["generateAudio"]);t!==void 0&&_!=null&&u(t,["parameters","generateAudio"],_);const b=s(e,["lastFrame"]);t!==void 0&&b!=null&&u(t,["instances[0]","lastFrame"],an(b));const T=s(e,["referenceImages"]);if(t!==void 0&&T!=null){let y=T;Array.isArray(y)&&(y=y.map(S=>e1(S))),u(t,["instances[0]","referenceImages"],y)}const x=s(e,["mask"]);t!==void 0&&x!=null&&u(t,["instances[0]","mask"],WA(x));const v=s(e,["compressionQuality"]);return t!==void 0&&v!=null&&u(t,["parameters","compressionQuality"],v),n}function ZE(e){const t={},n=s(e,["name"]);n!=null&&u(t,["name"],n);const i=s(e,["metadata"]);i!=null&&u(t,["metadata"],i);const a=s(e,["done"]);a!=null&&u(t,["done"],a);const o=s(e,["error"]);o!=null&&u(t,["error"],o);const l=s(e,["response","generateVideoResponse"]);return l!=null&&u(t,["response"],iA(l)),t}function eA(e){const t={},n=s(e,["name"]);n!=null&&u(t,["name"],n);const i=s(e,["metadata"]);i!=null&&u(t,["metadata"],i);const a=s(e,["done"]);a!=null&&u(t,["done"],a);const o=s(e,["error"]);o!=null&&u(t,["error"],o);const l=s(e,["response"]);return l!=null&&u(t,["response"],aA(l)),t}function tA(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["prompt"]);a!=null&&u(n,["instances[0]","prompt"],a);const o=s(t,["image"]);o!=null&&u(n,["instances[0]","image"],$s(o));const l=s(t,["video"]);l!=null&&u(n,["instances[0]","video"],Hv(l));const r=s(t,["source"]);r!=null&&oA(r,n);const c=s(t,["config"]);return c!=null&&QE(c,n),n}function nA(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["prompt"]);a!=null&&u(n,["instances[0]","prompt"],a);const o=s(t,["image"]);o!=null&&u(n,["instances[0]","image"],an(o));const l=s(t,["video"]);l!=null&&u(n,["instances[0]","video"],Bv(l));const r=s(t,["source"]);r!=null&&lA(r,n);const c=s(t,["config"]);return c!=null&&WE(c,n),n}function iA(e){const t={},n=s(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>uA(l))),u(t,["generatedVideos"],o)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&u(t,["raiMediaFilteredCount"],i);const a=s(e,["raiMediaFilteredReasons"]);return a!=null&&u(t,["raiMediaFilteredReasons"],a),t}function aA(e){const t={},n=s(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>cA(l))),u(t,["generatedVideos"],o)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&u(t,["raiMediaFilteredCount"],i);const a=s(e,["raiMediaFilteredReasons"]);return a!=null&&u(t,["raiMediaFilteredReasons"],a),t}function oA(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&u(t,["instances[0]","prompt"],i);const a=s(e,["image"]);t!==void 0&&a!=null&&u(t,["instances[0]","image"],$s(a));const o=s(e,["video"]);return t!==void 0&&o!=null&&u(t,["instances[0]","video"],Hv(o)),n}function lA(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&u(t,["instances[0]","prompt"],i);const a=s(e,["image"]);t!==void 0&&a!=null&&u(t,["instances[0]","image"],an(a));const o=s(e,["video"]);return t!==void 0&&o!=null&&u(t,["instances[0]","video"],Bv(o)),n}function sA(e){const t={},n=s(e,["_self"]);n!=null&&u(t,["image"],yA(n));const i=s(e,["raiFilteredReason"]);i!=null&&u(t,["raiFilteredReason"],i);const a=s(e,["_self"]);return a!=null&&u(t,["safetyAttributes"],kv(a)),t}function Ks(e){const t={},n=s(e,["_self"]);n!=null&&u(t,["image"],Dv(n));const i=s(e,["raiFilteredReason"]);i!=null&&u(t,["raiFilteredReason"],i);const a=s(e,["_self"]);a!=null&&u(t,["safetyAttributes"],Lv(a));const o=s(e,["prompt"]);return o!=null&&u(t,["enhancedPrompt"],o),t}function rA(e){const t={},n=s(e,["_self"]);n!=null&&u(t,["mask"],Dv(n));const i=s(e,["labels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),u(t,["labels"],a)}return t}function uA(e){const t={},n=s(e,["video"]);return n!=null&&u(t,["video"],XA(n)),t}function cA(e){const t={},n=s(e,["_self"]);return n!=null&&u(t,["video"],QA(n)),t}function dA(e){const t={},n=s(e,["modelSelectionConfig"]);n!=null&&u(t,["modelConfig"],n);const i=s(e,["responseJsonSchema"]);i!=null&&u(t,["responseJsonSchema"],i);const a=s(e,["audioTimestamp"]);a!=null&&u(t,["audioTimestamp"],a);const o=s(e,["candidateCount"]);o!=null&&u(t,["candidateCount"],o);const l=s(e,["enableAffectiveDialog"]);l!=null&&u(t,["enableAffectiveDialog"],l);const r=s(e,["frequencyPenalty"]);r!=null&&u(t,["frequencyPenalty"],r);const c=s(e,["logprobs"]);c!=null&&u(t,["logprobs"],c);const d=s(e,["maxOutputTokens"]);d!=null&&u(t,["maxOutputTokens"],d);const f=s(e,["mediaResolution"]);f!=null&&u(t,["mediaResolution"],f);const m=s(e,["presencePenalty"]);m!=null&&u(t,["presencePenalty"],m);const h=s(e,["responseLogprobs"]);h!=null&&u(t,["responseLogprobs"],h);const g=s(e,["responseMimeType"]);g!=null&&u(t,["responseMimeType"],g);const _=s(e,["responseModalities"]);_!=null&&u(t,["responseModalities"],_);const b=s(e,["responseSchema"]);b!=null&&u(t,["responseSchema"],b);const T=s(e,["routingConfig"]);T!=null&&u(t,["routingConfig"],T);const x=s(e,["seed"]);x!=null&&u(t,["seed"],x);const v=s(e,["speechConfig"]);v!=null&&u(t,["speechConfig"],Uv(v));const y=s(e,["stopSequences"]);y!=null&&u(t,["stopSequences"],y);const S=s(e,["temperature"]);S!=null&&u(t,["temperature"],S);const E=s(e,["thinkingConfig"]);E!=null&&u(t,["thinkingConfig"],E);const A=s(e,["topK"]);A!=null&&u(t,["topK"],A);const C=s(e,["topP"]);if(C!=null&&u(t,["topP"],C),s(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function fA(e,t){const n={},i=s(t,["model"]);return i!=null&&u(n,["_url","name"],re(e,i)),n}function pA(e,t){const n={},i=s(t,["model"]);return i!=null&&u(n,["_url","name"],re(e,i)),n}function hA(e){const t={};if(s(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=s(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function mA(e){const t={};if(s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=s(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function gA(e){const t={},n=s(e,["aspectRatio"]);n!=null&&u(t,["aspectRatio"],n);const i=s(e,["imageSize"]);if(i!=null&&u(t,["imageSize"],i),s(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(s(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function vA(e){const t={},n=s(e,["aspectRatio"]);n!=null&&u(t,["aspectRatio"],n);const i=s(e,["imageSize"]);i!=null&&u(t,["imageSize"],i);const a=s(e,["outputMimeType"]);a!=null&&u(t,["imageOutputOptions","mimeType"],a);const o=s(e,["outputCompressionQuality"]);return o!=null&&u(t,["imageOutputOptions","compressionQuality"],o),t}function yA(e){const t={},n=s(e,["bytesBase64Encoded"]);n!=null&&u(t,["imageBytes"],yi(n));const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function Dv(e){const t={},n=s(e,["gcsUri"]);n!=null&&u(t,["gcsUri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&u(t,["imageBytes"],yi(i));const a=s(e,["mimeType"]);return a!=null&&u(t,["mimeType"],a),t}function $s(e){const t={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=s(e,["imageBytes"]);n!=null&&u(t,["bytesBase64Encoded"],yi(n));const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function an(e){const t={},n=s(e,["gcsUri"]);n!=null&&u(t,["gcsUri"],n);const i=s(e,["imageBytes"]);i!=null&&u(t,["bytesBase64Encoded"],yi(i));const a=s(e,["mimeType"]);return a!=null&&u(t,["mimeType"],a),t}function _A(e,t,n){const i={},a=s(t,["pageSize"]);n!==void 0&&a!=null&&u(n,["_query","pageSize"],a);const o=s(t,["pageToken"]);n!==void 0&&o!=null&&u(n,["_query","pageToken"],o);const l=s(t,["filter"]);n!==void 0&&l!=null&&u(n,["_query","filter"],l);const r=s(t,["queryBase"]);return n!==void 0&&r!=null&&u(n,["_url","models_url"],Cv(e,r)),i}function xA(e,t,n){const i={},a=s(t,["pageSize"]);n!==void 0&&a!=null&&u(n,["_query","pageSize"],a);const o=s(t,["pageToken"]);n!==void 0&&o!=null&&u(n,["_query","pageToken"],o);const l=s(t,["filter"]);n!==void 0&&l!=null&&u(n,["_query","filter"],l);const r=s(t,["queryBase"]);return n!==void 0&&r!=null&&u(n,["_url","models_url"],Cv(e,r)),i}function SA(e,t){const n={},i=s(t,["config"]);return i!=null&&_A(e,i,n),n}function bA(e,t){const n={},i=s(t,["config"]);return i!=null&&xA(e,i,n),n}function TA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const a=s(e,["_self"]);if(a!=null){let o=Ev(a);Array.isArray(o)&&(o=o.map(l=>Wu(l))),u(t,["models"],o)}return t}function CA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const a=s(e,["_self"]);if(a!=null){let o=Ev(a);Array.isArray(o)&&(o=o.map(l=>Zu(l))),u(t,["models"],o)}return t}function EA(e){const t={},n=s(e,["maskMode"]);n!=null&&u(t,["maskMode"],n);const i=s(e,["segmentationClasses"]);i!=null&&u(t,["maskClasses"],i);const a=s(e,["maskDilation"]);return a!=null&&u(t,["dilation"],a),t}function Wu(e){const t={},n=s(e,["name"]);n!=null&&u(t,["name"],n);const i=s(e,["displayName"]);i!=null&&u(t,["displayName"],i);const a=s(e,["description"]);a!=null&&u(t,["description"],a);const o=s(e,["version"]);o!=null&&u(t,["version"],o);const l=s(e,["_self"]);l!=null&&u(t,["tunedModelInfo"],zA(l));const r=s(e,["inputTokenLimit"]);r!=null&&u(t,["inputTokenLimit"],r);const c=s(e,["outputTokenLimit"]);c!=null&&u(t,["outputTokenLimit"],c);const d=s(e,["supportedGenerationMethods"]);d!=null&&u(t,["supportedActions"],d);const f=s(e,["temperature"]);f!=null&&u(t,["temperature"],f);const m=s(e,["maxTemperature"]);m!=null&&u(t,["maxTemperature"],m);const h=s(e,["topP"]);h!=null&&u(t,["topP"],h);const g=s(e,["topK"]);g!=null&&u(t,["topK"],g);const _=s(e,["thinking"]);return _!=null&&u(t,["thinking"],_),t}function Zu(e){const t={},n=s(e,["name"]);n!=null&&u(t,["name"],n);const i=s(e,["displayName"]);i!=null&&u(t,["displayName"],i);const a=s(e,["description"]);a!=null&&u(t,["description"],a);const o=s(e,["versionId"]);o!=null&&u(t,["version"],o);const l=s(e,["deployedModels"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>BE(h))),u(t,["endpoints"],m)}const r=s(e,["labels"]);r!=null&&u(t,["labels"],r);const c=s(e,["_self"]);c!=null&&u(t,["tunedModelInfo"],qA(c));const d=s(e,["defaultCheckpointId"]);d!=null&&u(t,["defaultCheckpointId"],d);const f=s(e,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>h)),u(t,["checkpoints"],m)}return t}function AA(e){const t={},n=s(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const i=s(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const a=s(e,["executableCode"]);a!=null&&u(t,["executableCode"],a);const o=s(e,["fileData"]);o!=null&&u(t,["fileData"],PE(o));const l=s(e,["functionCall"]);l!=null&&u(t,["functionCall"],OE(l));const r=s(e,["functionResponse"]);r!=null&&u(t,["functionResponse"],r);const c=s(e,["inlineData"]);c!=null&&u(t,["inlineData"],dE(c));const d=s(e,["text"]);d!=null&&u(t,["text"],d);const f=s(e,["thought"]);f!=null&&u(t,["thought"],f);const m=s(e,["thoughtSignature"]);m!=null&&u(t,["thoughtSignature"],m);const h=s(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function NA(e){const t={},n=s(e,["productImage"]);return n!=null&&u(t,["image"],an(n)),t}function wA(e,t){const n={},i=s(e,["numberOfImages"]);t!==void 0&&i!=null&&u(t,["parameters","sampleCount"],i);const a=s(e,["baseSteps"]);t!==void 0&&a!=null&&u(t,["parameters","baseSteps"],a);const o=s(e,["outputGcsUri"]);t!==void 0&&o!=null&&u(t,["parameters","storageUri"],o);const l=s(e,["seed"]);t!==void 0&&l!=null&&u(t,["parameters","seed"],l);const r=s(e,["safetyFilterLevel"]);t!==void 0&&r!=null&&u(t,["parameters","safetySetting"],r);const c=s(e,["personGeneration"]);t!==void 0&&c!=null&&u(t,["parameters","personGeneration"],c);const d=s(e,["addWatermark"]);t!==void 0&&d!=null&&u(t,["parameters","addWatermark"],d);const f=s(e,["outputMimeType"]);t!==void 0&&f!=null&&u(t,["parameters","outputOptions","mimeType"],f);const m=s(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&u(t,["parameters","outputOptions","compressionQuality"],m);const h=s(e,["enhancePrompt"]);t!==void 0&&h!=null&&u(t,["parameters","enhancePrompt"],h);const g=s(e,["labels"]);return t!==void 0&&g!=null&&u(t,["labels"],g),n}function IA(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["source"]);a!=null&&MA(a,n);const o=s(t,["config"]);return o!=null&&wA(o,n),n}function RA(e){const t={},n=s(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Ks(a))),u(t,["generatedImages"],i)}return t}function MA(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&u(t,["instances[0]","prompt"],i);const a=s(e,["personImage"]);t!==void 0&&a!=null&&u(t,["instances[0]","personImage","image"],an(a));const o=s(e,["productImages"]);if(t!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(r=>NA(r))),u(t,["instances[0]","productImages"],l)}return n}function DA(e){const t={},n=s(e,["referenceImage"]);n!=null&&u(t,["referenceImage"],an(n));const i=s(e,["referenceId"]);i!=null&&u(t,["referenceId"],i);const a=s(e,["referenceType"]);a!=null&&u(t,["referenceType"],a);const o=s(e,["maskImageConfig"]);o!=null&&u(t,["maskImageConfig"],EA(o));const l=s(e,["controlImageConfig"]);l!=null&&u(t,["controlImageConfig"],yE(l));const r=s(e,["styleImageConfig"]);r!=null&&u(t,["styleImageConfig"],r);const c=s(e,["subjectImageConfig"]);return c!=null&&u(t,["subjectImageConfig"],c),t}function kv(e){const t={},n=s(e,["safetyAttributes","categories"]);n!=null&&u(t,["categories"],n);const i=s(e,["safetyAttributes","scores"]);i!=null&&u(t,["scores"],i);const a=s(e,["contentType"]);return a!=null&&u(t,["contentType"],a),t}function Lv(e){const t={},n=s(e,["safetyAttributes","categories"]);n!=null&&u(t,["categories"],n);const i=s(e,["safetyAttributes","scores"]);i!=null&&u(t,["scores"],i);const a=s(e,["contentType"]);return a!=null&&u(t,["contentType"],a),t}function kA(e){const t={},n=s(e,["category"]);if(n!=null&&u(t,["category"],n),s(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=s(e,["threshold"]);return i!=null&&u(t,["threshold"],i),t}function LA(e){const t={},n=s(e,["image"]);return n!=null&&u(t,["image"],an(n)),t}function UA(e,t){const n={},i=s(e,["mode"]);t!==void 0&&i!=null&&u(t,["parameters","mode"],i);const a=s(e,["maxPredictions"]);t!==void 0&&a!=null&&u(t,["parameters","maxPredictions"],a);const o=s(e,["confidenceThreshold"]);t!==void 0&&o!=null&&u(t,["parameters","confidenceThreshold"],o);const l=s(e,["maskDilation"]);t!==void 0&&l!=null&&u(t,["parameters","maskDilation"],l);const r=s(e,["binaryColorThreshold"]);t!==void 0&&r!=null&&u(t,["parameters","binaryColorThreshold"],r);const c=s(e,["labels"]);return t!==void 0&&c!=null&&u(t,["labels"],c),n}function GA(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["source"]);a!=null&&BA(a,n);const o=s(t,["config"]);return o!=null&&UA(o,n),n}function HA(e){const t={},n=s(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>rA(a))),u(t,["generatedMasks"],i)}return t}function BA(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&u(t,["instances[0]","prompt"],i);const a=s(e,["image"]);t!==void 0&&a!=null&&u(t,["instances[0]","image"],an(a));const o=s(e,["scribbleImage"]);return t!==void 0&&o!=null&&u(t,["instances[0]","scribble"],LA(o)),n}function Uv(e){const t={},n=s(e,["voiceConfig"]);n!=null&&u(t,["voiceConfig"],n);const i=s(e,["languageCode"]);if(i!=null&&u(t,["languageCode"],i),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function PA(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&u(t,["functionCallingConfig"],zE(n));const i=s(e,["retrievalConfig"]);return i!=null&&u(t,["retrievalConfig"],i),t}function OA(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),u(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearchRetrieval"]);i!=null&&u(t,["googleSearchRetrieval"],i);const a=s(e,["computerUse"]);a!=null&&u(t,["computerUse"],a);const o=s(e,["fileSearch"]);o!=null&&u(t,["fileSearch"],o);const l=s(e,["codeExecution"]);if(l!=null&&u(t,["codeExecution"],l),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=s(e,["googleMaps"]);r!=null&&u(t,["googleMaps"],hA(r));const c=s(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],mA(c));const d=s(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}function Gv(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>qE(h))),u(t,["functionDeclarations"],m)}const i=s(e,["retrieval"]);i!=null&&u(t,["retrieval"],i);const a=s(e,["googleSearchRetrieval"]);a!=null&&u(t,["googleSearchRetrieval"],a);const o=s(e,["computerUse"]);if(o!=null&&u(t,["computerUse"],o),s(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=s(e,["codeExecution"]);l!=null&&u(t,["codeExecution"],l);const r=s(e,["enterpriseWebSearch"]);r!=null&&u(t,["enterpriseWebSearch"],r);const c=s(e,["googleMaps"]);c!=null&&u(t,["googleMaps"],c);const d=s(e,["googleSearch"]);d!=null&&u(t,["googleSearch"],d);const f=s(e,["urlContext"]);return f!=null&&u(t,["urlContext"],f),t}function zA(e){const t={},n=s(e,["baseModel"]);n!=null&&u(t,["baseModel"],n);const i=s(e,["createTime"]);i!=null&&u(t,["createTime"],i);const a=s(e,["updateTime"]);return a!=null&&u(t,["updateTime"],a),t}function qA(e){const t={},n=s(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(t,["baseModel"],n);const i=s(e,["createTime"]);i!=null&&u(t,["createTime"],i);const a=s(e,["updateTime"]);return a!=null&&u(t,["updateTime"],a),t}function VA(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&u(t,["displayName"],i);const a=s(e,["description"]);t!==void 0&&a!=null&&u(t,["description"],a);const o=s(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&u(t,["defaultCheckpointId"],o),n}function FA(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&u(t,["displayName"],i);const a=s(e,["description"]);t!==void 0&&a!=null&&u(t,["description"],a);const o=s(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&u(t,["defaultCheckpointId"],o),n}function YA(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","name"],re(e,i));const a=s(t,["config"]);return a!=null&&VA(a,n),n}function JA(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["config"]);return a!=null&&FA(a,n),n}function KA(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&u(t,["parameters","storageUri"],i);const a=s(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&u(t,["parameters","safetySetting"],a);const o=s(e,["personGeneration"]);t!==void 0&&o!=null&&u(t,["parameters","personGeneration"],o);const l=s(e,["includeRaiReason"]);t!==void 0&&l!=null&&u(t,["parameters","includeRaiReason"],l);const r=s(e,["outputMimeType"]);t!==void 0&&r!=null&&u(t,["parameters","outputOptions","mimeType"],r);const c=s(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&u(t,["parameters","outputOptions","compressionQuality"],c);const d=s(e,["enhanceInputImage"]);t!==void 0&&d!=null&&u(t,["parameters","upscaleConfig","enhanceInputImage"],d);const f=s(e,["imagePreservationFactor"]);t!==void 0&&f!=null&&u(t,["parameters","upscaleConfig","imagePreservationFactor"],f);const m=s(e,["labels"]);t!==void 0&&m!=null&&u(t,["labels"],m);const h=s(e,["numberOfImages"]);t!==void 0&&h!=null&&u(t,["parameters","sampleCount"],h);const g=s(e,["mode"]);return t!==void 0&&g!=null&&u(t,["parameters","mode"],g),n}function $A(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["_url","model"],re(e,i));const a=s(t,["image"]);a!=null&&u(n,["instances[0]","image"],an(a));const o=s(t,["upscaleFactor"]);o!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=s(t,["config"]);return l!=null&&KA(l,n),n}function jA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Ks(o))),u(t,["generatedImages"],a)}return t}function XA(e){const t={},n=s(e,["uri"]);n!=null&&u(t,["uri"],n);const i=s(e,["encodedVideo"]);i!=null&&u(t,["videoBytes"],yi(i));const a=s(e,["encoding"]);return a!=null&&u(t,["mimeType"],a),t}function QA(e){const t={},n=s(e,["gcsUri"]);n!=null&&u(t,["uri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&u(t,["videoBytes"],yi(i));const a=s(e,["mimeType"]);return a!=null&&u(t,["mimeType"],a),t}function WA(e){const t={},n=s(e,["image"]);n!=null&&u(t,["_self"],an(n));const i=s(e,["maskMode"]);return i!=null&&u(t,["maskMode"],i),t}function ZA(e){const t={},n=s(e,["image"]);n!=null&&u(t,["image"],$s(n));const i=s(e,["referenceType"]);return i!=null&&u(t,["referenceType"],i),t}function e1(e){const t={},n=s(e,["image"]);n!=null&&u(t,["image"],an(n));const i=s(e,["referenceType"]);return i!=null&&u(t,["referenceType"],i),t}function Hv(e){const t={},n=s(e,["uri"]);n!=null&&u(t,["uri"],n);const i=s(e,["videoBytes"]);i!=null&&u(t,["encodedVideo"],yi(i));const a=s(e,["mimeType"]);return a!=null&&u(t,["encoding"],a),t}function Bv(e){const t={},n=s(e,["uri"]);n!=null&&u(t,["gcsUri"],n);const i=s(e,["videoBytes"]);i!=null&&u(t,["bytesBase64Encoded"],yi(i));const a=s(e,["mimeType"]);return a!=null&&u(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t1(e,t){const n={},i=s(e,["displayName"]);return t!==void 0&&i!=null&&u(t,["displayName"],i),n}function n1(e){const t={},n=s(e,["config"]);return n!=null&&t1(n,t),t}function i1(e,t){const n={},i=s(e,["force"]);return t!==void 0&&i!=null&&u(t,["_query","force"],i),n}function a1(e){const t={},n=s(e,["name"]);n!=null&&u(t,["_url","name"],n);const i=s(e,["config"]);return i!=null&&i1(i,t),t}function o1(e){const t={},n=s(e,["name"]);return n!=null&&u(t,["_url","name"],n),t}function l1(e,t){const n={},i=s(e,["customMetadata"]);if(t!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),u(t,["customMetadata"],o)}const a=s(e,["chunkingConfig"]);return t!==void 0&&a!=null&&u(t,["chunkingConfig"],a),n}function s1(e){const t={},n=s(e,["name"]);n!=null&&u(t,["name"],n);const i=s(e,["metadata"]);i!=null&&u(t,["metadata"],i);const a=s(e,["done"]);a!=null&&u(t,["done"],a);const o=s(e,["error"]);o!=null&&u(t,["error"],o);const l=s(e,["response"]);return l!=null&&u(t,["response"],u1(l)),t}function r1(e){const t={},n=s(e,["fileSearchStoreName"]);n!=null&&u(t,["_url","file_search_store_name"],n);const i=s(e,["fileName"]);i!=null&&u(t,["fileName"],i);const a=s(e,["config"]);return a!=null&&l1(a,t),t}function u1(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["parent"]);i!=null&&u(t,["parent"],i);const a=s(e,["documentName"]);return a!=null&&u(t,["documentName"],a),t}function c1(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const a=s(e,["pageToken"]);return t!==void 0&&a!=null&&u(t,["_query","pageToken"],a),n}function d1(e){const t={},n=s(e,["config"]);return n!=null&&c1(n,t),t}function f1(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const a=s(e,["fileSearchStores"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),u(t,["fileSearchStores"],o)}return t}function Pv(e,t){const n={},i=s(e,["mimeType"]);t!==void 0&&i!=null&&u(t,["mimeType"],i);const a=s(e,["displayName"]);t!==void 0&&a!=null&&u(t,["displayName"],a);const o=s(e,["customMetadata"]);if(t!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>c)),u(t,["customMetadata"],r)}const l=s(e,["chunkingConfig"]);return t!==void 0&&l!=null&&u(t,["chunkingConfig"],l),n}function p1(e){const t={},n=s(e,["fileSearchStoreName"]);n!=null&&u(t,["_url","file_search_store_name"],n);const i=s(e,["config"]);return i!=null&&Pv(i,t),t}function h1(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m1="Content-Type",g1="X-Server-Timeout",v1="User-Agent",ec="x-goog-api-client",y1="1.33.0",_1=`google-genai-sdk/${y1}`,x1="v1beta1",S1="v1beta";class b1{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:x1,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:S1,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const a=[this.getRequestUrlInternal(n)];return i&&a.push(this.getBaseResourcePath()),t!==""&&a.push(t),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[l,r]of Object.entries(t.queryParams))a.searchParams.append(l,String(r));let o={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=t.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,a.toString(),t.abortSignal),this.unaryApiCall(a,o,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[a,o]of Object.entries(n))typeof o=="object"?i[a]=Object.assign(Object.assign({},i[a]),o):o!==void 0&&(i[a]=o);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,n,i);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let o={};return o.body=t.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,a.toString(),t.abortSignal),this.streamApiCall(a,o,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,a){if(n&&n.timeout||a){const o=new AbortController,l=o.signal;if(n.timeout&&n?.timeout>0){const r=setTimeout(()=>o.abort(),n.timeout);r&&typeof r.unref=="function"&&r.unref()}a&&a.addEventListener("abort",()=>{o.abort()}),t.signal=l}return n&&n.extraBody!==null&&T1(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await Dh(a),new ju(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await Dh(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(t){return Zt(this,arguments,function*(){var i;const a=(i=t?.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let l="";const r="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield J(a.read());if(d){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=o.decode(f,{stream:!0});try{const _=JSON.parse(m);if("error"in _){const b=JSON.parse(JSON.stringify(_.error)),T=b.status,x=b.code,v=`got status: ${T}. ${JSON.stringify(_)}`;if(x>=400&&x<600)throw new Ys({message:v,status:x})}}catch(_){if(_.name==="ApiError")throw _}l+=m;let h=-1,g=0;for(;;){h=-1,g=0;for(const T of c){const x=l.indexOf(T);x!==-1&&(h===-1||x<h)&&(h=x,g=T.length)}if(h===-1)break;const _=l.substring(0,h);l=l.substring(h+g);const b=_.trim();if(b.startsWith(r)){const T=b.substring(r.length).trim();try{const x=new Response(T,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield J(new ju(x))}catch(x){throw new Error(`exception parsing stream chunk ${T}. ${x}`)}}}}}finally{a.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=_1+" "+this.clientOptions.userAgentExtra;return t[v1]=n,t[ec]=n,t[m1]="application/json",t}async getHeadersInternal(t,n){const i=new Headers;if(t&&t.headers){for(const[a,o]of Object.entries(t.headers))i.append(a,o);t.timeout&&t.timeout>0&&i.append(g1,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(t){var n;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(t,n){var i;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const o=this.clientOptions.uploader,l=await o.stat(t);a.sizeBytes=String(l.size);const r=(i=n?.mimeType)!==null&&i!==void 0?i:l.type;if(r===void 0||r==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=r;const c={file:a},d=this.getFileName(t),f=H("upload/v1beta/files",c._url),m=await this.fetchUploadUrl(f,a.sizeBytes,a.mimeType,d,c,n?.httpOptions);return o.upload(t,m,this)}async uploadFileToFileSearchStore(t,n,i){var a;const o=this.clientOptions.uploader,l=await o.stat(n),r=String(l.size),c=(a=i?.mimeType)!==null&&a!==void 0?a:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${t}:uploadToFileSearchStore`,f=this.getFileName(n),m={};i!=null&&Pv(i,m);const h=await this.fetchUploadUrl(d,r,c,f,m,i?.httpOptions);return o.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i,a,o,l){var r;let c={};l?c=l:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},a?{"X-Goog-Upload-File-Name":a}:{})};const d=await this.request({path:t,body:JSON.stringify(o),httpMethod:"POST",httpOptions:c});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(r=d?.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Dh(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const a=JSON.stringify(i);throw n>=400&&n<600?new Ys({message:a,status:n}):new Error(a)}}function T1(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const o=JSON.parse(e.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const r=Object.assign({},o);for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c)){const d=l[c],f=r[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?r[c]=i(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),r[c]=d)}return r}const a=i(n,t);e.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C1="mcp_used/unknown";let E1=!1;function Ov(e){for(const t of e)if(A1(t)||typeof t=="object"&&"inputSchema"in t)return!0;return E1}function zv(e){var t;const n=(t=e[ec])!==null&&t!==void 0?t:"";e[ec]=(n+` ${C1}`).trimStart()}function A1(e){return e!==null&&typeof e=="object"&&e instanceof Sd}function N1(e){return Zt(this,arguments,function*(n,i=100){let a,o=0;for(;o<i;){const l=yield J(n.listTools({cursor:a}));for(const r of l.tools)yield yield J(r),o++;if(!l.nextCursor)break;a=l.nextCursor}})}class Sd{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Sd(t,n)}async initialize(){var t,n,i,a;if(this.mcpTools.length>0)return;const o={},l=[];for(const f of this.mcpClients)try{for(var r=!0,c=(n=void 0,en(N1(f))),d;d=await c.next(),t=d.done,!t;r=!0){a=d.value,r=!1;const m=a;l.push(m);const h=m.name;if(o[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);o[h]=f}}catch(m){n={error:m}}finally{try{!r&&!t&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),oT(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await a.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function w1(e,t,n){const i=new Qb;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(i,a),t(i)}class I1{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=D1(this.apiClient.getDefaultHeaders()),r=this.apiClient.getApiKey(),c=`${a}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${r}`;let d=()=>{};const f=new Promise(y=>{d=y}),m=t.callbacks,h=function(){d({})},g=this.apiClient,_={onopen:h,onmessage:y=>{w1(g,m.onmessage,y)},onerror:(n=m?.onerror)!==null&&n!==void 0?n:function(y){},onclose:(i=m?.onclose)!==null&&i!==void 0?i:function(y){}},b=this.webSocketFactory.create(c,M1(l),_);b.connect(),await f;const v={setup:{model:re(this.apiClient,t.model)}};return b.send(JSON.stringify(v)),new R1(b,this.apiClient)}}class R1{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=nE(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=tE(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(fa.PLAY)}pause(){this.sendPlaybackControl(fa.PAUSE)}stop(){this.sendPlaybackControl(fa.STOP)}resetContext(){this.sendPlaybackControl(fa.RESET_CONTEXT)}close(){this.conn.close()}}function M1(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function D1(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function L1(e,t,n){const i=new Xb;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const o=JSON.parse(a);if(e.isVertexAI()){const l=oE(o);Object.assign(i,l)}else Object.assign(i,o);t(i)}class U1{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new I1(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,a,o,l,r;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const m=this.apiClient.getHeaders();t.config&&t.config.tools&&Ov(t.config.tools)&&zv(m);const h=P1(m);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{const N=this.apiClient.getApiKey();let M="BidiGenerateContent",L="key";N?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",L="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${M}?${L}=${N}`}let g=()=>{};const _=new Promise(N=>{g=N}),b=t.callbacks,T=function(){var N;(N=b?.onopen)===null||N===void 0||N.call(b),g({})},x=this.apiClient,v={onopen:T,onmessage:N=>{L1(x,b.onmessage,N)},onerror:(n=b?.onerror)!==null&&n!==void 0?n:function(N){},onclose:(i=b?.onclose)!==null&&i!==void 0?i:function(N){}},y=this.webSocketFactory.create(f,B1(h),v);y.connect(),await _;let S=re(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const N=this.apiClient.getProject(),M=this.apiClient.getLocation();S=`projects/${N}/locations/${M}/`+S}let E={};this.apiClient.isVertexAI()&&((a=t.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Oo.AUDIO]}:t.config.responseModalities=[Oo.AUDIO]),!((o=t.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const A=(r=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&r!==void 0?r:[],C=[];for(const N of A)if(this.isCallableTool(N)){const M=N;C.push(await M.tool())}else C.push(N);C.length>0&&(t.config.tools=C);const R={model:S,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?E=eE(this.apiClient,R):E=ZC(this.apiClient,R),delete E.config,y.send(JSON.stringify(E)),new H1(y,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const G1={turnComplete:!0};class H1{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=$t(n.turns),t.isVertexAI()||(i=i.map(a=>Js(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(k1)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},G1),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:aE(t)}:n={realtimeInput:iE(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function B1(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function P1(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kh=10;function Lh(e){var t,n,i;if(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let a=!1;for(const l of(n=e?.tools)!==null&&n!==void 0?n:[])if(Ta(l)){a=!0;break}if(!a)return!0;const o=(i=e?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ta(e){return"callTool"in e&&typeof e.callTool=="function"}function O1(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(a=>Ta(a)))!==null&&i!==void 0?i:!1}function Uh(e){var t;const n=[];return!((t=e?.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((i,a)=>{if(Ta(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(a)}),n}function Gh(e){var t;return!(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z1 extends Hn{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,a,o,l,r;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!O1(n)||Lh(n.config))return await this.generateContentInternal(c);const d=Uh(n);if(d.length>0){const b=d.map(T=>`tools[${T}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let f,m;const h=$t(c.contents),g=(o=(a=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&o!==void 0?o:kh;let _=0;for(;_<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const b=f.candidates[0].content,T=[];for(const x of(r=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&r!==void 0?r:[])if(Ta(x)){const y=await x.callTool(f.functionCalls);T.push(...y)}_++,m={role:"user",parts:T},c.contents=$t(c.contents),c.contents.push(b),c.contents.push(m),Gh(c.config)&&(h.push(b),h.push(m))}return Gh(c.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var i,a,o,l,r;if(this.maybeMoveToResponseJsonSchem(n),Lh(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const c=Uh(n);if(c.length>0){const m=c.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(a=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,f=(r=(l=n?.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||r===void 0?void 0:r.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var a;let o;const l=[];if(i?.generatedImages)for(const c of i.generatedImages)c&&c?.safetyAttributes&&((a=c?.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?o=c?.safetyAttributes:l.push(c);let r;return o?r={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:r={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},r}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Ji(Un.PAGED_ITEM_MODELS,r=>this.listInternal(r),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var i,a,o,l,r,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((c=(r=n.source)===null||r===void 0?void 0:r.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,a;const o=(n=t.config)===null||n===void 0?void 0:n.tools;if(!o)return t;const l=await Promise.all(o.map(async c=>Ta(c)?await c.tool():c)),r={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(r.config.tools=l,t.config&&t.config.tools&&Ov(t.config.tools)){const c=(a=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&a!==void 0?a:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),zv(d),r.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return r}async initAfcToolsMap(t){var n,i,a;const o=new Map;for(const l of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ta(l)){const r=l,c=await r.tool();for(const d of(a=c.functionDeclarations)!==null&&a!==void 0?a:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,r)}}return o}async processAfcStream(t){var n,i,a;const o=(a=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:kh;let l=!1,r=0;const c=await this.initAfcToolsMap(t);return function(d,f,m){return Zt(this,arguments,function*(){for(var h,g,_,b,T,x;r<o;){l&&(r++,l=!1);const E=yield J(d.processParamsMaybeAddMcpUsage(m)),A=yield J(d.generateContentStreamInternal(E)),C=[],R=[];try{for(var v=!0,y=(g=void 0,en(A)),S;S=yield J(y.next()),h=S.done,!h;v=!0){b=S.value,v=!1;const N=b;if(yield yield J(N),N.candidates&&(!((T=N.candidates[0])===null||T===void 0)&&T.content)){R.push(N.candidates[0].content);for(const M of(x=N.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(r<o&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(M.functionCall.name)){const L=yield J(f.get(M.functionCall.name).callTool([M.functionCall]));C.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(N){g={error:N}}finally{try{!v&&!h&&(_=y.return)&&(yield J(_.call(y)))}finally{if(g)throw g.error}}if(C.length>0){l=!0;const N=new io;N.candidates=[{content:{role:"user",parts:C}}],yield yield J(N);const M=[];M.push(...R),M.push({role:"user",parts:C});const L=$t(m.contents).concat(M);m.contents=L}else break}})}(this,c,t)}async generateContentInternal(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=Ih(this.apiClient,t);return r=H("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=Mh(f),h=new io;return Object.assign(h,m),h})}else{const d=wh(this.apiClient,t);return r=H("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=Rh(f),h=new io;return Object.assign(h,m),h})}}async generateContentStreamInternal(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=Ih(this.apiClient,t);return r=H("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(m){return Zt(this,arguments,function*(){var h,g,_,b;try{for(var T=!0,x=en(m),v;v=yield J(x.next()),h=v.done,!h;T=!0){b=v.value,T=!1;const y=b,S=Mh(yield J(y.json()));S.sdkHttpResponse={headers:y.headers};const E=new io;Object.assign(E,S),yield yield J(E)}}catch(y){g={error:y}}finally{try{!T&&!h&&(_=x.return)&&(yield J(_.call(x)))}finally{if(g)throw g.error}}})})}else{const d=wh(this.apiClient,t);return r=H("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(m){return Zt(this,arguments,function*(){var h,g,_,b;try{for(var T=!0,x=en(m),v;v=yield J(x.next()),h=v.done,!h;T=!0){b=v.value,T=!1;const y=b,S=Rh(yield J(y.json()));S.sdkHttpResponse={headers:y.headers};const E=new io;Object.assign(E,S),yield yield J(E)}}catch(y){g={error:y}}finally{try{!T&&!h&&(_=x.return)&&(yield J(_.call(x)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=UE(this.apiClient,t);return r=H("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=HE(f),h=new dh;return Object.assign(h,m),h})}else{const d=LE(this.apiClient,t);return r=H("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=GE(f),h=new dh;return Object.assign(h,m),h})}}async generateImagesInternal(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=$E(this.apiClient,t);return r=H("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=XE(f),h=new fh;return Object.assign(h,m),h})}else{const d=KE(this.apiClient,t);return r=H("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=jE(f),h=new fh;return Object.assign(h,m),h})}}async editImageInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const r=RE(this.apiClient,t);return o=H("{model}:predict",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>{const d=ME(c),f=new Pb;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const r=$A(this.apiClient,t);return o=H("{model}:predict",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>{const d=jA(c),f=new Ob;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const r=IA(this.apiClient,t);return o=H("{model}:predict",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const d=RA(c),f=new zb;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const r=GA(this.apiClient,t);return o=H("{model}:predict",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const d=HA(c),f=new qb;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=pA(this.apiClient,t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>Zu(f))}else{const d=fA(this.apiClient,t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Wu(f))}}async listInternal(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=bA(this.apiClient,t);return r=H("{models_url}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=CA(f),h=new ph;return Object.assign(h,m),h})}else{const d=SA(this.apiClient,t);return r=H("{models_url}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=TA(f),h=new ph;return Object.assign(h,m),h})}}async update(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=JA(this.apiClient,t);return r=H("{model}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>Zu(f))}else{const d=YA(this.apiClient,t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Wu(f))}}async delete(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=AE(this.apiClient,t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=wE(f),h=new hh;return Object.assign(h,m),h})}else{const d=EE(this.apiClient,t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=NE(f),h=new hh;return Object.assign(h,m),h})}}async countTokens(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=bE(this.apiClient,t);return r=H("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=CE(f),h=new mh;return Object.assign(h,m),h})}else{const d=SE(this.apiClient,t);return r=H("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=TE(f),h=new mh;return Object.assign(h,m),h})}}async computeTokens(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const r=hE(this.apiClient,t);return o=H("{model}:computeTokens",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>{const d=mE(c),f=new Vb;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=nA(this.apiClient,t);return r=H("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>{const m=eA(f),h=new ys;return Object.assign(h,m),h})}else{const d=tA(this.apiClient,t);return r=H("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{const m=ZE(f),h=new ys;return Object.assign(h,m),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q1 extends Hn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=kb(t);return r=H("{operationName}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l}else{const d=Db(t);return r=H("{operationName}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l}}async fetchPredictVideosOperationInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const r=Eb(t);return o=H("{resourceName}:fetchPredictOperation",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V1(e){const t={},n=s(e,["data"]);if(n!=null&&u(t,["data"],n),s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function F1(e){const t={},n=s(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>Z1(o))),u(t,["parts"],a)}const i=s(e,["role"]);return i!=null&&u(t,["role"],i),t}function Y1(e,t,n){const i={},a=s(t,["expireTime"]);n!==void 0&&a!=null&&u(n,["expireTime"],a);const o=s(t,["newSessionExpireTime"]);n!==void 0&&o!=null&&u(n,["newSessionExpireTime"],o);const l=s(t,["uses"]);n!==void 0&&l!=null&&u(n,["uses"],l);const r=s(t,["liveConnectConstraints"]);n!==void 0&&r!=null&&u(n,["bidiGenerateContentSetup"],W1(e,r));const c=s(t,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),i}function J1(e,t){const n={},i=s(t,["config"]);return i!=null&&u(n,["config"],Y1(e,i,n)),n}function K1(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function $1(e){const t={},n=s(e,["id"]);n!=null&&u(t,["id"],n);const i=s(e,["args"]);i!=null&&u(t,["args"],i);const a=s(e,["name"]);if(a!=null&&u(t,["name"],a),s(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(s(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function j1(e){const t={};if(s(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=s(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function X1(e){const t={};if(s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=s(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function Q1(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig"],i);const a=s(e,["responseModalities"]);t!==void 0&&a!=null&&u(t,["setup","generationConfig","responseModalities"],a);const o=s(e,["temperature"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig","temperature"],o);const l=s(e,["topP"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topP"],l);const r=s(e,["topK"]);t!==void 0&&r!=null&&u(t,["setup","generationConfig","topK"],r);const c=s(e,["maxOutputTokens"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","maxOutputTokens"],c);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","mediaResolution"],d);const f=s(e,["seed"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","seed"],f);const m=s(e,["speechConfig"]);t!==void 0&&m!=null&&u(t,["setup","generationConfig","speechConfig"],xd(m));const h=s(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const g=s(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],g);const _=s(e,["systemInstruction"]);t!==void 0&&_!=null&&u(t,["setup","systemInstruction"],F1(ut(_)));const b=s(e,["tools"]);if(t!==void 0&&b!=null){let A=Ja(b);Array.isArray(A)&&(A=A.map(C=>tN(Ya(C)))),u(t,["setup","tools"],A)}const T=s(e,["sessionResumption"]);t!==void 0&&T!=null&&u(t,["setup","sessionResumption"],eN(T));const x=s(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&u(t,["setup","inputAudioTranscription"],x);const v=s(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&u(t,["setup","outputAudioTranscription"],v);const y=s(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&u(t,["setup","realtimeInputConfig"],y);const S=s(e,["contextWindowCompression"]);t!==void 0&&S!=null&&u(t,["setup","contextWindowCompression"],S);const E=s(e,["proactivity"]);if(t!==void 0&&E!=null&&u(t,["setup","proactivity"],E),s(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function W1(e,t){const n={},i=s(t,["model"]);i!=null&&u(n,["setup","model"],re(e,i));const a=s(t,["config"]);return a!=null&&u(n,["config"],Q1(a,n)),n}function Z1(e){const t={},n=s(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const i=s(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const a=s(e,["executableCode"]);a!=null&&u(t,["executableCode"],a);const o=s(e,["fileData"]);o!=null&&u(t,["fileData"],K1(o));const l=s(e,["functionCall"]);l!=null&&u(t,["functionCall"],$1(l));const r=s(e,["functionResponse"]);r!=null&&u(t,["functionResponse"],r);const c=s(e,["inlineData"]);c!=null&&u(t,["inlineData"],V1(c));const d=s(e,["text"]);d!=null&&u(t,["text"],d);const f=s(e,["thought"]);f!=null&&u(t,["thought"],f);const m=s(e,["thoughtSignature"]);m!=null&&u(t,["thoughtSignature"],m);const h=s(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function eN(e){const t={},n=s(e,["handle"]);if(n!=null&&u(t,["handle"],n),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function tN(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),u(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearchRetrieval"]);i!=null&&u(t,["googleSearchRetrieval"],i);const a=s(e,["computerUse"]);a!=null&&u(t,["computerUse"],a);const o=s(e,["fileSearch"]);o!=null&&u(t,["fileSearch"],o);const l=s(e,["codeExecution"]);if(l!=null&&u(t,["codeExecution"],l),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=s(e,["googleMaps"]);r!=null&&u(t,["googleMaps"],j1(r));const c=s(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],X1(c));const d=s(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nN(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const a=Object.keys(i).map(o=>`${n}.${o}`);t.push(...a)}else t.push(n)}return t.join(",")}function iN(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(e.bidiGenerateContentSetup=o,n=o):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const a=e.fieldMask;if(n){const o=nN(n);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)o?e.fieldMask=o:delete e.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let r=[];a.length>0&&(r=a.map(d=>l.includes(d)?`generationConfig.${d}`:d));const c=[];o&&c.push(o),r.length>0&&c.push(...r),c.length>0?e.fieldMask=c.join(","):delete e.fieldMask}else delete e.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?e.fieldMask=a.join(","):delete e.fieldMask;return e}class aN extends Hn{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const r=J1(this.apiClient,t);o=H("auth_tokens",r._url),l=r._query,delete r.config,delete r._url,delete r._query;const c=iN(r,t.config);return a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oN(e,t){const n={},i=s(e,["force"]);return t!==void 0&&i!=null&&u(t,["_query","force"],i),n}function lN(e){const t={},n=s(e,["name"]);n!=null&&u(t,["_url","name"],n);const i=s(e,["config"]);return i!=null&&oN(i,t),t}function sN(e){const t={},n=s(e,["name"]);return n!=null&&u(t,["_url","name"],n),t}function rN(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const a=s(e,["pageToken"]);return t!==void 0&&a!=null&&u(t,["_query","pageToken"],a),n}function uN(e){const t={},n=s(e,["parent"]);n!=null&&u(t,["_url","parent"],n);const i=s(e,["config"]);return i!=null&&rN(i,t),t}function cN(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const a=s(e,["documents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),u(t,["documents"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dN extends Hn{constructor(t){super(),this.apiClient=t,this.list=async n=>new Ji(Un.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=sN(t);return o=H("{name}",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(t){var n,i;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=lN(t);a=H("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=uN(t);return o=H("{parent}/documents",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const d=cN(c),f=new Fb;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fN extends Hn{constructor(t,n=new dN(t)){super(),this.apiClient=t,this.documents=n,this.list=async(i={})=>new Ji(Un.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=n1(t);return o=H("fileSearchStores",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async get(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=o1(t);return o=H("{name}",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(t){var n,i;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=a1(t);a=H("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=d1(t);return o=H("fileSearchStores",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const d=f1(c),f=new Yb;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=p1(t);return o=H("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const d=h1(c),f=new Jb;return Object.assign(f,d),f})}}async importFile(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=r1(t);return o=H("{file_search_store_name}:importFile",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const d=s1(c),f=new md;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let qv=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return qv=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const pN=()=>qv();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tc(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const nc=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xt extends Error{}class pt extends Xt{constructor(t,n,i,a){super(`${pt.makeMessage(t,n,i)}`),this.status=t,this.headers=a,this.error=n}static makeMessage(t,n,i){const a=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&a?`${t} ${a}`:t?`${t} status code (no body)`:a||"(no status code or body)"}static generate(t,n,i,a){if(!t||!a)return new js({message:i,cause:nc(n)});const o=n;return t===400?new Fv(t,o,i,a):t===401?new Yv(t,o,i,a):t===403?new Jv(t,o,i,a):t===404?new Kv(t,o,i,a):t===409?new $v(t,o,i,a):t===422?new jv(t,o,i,a):t===429?new Xv(t,o,i,a):t>=500?new Qv(t,o,i,a):new pt(t,o,i,a)}}class ic extends pt{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class js extends pt{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Vv extends js{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Fv extends pt{}class Yv extends pt{}class Jv extends pt{}class Kv extends pt{}class $v extends pt{}class jv extends pt{}class Xv extends pt{}class Qv extends pt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hN=/^[a-z][a-z0-9+.-]*:/i,mN=e=>hN.test(e);let ac=e=>(ac=Array.isArray,ac(e));const gN=ac;let vN=gN;const Hh=vN;function yN(e){if(!e)return!0;for(const t in e)return!1;return!0}function _N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const xN=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Xt(`${e} must be an integer`);if(t<0)throw new Xt(`${e} must be a positive integer`);return t},SN=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bN=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zi="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TN(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const CN=()=>{var e,t,n,i,a;const o=TN();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":Ph(Deno.build.os),"X-Stainless-Arch":Bh(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":Ph((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Bh((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const l=EN();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function EN(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const i=n.exec(navigator.userAgent);if(i){const a=i[1]||0,o=i[2]||0,l=i[3]||0;return{browser:t,version:`${a}.${o}.${l}`}}}return null}const Bh=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Ph=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let yl;const AN=()=>yl??(yl=CN());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NN(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Wv(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function wN(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Wv({start(){},async pull(n){const{done:i,value:a}=await t.next();i?n.close():n.enqueue(a)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function Zv(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function IN(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const i=e.getReader(),a=i.cancel();i.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RN=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ey=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t?.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Pr(e,t,n){return ey(),new File(e,t??"unknown_file",n)}function MN(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const DN=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ty=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",kN=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&ty(e),LN=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function UN(e,t,n){if(ey(),e=await e,kN(e))return e instanceof File?e:Pr([await e.arrayBuffer()],e.name);if(LN(e)){const a=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Pr(await oc(a),t,n)}const i=await oc(e);if(t||(t=MN(e)),!n?.type){const a=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof a=="string"&&(n=Object.assign(Object.assign({},n),{type:a}))}return Pr(i,t,n)}async function oc(e){var t,n,i,a,o;let l=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)l.push(e);else if(ty(e))l.push(e instanceof Blob?e:await e.arrayBuffer());else if(DN(e))try{for(var r=!0,c=en(e),d;d=await c.next(),t=d.done,!t;r=!0){a=d.value,r=!1;const f=a;l.push(...await oc(f))}}catch(f){n={error:f}}finally{try{!r&&!t&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}else{const f=(o=e?.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof e}${f?`; constructor: ${f}`:""}${GN(e)}`)}return l}function GN(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ny{constructor(t){this._client=t}}ny._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iy(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Oh=Object.freeze(Object.create(null)),HN=(e=iy)=>function(n,...i){if(n.length===1)return n[0];let a=!1;const o=[],l=n.reduce((f,m,h)=>{var g,_,b;/[?#]/.test(m)&&(a=!0);const T=i[h];let x=(a?encodeURIComponent:e)(""+T);return h!==i.length&&(T==null||typeof T=="object"&&T.toString===((b=Object.getPrototypeOf((_=Object.getPrototypeOf((g=T.hasOwnProperty)!==null&&g!==void 0?g:Oh))!==null&&_!==void 0?_:Oh))===null||b===void 0?void 0:b.toString))&&(x=T+"",o.push({start:f.length+m.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(T).slice(8,-1)} is not a valid path parameter`})),f+m+(h===i.length?"":x)},""),r=l.split(/[?#]/,1)[0],c=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let d;for(;(d=c.exec(r))!==null;)o.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(o.sort((f,m)=>f.start-m.start),o.length>0){let f=0;const m=o.reduce((h,g)=>{const _=" ".repeat(g.start-f),b="^".repeat(g.length);return f=g.start+g.length,h+_+b},"");throw new Xt(`Path parameters result in path with invalid segments:
${o.map(h=>h.error).join(`
`)}
${l}
${m}`)}return l},_l=HN(iy);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ay extends ny{create(t,n){var i;const{api_version:a=this._client.apiVersion}=t,o=xs(t,["api_version"]);if("model"in o&&"agent_config"in o)throw new Xt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Xt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(_l`/${a}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,n={},i){const{api_version:a=this._client.apiVersion}=n??{};return this._client.delete(_l`/${a}/interactions/${t}`,i)}cancel(t,n={},i){const{api_version:a=this._client.apiVersion}=n??{};return this._client.post(_l`/${a}/interactions/${t}/cancel`,i)}get(t,n={},i){var a;const o=n??{},{api_version:l=this._client.apiVersion}=o,r=xs(o,["api_version"]);return this._client.get(_l`/${l}/interactions/${t}`,Object.assign(Object.assign({query:r},i),{stream:(a=n?.stream)!==null&&a!==void 0?a:!1}))}}ay._key=Object.freeze(["interactions"]);class oy extends ay{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BN(e){let t=0;for(const a of e)t+=a.length;const n=new Uint8Array(t);let i=0;for(const a of e)n.set(a,i),i+=a.length;return n}let xl;function bd(e){let t;return(xl??(t=new globalThis.TextEncoder,xl=t.encode.bind(t)))(e)}let Sl;function zh(e){let t;return(Sl??(t=new globalThis.TextDecoder,Sl=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xs{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?bd(t):t;this.buffer=BN([this.buffer,n]);const i=[];let a;for(;(a=PN(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){i.push(zh(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,l=zh(this.buffer.subarray(0,o));i.push(l),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Xs.NEWLINE_CHARS=new Set([`
`,"\r"]);Xs.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function PN(e,t){for(let a=t??0;a<e.length;a++){if(e[a]===10)return{preceding:a,index:a+1,carriage:!1};if(e[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function ON(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ss={off:0,error:200,warn:300,info:400,debug:500},qh=(e,t,n)=>{if(e){if(_N(Ss,e))return e;dt(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Ss))}`)}};function uo(){}function bl(e,t,n){return!t||Ss[e]>Ss[n]?uo:t[e].bind(t)}const zN={error:uo,warn:uo,info:uo,debug:uo};let Vh=new WeakMap;function dt(e){var t;const n=e.logger,i=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return zN;const a=Vh.get(n);if(a&&a[0]===i)return a[1];const o={error:bl("error",n,i),warn:bl("warn",n,i),info:bl("info",n,i),debug:bl("debug",n,i)};return Vh.set(n,[i,o]),o}const Ni=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pa{constructor(t,n,i){this.iterator=t,this.controller=n,this.client=i}static fromSSEResponse(t,n,i){let a=!1;const o=i?dt(i):console;function l(){return Zt(this,arguments,function*(){var c,d,f,m;if(a)throw new Xt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let h=!1;try{try{for(var g=!0,_=en(qN(t,n)),b;b=yield J(_.next()),c=b.done,!c;g=!0){m=b.value,g=!1;const T=m;if(!h)if(T.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield J(JSON.parse(T.data))}catch(x){throw o.error("Could not parse message into JSON:",T.data),o.error("From chunk:",T.raw),x}}}catch(T){d={error:T}}finally{try{!g&&!c&&(f=_.return)&&(yield J(f.call(_)))}finally{if(d)throw d.error}}h=!0}catch(T){if(tc(T))return yield J(void 0);throw T}finally{h||n.abort()}})}return new pa(l,n,i)}static fromReadableStream(t,n,i){let a=!1;function o(){return Zt(this,arguments,function*(){var c,d,f,m;const h=new Xs,g=Zv(t);try{for(var _=!0,b=en(g),T;T=yield J(b.next()),c=T.done,!c;_=!0){m=T.value,_=!1;const x=m;for(const v of h.decode(x))yield yield J(v)}}catch(x){d={error:x}}finally{try{!_&&!c&&(f=b.return)&&(yield J(f.call(b)))}finally{if(d)throw d.error}}for(const x of h.flush())yield yield J(x)})}function l(){return Zt(this,arguments,function*(){var c,d,f,m;if(a)throw new Xt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let h=!1;try{try{for(var g=!0,_=en(o()),b;b=yield J(_.next()),c=b.done,!c;g=!0){m=b.value,g=!1;const T=m;h||T&&(yield yield J(JSON.parse(T)))}}catch(T){d={error:T}}finally{try{!g&&!c&&(f=_.return)&&(yield J(f.call(_)))}finally{if(d)throw d.error}}h=!0}catch(T){if(tc(T))return yield J(void 0);throw T}finally{h||n.abort()}})}return new pa(l,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],i=this.iterator(),a=o=>({next:()=>{if(o.length===0){const l=i.next();t.push(l),n.push(l)}return o.shift()}});return[new pa(()=>a(t),this.controller,this.client),new pa(()=>a(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return Wv({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await n.next();if(o)return i.close();const l=bd(JSON.stringify(a)+`
`);i.enqueue(l)}catch(a){i.error(a)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function qN(e,t){return Zt(this,arguments,function*(){var i,a,o,l;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Xt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Xt("Attempted to iterate over a response with no body");const r=new FN,c=new Xs,d=Zv(e.body);try{for(var f=!0,m=en(VN(d)),h;h=yield J(m.next()),i=h.done,!i;f=!0){l=h.value,f=!1;const g=l;for(const _ of c.decode(g)){const b=r.decode(_);b&&(yield yield J(b))}}}catch(g){a={error:g}}finally{try{!f&&!i&&(o=m.return)&&(yield J(o.call(m)))}finally{if(a)throw a.error}}for(const g of c.flush()){const _=r.decode(g);_&&(yield yield J(_))}})}function VN(e){return Zt(this,arguments,function*(){var n,i,a,o;let l=new Uint8Array;try{for(var r=!0,c=en(e),d;d=yield J(c.next()),n=d.done,!n;r=!0){o=d.value,r=!1;const f=o;if(f==null)continue;const m=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?bd(f):f;let h=new Uint8Array(l.length+m.length);h.set(l),h.set(m,l.length),l=h;let g;for(;(g=ON(l))!==-1;)yield yield J(l.slice(0,g)),l=l.slice(g)}}catch(f){i={error:f}}finally{try{!r&&!n&&(a=c.return)&&(yield J(a.call(c)))}finally{if(i)throw i.error}}l.length>0&&(yield yield J(l))})}class FN{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,a]=YN(t,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function YN(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function JN(e,t){const{response:n,requestLogID:i,retryOfRequestLogID:a,startTime:o}=t,l=await(async()=>{var r;if(t.options.stream)return dt(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):pa.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(r=c?.split(";")[0])===null||r===void 0?void 0:r.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return dt(e).debug(`[${i}] response parsed`,Ni({retryOfRequestLogID:a,url:n.url,status:n.status,body:l,durationMs:Date.now()-o})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Td extends Promise{constructor(t,n,i=JN){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new Td(this.client,this.responsePromise,async(n,i)=>t(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ly=Symbol("brand.privateNullableHeaders");function*KN(e){if(!e)return;if(ly in e){const{values:i,nulls:a}=e;yield*i.entries();for(const o of a)yield[o,null];return}let t=!1,n;e instanceof Headers?n=e.entries():Hh(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){const a=i[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const o=Hh(i[1])?i[1]:[i[1]];let l=!1;for(const r of o)r!==void 0&&(t&&!l&&(l=!0,yield[a,null]),yield[a,r])}}const Or=e=>{const t=new Headers,n=new Set;for(const i of e){const a=new Set;for(const[o,l]of KN(i)){const r=o.toLowerCase();a.has(r)||(t.delete(o),a.add(r)),l===null?(t.delete(o),n.add(r)):(t.append(o,l),n.delete(r))}}return{[ly]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zr=e=>{var t,n,i,a,o,l;if(typeof globalThis.process<"u")return(i=(n=(t=_b)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(o=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||o===void 0?void 0:o.call(a,e))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sy;class Qs{constructor(t){var n,i,a,o,l,r,c,d=t===void 0?{}:t,{baseURL:f=zr("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:m=(n=zr("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=d,g=xs(d,["baseURL","apiKey","apiVersion"]);const _=Object.assign(Object.assign({apiKey:m,apiVersion:h},g),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=_.baseURL,this.timeout=(i=_.timeout)!==null&&i!==void 0?i:Qs.DEFAULT_TIMEOUT,this.logger=(a=_.logger)!==null&&a!==void 0?a:console;const b="warn";this.logLevel=b,this.logLevel=(l=(o=qh(_.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:qh(zr("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:b,this.fetchOptions=_.fetchOptions,this.maxRetries=(r=_.maxRetries)!==null&&r!==void 0?r:2,this.fetch=(c=_.fetch)!==null&&c!==void 0?c:NN(),this.encoder=RN,this._options=_,this.apiKey=m,this.apiVersion=h}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){if(this.apiKey!=null)return Or([{"x-goog-api-key":this.apiKey}])}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Xt(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Zi}`}defaultIdempotencyKey(){return`stainless-node-retry-${pN()}`}makeStatusError(t,n,i,a){return pt.generate(t,n,i,a)}buildURL(t,n,i){const a=!this.baseURLOverridden()&&i||this.baseURL,o=mN(t)?new URL(t):new URL(a+(a.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),l=this.defaultQuery();return yN(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(t){}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(a=>Object.assign({method:t,path:n},a)))}request(t,n=null){return new Td(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){var a,o,l;const r=await t,c=(a=r.maxRetries)!==null&&a!==void 0?a:this.maxRetries;n==null&&(n=c),await this.prepareOptions(r);const{req:d,url:f,timeout:m}=await this.buildRequest(r,{retryCount:c-n});await this.prepareRequest(d,{url:f,options:r});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=i===void 0?"":`, retryOf: ${i}`,_=Date.now();if(dt(this).debug(`[${h}] sending request`,Ni({retryOfRequestLogID:i,method:r.method,url:f,options:r,headers:d.headers})),!((o=r.signal)===null||o===void 0)&&o.aborted)throw new ic;const b=new AbortController,T=await this.fetchWithTimeout(f,d,m,b).catch(nc),x=Date.now();if(T instanceof globalThis.Error){const y=`retrying, ${n} attempts remaining`;if(!((l=r.signal)===null||l===void 0)&&l.aborted)throw new ic;const S=tc(T)||/timed? ?out/i.test(String(T)+("cause"in T?String(T.cause):""));if(n)return dt(this).info(`[${h}] connection ${S?"timed out":"failed"} - ${y}`),dt(this).debug(`[${h}] connection ${S?"timed out":"failed"} (${y})`,Ni({retryOfRequestLogID:i,url:f,durationMs:x-_,message:T.message})),this.retryRequest(r,n,i??h);throw dt(this).info(`[${h}] connection ${S?"timed out":"failed"} - error; no more retries left`),dt(this).debug(`[${h}] connection ${S?"timed out":"failed"} (error; no more retries left)`,Ni({retryOfRequestLogID:i,url:f,durationMs:x-_,message:T.message})),S?new Vv:new js({cause:T})}const v=`[${h}${g}] ${d.method} ${f} ${T.ok?"succeeded":"failed"} with status ${T.status} in ${x-_}ms`;if(!T.ok){const y=await this.shouldRetry(T);if(n&&y){const N=`retrying, ${n} attempts remaining`;return await IN(T.body),dt(this).info(`${v} - ${N}`),dt(this).debug(`[${h}] response error (${N})`,Ni({retryOfRequestLogID:i,url:T.url,status:T.status,headers:T.headers,durationMs:x-_})),this.retryRequest(r,n,i??h,T.headers)}const S=y?"error; no more retries left":"error; not retryable";dt(this).info(`${v} - ${S}`);const E=await T.text().catch(N=>nc(N).message),A=SN(E),C=A?void 0:E;throw dt(this).debug(`[${h}] response error (${S})`,Ni({retryOfRequestLogID:i,url:T.url,status:T.status,headers:T.headers,message:C,durationMs:Date.now()-_})),this.makeStatusError(T.status,A,C,T.headers)}return dt(this).info(v),dt(this).debug(`[${h}] response start`,Ni({retryOfRequestLogID:i,url:T.url,status:T.status,headers:T.headers,durationMs:x-_})),{response:T,options:r,controller:b,requestLogID:h,retryOfRequestLogID:i,startTime:_}}async fetchWithTimeout(t,n,i,a){const o=n||{},{signal:l,method:r}=o,c=xs(o,["signal","method"]);l&&l.addEventListener("abort",()=>a.abort());const d=setTimeout(()=>a.abort(),i),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m=Object.assign(Object.assign(Object.assign({signal:a.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);r&&(m.method=r.toUpperCase());try{return await this.fetch.call(void 0,t,m)}finally{clearTimeout(d)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,a){var o;let l;const r=a?.get("retry-after-ms");if(r){const d=parseFloat(r);Number.isNaN(d)||(l=d)}const c=a?.get("retry-after");if(c&&!l){const d=parseFloat(c);Number.isNaN(d)?l=Date.parse(c)-Date.now():l=d*1e3}if(!(l&&0<=l&&l<60*1e3)){const d=(o=t.maxRetries)!==null&&o!==void 0?o:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,d)}return await bN(l),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){const o=n-t,l=Math.min(.5*Math.pow(2,o),8),r=1-Math.random()*.25;return l*r*1e3}async buildRequest(t,{retryCount:n=0}={}){var i,a,o;const l=Object.assign({},t),{method:r,path:c,query:d,defaultBaseURL:f}=l,m=this.buildURL(c,d,f);"timeout"in l&&xN("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:l}),_=await this.buildHeaders({options:t,method:r,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:r,headers:_},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(o=l.fetchOptions)!==null&&o!==void 0?o:{}),url:m,timeout:l.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:a}){let o={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const l=Or([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),AN()),await this.authHeaders(t),this._options.defaultHeaders,i,t.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const i=Or([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:wN(t)}:this.encoder({body:t,headers:i})}}Qs.DEFAULT_TIMEOUT=6e4;class et extends Qs{constructor(){super(...arguments),this.interactions=new oy(this)}}sy=et;et.GeminiNextGenAPIClient=sy;et.GeminiNextGenAPIClientError=Xt;et.APIError=pt;et.APIConnectionError=js;et.APIConnectionTimeoutError=Vv;et.APIUserAbortError=ic;et.NotFoundError=Kv;et.ConflictError=$v;et.RateLimitError=Xv;et.BadRequestError=Fv;et.AuthenticationError=Yv;et.InternalServerError=Qv;et.PermissionDeniedError=Jv;et.UnprocessableEntityError=jv;et.toFile=UN;et.Interactions=oy;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $N(e,t){const n={},i=s(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function jN(e,t){const n={},i=s(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function XN(e,t){const n={},i=s(e,["sdkHttpResponse"]);return i!=null&&u(n,["sdkHttpResponse"],i),n}function QN(e,t){const n={},i=s(e,["sdkHttpResponse"]);return i!=null&&u(n,["sdkHttpResponse"],i),n}function WN(e,t,n){const i={};if(s(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=s(e,["tunedModelDisplayName"]);if(t!==void 0&&a!=null&&u(t,["displayName"],a),s(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=s(e,["epochCount"]);t!==void 0&&o!=null&&u(t,["tuningTask","hyperparameters","epochCount"],o);const l=s(e,["learningRateMultiplier"]);if(l!=null&&u(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),s(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(s(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const r=s(e,["batchSize"]);t!==void 0&&r!=null&&u(t,["tuningTask","hyperparameters","batchSize"],r);const c=s(e,["learningRate"]);if(t!==void 0&&c!=null&&u(t,["tuningTask","hyperparameters","learningRate"],c),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(s(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function ZN(e,t,n){const i={};let a=s(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=s(e,["validationDataset"]);t!==void 0&&g!=null&&u(t,["supervisedTuningSpec"],Fh(g))}else if(a==="PREFERENCE_TUNING"){const g=s(e,["validationDataset"]);t!==void 0&&g!=null&&u(t,["preferenceOptimizationSpec"],Fh(g))}const o=s(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&u(t,["tunedModelDisplayName"],o);const l=s(e,["description"]);t!==void 0&&l!=null&&u(t,["description"],l);let r=s(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const g=s(e,["epochCount"]);t!==void 0&&g!=null&&u(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(r==="PREFERENCE_TUNING"){const g=s(e,["epochCount"]);t!==void 0&&g!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=s(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=s(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&u(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=s(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=s(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=s(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&u(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){const g=s(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&u(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=s(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=s(e,["adapterSize"]);t!==void 0&&g!=null&&u(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=s(e,["adapterSize"]);t!==void 0&&g!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(s(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=s(e,["labels"]);t!==void 0&&m!=null&&u(t,["labels"],m);const h=s(e,["beta"]);return t!==void 0&&h!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","beta"],h),i}function ew(e,t){const n={},i=s(e,["baseModel"]);i!=null&&u(n,["baseModel"],i);const a=s(e,["preTunedModel"]);a!=null&&u(n,["preTunedModel"],a);const o=s(e,["trainingDataset"]);o!=null&&dw(o);const l=s(e,["config"]);return l!=null&&WN(l,n),n}function tw(e,t){const n={},i=s(e,["baseModel"]);i!=null&&u(n,["baseModel"],i);const a=s(e,["preTunedModel"]);a!=null&&u(n,["preTunedModel"],a);const o=s(e,["trainingDataset"]);o!=null&&fw(o,n,t);const l=s(e,["config"]);return l!=null&&ZN(l,n,t),n}function nw(e,t){const n={},i=s(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function iw(e,t){const n={},i=s(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function aw(e,t,n){const i={},a=s(e,["pageSize"]);t!==void 0&&a!=null&&u(t,["_query","pageSize"],a);const o=s(e,["pageToken"]);t!==void 0&&o!=null&&u(t,["_query","pageToken"],o);const l=s(e,["filter"]);return t!==void 0&&l!=null&&u(t,["_query","filter"],l),i}function ow(e,t,n){const i={},a=s(e,["pageSize"]);t!==void 0&&a!=null&&u(t,["_query","pageSize"],a);const o=s(e,["pageToken"]);t!==void 0&&o!=null&&u(t,["_query","pageToken"],o);const l=s(e,["filter"]);return t!==void 0&&l!=null&&u(t,["_query","filter"],l),i}function lw(e,t){const n={},i=s(e,["config"]);return i!=null&&aw(i,n),n}function sw(e,t){const n={},i=s(e,["config"]);return i!=null&&ow(i,n),n}function rw(e,t){const n={},i=s(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const a=s(e,["nextPageToken"]);a!=null&&u(n,["nextPageToken"],a);const o=s(e,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(r=>ry(r))),u(n,["tuningJobs"],l)}return n}function uw(e,t){const n={},i=s(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const a=s(e,["nextPageToken"]);a!=null&&u(n,["nextPageToken"],a);const o=s(e,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(r=>lc(r))),u(n,["tuningJobs"],l)}return n}function cw(e,t){const n={},i=s(e,["name"]);i!=null&&u(n,["model"],i);const a=s(e,["name"]);return a!=null&&u(n,["endpoint"],a),n}function dw(e,t){const n={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=s(e,["examples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),u(n,["examples","examples"],a)}return n}function fw(e,t,n){const i={};let a=s(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=s(e,["gcsUri"]);t!==void 0&&l!=null&&u(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=s(e,["gcsUri"]);t!==void 0&&l!=null&&u(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=s(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=s(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&u(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=s(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&u(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(s(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function ry(e,t){const n={},i=s(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const a=s(e,["name"]);a!=null&&u(n,["name"],a);const o=s(e,["state"]);o!=null&&u(n,["state"],bv(o));const l=s(e,["createTime"]);l!=null&&u(n,["createTime"],l);const r=s(e,["tuningTask","startTime"]);r!=null&&u(n,["startTime"],r);const c=s(e,["tuningTask","completeTime"]);c!=null&&u(n,["endTime"],c);const d=s(e,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=s(e,["description"]);f!=null&&u(n,["description"],f);const m=s(e,["baseModel"]);m!=null&&u(n,["baseModel"],m);const h=s(e,["_self"]);return h!=null&&u(n,["tunedModel"],cw(h)),n}function lc(e,t){const n={},i=s(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const a=s(e,["name"]);a!=null&&u(n,["name"],a);const o=s(e,["state"]);o!=null&&u(n,["state"],bv(o));const l=s(e,["createTime"]);l!=null&&u(n,["createTime"],l);const r=s(e,["startTime"]);r!=null&&u(n,["startTime"],r);const c=s(e,["endTime"]);c!=null&&u(n,["endTime"],c);const d=s(e,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=s(e,["error"]);f!=null&&u(n,["error"],f);const m=s(e,["description"]);m!=null&&u(n,["description"],m);const h=s(e,["baseModel"]);h!=null&&u(n,["baseModel"],h);const g=s(e,["tunedModel"]);g!=null&&u(n,["tunedModel"],g);const _=s(e,["preTunedModel"]);_!=null&&u(n,["preTunedModel"],_);const b=s(e,["supervisedTuningSpec"]);b!=null&&u(n,["supervisedTuningSpec"],b);const T=s(e,["preferenceOptimizationSpec"]);T!=null&&u(n,["preferenceOptimizationSpec"],T);const x=s(e,["tuningDataStats"]);x!=null&&u(n,["tuningDataStats"],x);const v=s(e,["encryptionSpec"]);v!=null&&u(n,["encryptionSpec"],v);const y=s(e,["partnerModelTuningSpec"]);y!=null&&u(n,["partnerModelTuningSpec"],y);const S=s(e,["customBaseModel"]);S!=null&&u(n,["customBaseModel"],S);const E=s(e,["experiment"]);E!=null&&u(n,["experiment"],E);const A=s(e,["labels"]);A!=null&&u(n,["labels"],A);const C=s(e,["outputUri"]);C!=null&&u(n,["outputUri"],C);const R=s(e,["pipelineJob"]);R!=null&&u(n,["pipelineJob"],R);const N=s(e,["serviceAccount"]);N!=null&&u(n,["serviceAccount"],N);const M=s(e,["tunedModelDisplayName"]);M!=null&&u(n,["tunedModelDisplayName"],M);const L=s(e,["veoTuningSpec"]);return L!=null&&u(n,["veoTuningSpec"],L),n}function pw(e,t){const n={},i=s(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const a=s(e,["name"]);a!=null&&u(n,["name"],a);const o=s(e,["metadata"]);o!=null&&u(n,["metadata"],o);const l=s(e,["done"]);l!=null&&u(n,["done"],l);const r=s(e,["error"]);return r!=null&&u(n,["error"],r),n}function Fh(e,t){const n={},i=s(e,["gcsUri"]);i!=null&&u(n,["validationDatasetUri"],i);const a=s(e,["vertexDatasetResource"]);return a!=null&&u(n,["validationDatasetUri"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hw extends Hn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ji(Un.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:a});return o.baseModel=void 0,await this.tuneInternal(o)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),o=await this.tuneMldevInternal(a);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:$u.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=iw(t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>lc(f))}else{const d=nw(t);return r=H("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>ry(f))}}async listInternal(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=sw(t);return r=H("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=uw(f),h=new gh;return Object.assign(h,m),h})}else{const d=lw(t);return r=H("tunedModels",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=rw(f),h=new gh;return Object.assign(h,m),h})}}async cancel(t){var n,i,a,o;let l,r="",c={};if(this.apiClient.isVertexAI()){const d=jN(t);return r=H("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=QN(f),h=new vh;return Object.assign(h,m),h})}else{const d=$N(t);return r=H("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:f.headers},h})),l.then(f=>{const m=XN(f),h=new vh;return Object.assign(h,m),h})}}async tuneInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const r=tw(t,t);return o=H("tuningJobs",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>lc(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=ew(t);return o=H("tunedModels",r._url),l=r._query,delete r._url,delete r._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),a.then(c=>pw(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mw{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const gw=1024*1024*8,vw=3,yw=1e3,_w=2,bs="x-goog-upload-status";async function xw(e,t,n){var i;const a=await uy(e,t,n),o=await a?.json();if(((i=a?.headers)===null||i===void 0?void 0:i[bs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function Sw(e,t,n){var i;const a=await uy(e,t,n),o=await a?.json();if(((i=a?.headers)===null||i===void 0?void 0:i[bs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=gv(o),r=new gd;return Object.assign(r,l),r}async function uy(e,t,n){var i,a;let o=0,l=0,r=new ju(new Response),c="upload";for(o=e.size;l<o;){const d=Math.min(gw,o-l),f=e.slice(l,l+d);l+d>=o&&(c+=", finalize");let m=0,h=yw;for(;m<vw&&(r=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(l),"Content-Length":String(d)}}}),!(!((i=r?.headers)===null||i===void 0)&&i[bs]));)m++,await Tw(h),h=h*_w;if(l+=d,((a=r?.headers)===null||a===void 0?void 0:a[bs])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return r}async function bw(e){return{size:e.size,type:e.type}}function Tw(e){return new Promise(t=>setTimeout(t,e))}class Cw{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await xw(t,n,i)}async uploadToFileSearchStore(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Sw(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await bw(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ew{create(t,n,i){return new Aw(t,n,i)}}class Aw{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yh="x-goog-api-key";let Nw=class{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Yh)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Yh,this.apiKey)}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ww="gl-node/";class Iw{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new et({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=Tb(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const a=new Nw(this.apiKey);this.apiClient=new b1({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:ww+"web",uploader:new Cw,downloader:new mw}),this.models=new z1(this.apiClient),this.live=new U1(this.apiClient,a,new Ew),this.batches=new WT(this.apiClient),this.chats=new kC(this.models,this.apiClient),this.caches=new RC(this.apiClient),this.files=new VC(this.apiClient),this.operations=new q1(this.apiClient),this.authTokens=new aN(this.apiClient),this.tunings=new hw(this.apiClient),this.fileSearchStores=new fN(this.apiClient)}}var Jh={};let Pi=null,Oi=!1;try{const e=typeof process<"u"&&process&&Jh?Jh.API_KEY:"";e&&e.length>0?Pi=new Iw({apiKey:e}):(console.warn("AI Key not found in process.env.API_KEY. AI features disabled."),Oi=!0)}catch(e){console.warn("GoogleGenAI init failed (likely missing key or network issue):",e),Oi=!0}const Kh=()=>!!Pi&&!Oi;let Ol=null;const cy=async()=>{if(!Pi||Oi)return"AI  (API Key Missing)";try{return Ol=Pi.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:HS}}),""}catch(e){return console.error("",e),""}},Rw=async e=>{if(Ol||await cy(),!Ol)return"";try{return(await Ol.sendMessage({message:e})).text||""}catch(t){return console.error("",t),t.message?.includes("429")||t.status===429||t.code===429?(Oi=!0,""):""}},Mw=async(e,t="Puck")=>{if(!Pi||Oi)return null;try{const i=(await Pi.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:{parts:[{text:e}]},config:{responseModalities:[Oo.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}}}})).candidates?.[0]?.content?.parts?.[0]?.inlineData?.data;if(i){const a=atob(i),o=a.length,l=new Uint8Array(o);for(let r=0;r<o;r++)l[r]=a.charCodeAt(r);return l}}catch(n){console.error("TTS Generation Error",n)}return null},Dw=async(e,t,n,i,a,o=Ga.MEDIUM,l,r=[],c=null,d=1,f=null)=>{if(Oi||!Pi)return e.hand.length>0?e.hand[0]:null;if(e.hand.length===0)return null;const m=8-e.hand.length,h=()=>{const g=[...e.hand],_=l?cd(e.id,l):{aggression:.5,riskTolerance:.3,playerId:e.id},b=g.map(N=>{const M=rv({...e,type:st.HUMAN},N,t,a,n,i,r,c,m,f);return{card:N,risk:M}});let T=b.filter(N=>!N.risk||N.risk.riskLevel!==ue.PENALTY);if(T.length===0&&(T=b),o!==Ga.EASY&&_.riskTolerance<.5){const N=T.filter(M=>!M.risk||M.risk.riskLevel!==ue.WARNING);N.length>0&&(T=N)}if(_.aggression<.4){const N=T.filter(M=>!M.risk||M.risk.riskLevel===ue.SAFE);N.length>0&&(T=N)}const x=T.map(N=>N.card),v=e.hand.some(N=>N.id==="c_9"),y=N=>[...N].sort((M,L)=>M.value-L.value),S=N=>[...N].sort((M,L)=>L.value-M.value);if(t.length===0)return _.aggression>.6||e.id===a||v?S(x)[0]:y(x)[0];const E=t[0].card.suit,A=x.filter(N=>N.suit===E);if(A.length>0){let N=-1;t.forEach(L=>{L.card.suit===E&&L.card.value>N&&(N=L.card.value)});const M=A.filter(L=>L.value>N);return M.length>0?_.aggression>.8?S(M)[0]:y(M)[0]:y(A)[0]}return(N=>N.sort((M,L)=>{if(M.id==="c_9")return 1;if(L.id==="c_9")return-1;const O=M.color==="red",z=L.color==="red";if(_.aggression>.5){if(O&&!z)return 1;if(!O&&z)return-1}return M.value-L.value}))(x)[0]};try{return h()}catch(g){return console.error("AI Decision Error",g),e.hand[0]}},$h={zh_CN:{GAME_START:["","","","",""],TRICK_WIN:["","","","",""],TRICK_WIN_BIG:["","","","",""],TRICK_LOSS:["","","","",""],PENALTY:["","...","","",""],ROUND_WIN:["","","","",""],ROUND_LOSS:["...","","","",""],KAI_CHONG_SUCCESS:["","","","",""],KAI_CHONG_FAIL:["","","","",""],PLAY_HIGH_CARD:["","","",""],WAITING:["","","",""],TEACH_VIOLATION:["","","","","",""]},zh_TW:{GAME_START:["","","","",""],TRICK_WIN:["","","","",""],TRICK_WIN_BIG:["","","","",""],TRICK_LOSS:["","","","",""],PENALTY:["","...","","",""],ROUND_WIN:["","","","",""],ROUND_LOSS:["...","","","",""],KAI_CHONG_SUCCESS:["","","","",""],KAI_CHONG_FAIL:["","","","",""],PLAY_HIGH_CARD:["","","",""],WAITING:["","","",""],TEACH_VIOLATION:["","","","","",""]},en:{GAME_START:["Ma Diao is akin to military strategy. Forty cards, infinite changes. Proceed with caution.","As the ancient masters said: Know yourself and your enemy. Let us duel.","In the Ming Dynasty, scholars adored this game. Let us honor their tradition."],TRICK_WIN:["A strategic acquisition.","I accept this tribute gratefully.","Just as the manuals predicted.","Swift as the wind, I take this trick."],TRICK_WIN_BIG:["One man guards the pass, ten thousand cannot break through!","The Supreme Card is here!","Who dares to challenge my authority?","Absolute dominance!"],TRICK_LOSS:["A momentary lapse in judgment...","I let you have this one intentionally.","A clever trap, I must admit.","The ancients warned of such strategies."],PENALTY:["Alas! I have brought shame upon my ancestors!","A penalty? My reputation is ruined!","I was momentarily blinded by greed.","A painful lesson learned."],ROUND_WIN:["Strategy woven within the tent determines victory a thousand miles away.","My luck today rivals the masters of old.","A narrow victory, thank you for the game.","The flow of the cards was with me."],ROUND_LOSS:["Fortune is fickle...","I shall return stronger in the next hand.","Your skills have improved, young one.","I must meditate on this defeat."],KAI_CHONG_SUCCESS:["A match made in heaven!","It was destined to be.","A stroke of genius!","Fate is on my side."],KAI_CHONG_FAIL:["Fate has not yet arrived.","Like a flower in the mirror, an illusion.","The pot is cruel today.","Patience is a virtue."],PLAY_HIGH_CARD:["Behold, the weight of Mount Tai!","This card settles the universe.","Power without flash.","Can you withstand this?"],WAITING:["Are you calculating the movements of the stars?","Hesitation leads to defeat.","Time flows like a river, please play.","Studying the ancient texts, are we?"],TEACH_VIOLATION:["Foolish apprentice! Leading 'Qian Wan' is strictly forbidden by the ancients!","Absurd! Leading Cash without being a Millionaire? You court disaster!","In the old tea houses of Suzhou, such play would get you expelled!","Do not play the Reward (Zun) before the Shoulder appears! Remember the Three Preventions!","Chaos! This is why the 'Grand Penalty' exists. Learn from this!","You hold the Extreme (Ji) yet discard your Blacks? Amateur!"]},ja:{GAME_START:["","",""],TRICK_WIN:["","","",""],TRICK_WIN_BIG:["","","",""],TRICK_LOSS:["...","","",""],PENALTY:["...","...","","..."],ROUND_WIN:["","","",""],ROUND_LOSS:["...","","",""],KAI_CHONG_SUCCESS:["","","",""],KAI_CHONG_FAIL:["","...","",""],PLAY_HIGH_CARD:["","","",""],WAITING:["","","",""],TEACH_VIOLATION:["","","","","","..."]},ko:{GAME_START:["  . 40 ,  .","  :   .","    ,  ."],TRICK_WIN:[" .","   .",".","    ."],TRICK_WIN_BIG:[" !","  !","  ?","!"],TRICK_LOSS:["...","   ."," ."," ."],PENALTY:[" !   ...","...  !","  .","."],ROUND_WIN:["    .","    ."," .","  ."],ROUND_LOSS:[" ...","   .","  .","   ."],KAI_CHONG_SUCCESS:["  !"," .","!"," ."],KAI_CHONG_FAIL:["  .","...","."," ."],PLAY_HIGH_CARD:["  !"," !","  ."," ."],WAITING:["  ?","   ."," , .","   ?"],TEACH_VIOLATION:["! ''     !"," ! ''   ,  ?","    !","  ''   '' , !","!   '' , !","''   ...   !"]}},kw=(e,t,n)=>{const a=($h[t]||$h.en)[e]||[];if(a.length===0)return"";const o=Math.floor(Math.random()*a.length);return a[o]},Lw=({gameState:e,gameActions:t,audioSystem:n,isMuted:i,language:a})=>{const[o,l]=I.useState({}),r=I.useRef(!1),c=I.useRef(0),d=I.useRef(0),{players:f,currentPlayerIndex:m,phase:h,trickNumber:g,tableCards:_,recordedCards:b,bankerId:T,difficulty:x,gameHistory:v,openedSuits:y,firstLeadInfo:S,mianZhangCard:E,lastGameEvent:A,trickWinnerId:C}=e;I.useEffect(()=>{const L=f[m];if(h===Oe.PLAYING&&g<8&&L?.type===st.AI&&_.length<4&&!C&&!r.current){r.current=!0;const z=setTimeout(async()=>{const $=L,G=_.map(w=>({card:w.card,playerId:w.playerId}));try{const w=await Dw($,G,f,b,T,x,v,y,S,g,E);w&&((w.rank===B.ZUN||w.rank===B.BAI)&&R()&&N($.id,"PLAY_HIGH_CARD"),await t.executePlayCard($.id,w.id))}catch(w){console.error("AI Move Error",w)}finally{r.current=!1}},1e3+Math.random()*500);return()=>clearTimeout(z)}},[m,h,_.length,C,g]),I.useEffect(()=>{if(!A)return;(async()=>{if(!R())return;const{type:O,playerId:z,context:$}=A,G=f.find(P=>P.id===z);let w=null,U=null;if(O==="TRICK_WIN"&&G?.type===st.AI)w=z,U=$?.isBig?"TRICK_WIN_BIG":"TRICK_WIN";else if(O==="VIOLATION"){const P=f.find(ge=>ge.type===st.AI);P&&(w=P.id,U="TEACH_VIOLATION")}else O==="KAI_CHONG_SUCCESS"&&G?.type===st.AI?(w=z,U="KAI_CHONG_SUCCESS"):O==="KAI_CHONG_FAIL"&&G?.type===st.AI&&(w=z,U="KAI_CHONG_FAIL");w!==null&&U!==null&&N(w,U)})()},[A]);const R=()=>{const L=Date.now();return L>c.current&&L>d.current+5e3},N=(L,O)=>{M(L,O);const z=Math.random()<.3;let $=4e3;if(z){const w=f.filter(U=>U.id!==L&&U.type===st.AI);if(w.length>0){const U=w[Math.floor(Math.random()*w.length)];let P=null;O==="TRICK_WIN"||O==="TRICK_WIN_BIG"?P="TRICK_LOSS":O==="KAI_CHONG_SUCCESS"&&(P="KAI_CHONG_FAIL"),P&&(setTimeout(()=>{M(U.id,P)},5500),$+=6e3)}}const G=15e3+Math.random()*45e3;c.current=Date.now()+$+G,console.log(`[AI Chat] Conversation started. Next chat allowed in ${($+G)/1e3}s`)},M=async(L,O)=>{if(d.current=Date.now(),!f.find(G=>G.id===L))return;cd(L,v||{});const $=kw(O,a);if($&&(l(G=>({...G,[L]:$})),setTimeout(()=>{l(G=>({...G,[L]:null}))},4e3),!i)){let G="Puck";L===2&&(G="Kore"),L===3&&(G="Fenrir");try{const w=await Mw($,G);w&&n.playPcmAudio(w)}catch(w){console.warn("TTS Failed",w)}}};return{aiChatMessages:o}},Uw="https://cdn.pixabay.com/download/audio/2024/09/20/audio_226590209f.mp3?filename=japanese-zen-garden-244383.mp3",qr={bgmVolume:.2,sfxVolume:.4},Gw=e=>{const t=I.useRef(null),n=I.useRef(null),i=I.useRef(null);I.useEffect(()=>{const c=window.AudioContext||window.webkitAudioContext;if(c){const f=new c({sampleRate:24e3});t.current=f;const m=f.createGain();m.gain.value=qr.sfxVolume,m.connect(f.destination),i.current=m}const d=new Audio(Uw);return d.loop=!0,d.volume=0,n.current=d,()=>{t.current?.close(),n.current&&(n.current.pause(),n.current=null)}},[]),I.useEffect(()=>{if(n.current){if(e){const c=setInterval(()=>{n.current&&n.current.volume>.01?n.current.volume-=.02:(n.current?.pause(),clearInterval(c))},100)}else if(n.current.paused){const c=n.current.play();c!==void 0&&c.then(()=>{const d=setInterval(()=>{n.current&&n.current.volume<qr.bgmVolume?n.current.volume=Math.min(qr.bgmVolume,n.current.volume+.01):clearInterval(d)},200)}).catch(d=>{console.log("BGM Autoplay prevented:",d)})}}},[e]);const a=I.useCallback(c=>{if(e||!t.current||!i.current)return;const d=t.current;d.state==="suspended"&&d.resume();const f=d.currentTime;switch(c){case"WOOD":const m=d.createOscillator(),h=d.createGain();m.connect(h),h.connect(i.current),m.type="sine",m.frequency.setValueAtTime(300,f),m.frequency.exponentialRampToValueAtTime(150,f+.1),h.gain.setValueAtTime(0,f),h.gain.linearRampToValueAtTime(.5,f+.02),h.gain.exponentialRampToValueAtTime(.01,f+.3),m.start(f),m.stop(f+.35);break;case"STONE":case"PAPER":const g=d.sampleRate*.4,_=d.createBuffer(1,g,d.sampleRate),b=_.getChannelData(0);for(let R=0;R<g;R++)b[R]=Math.random()*2-1;const T=d.createBufferSource();T.buffer=_;const x=d.createBiquadFilter();x.type="bandpass",x.frequency.setValueAtTime(1200,f),x.Q.value=1;const v=d.createGain();T.connect(x),x.connect(v),v.connect(i.current),v.gain.setValueAtTime(0,f),v.gain.linearRampToValueAtTime(.4,f+.05),v.gain.exponentialRampToValueAtTime(.01,f+.3),T.start(f);break;case"CHIME":case"DRUM":const y=d.createOscillator(),S=d.createGain();y.type="triangle",y.frequency.setValueAtTime(150,f),y.frequency.exponentialRampToValueAtTime(40,f+.3),S.gain.setValueAtTime(0,f),S.gain.linearRampToValueAtTime(.8,f+.02),S.gain.exponentialRampToValueAtTime(.01,f+.5);const E=d.createDelay();E.delayTime.value=.35;const A=d.createGain();A.gain.value=.4;const C=d.createBiquadFilter();C.type="lowpass",C.frequency.value=600,y.connect(S),S.connect(i.current),S.connect(E),E.connect(C),C.connect(A),A.connect(E),E.connect(i.current),y.start(f),y.stop(f+2);break}},[e]),o=async(c,d,f,m)=>{const h=new Int16Array(c.buffer),g=h.length/m,_=d.createBuffer(m,g,f);for(let b=0;b<m;b++){const T=_.getChannelData(b);for(let x=0;x<g;x++)T[x]=h[x*m+b]/32768}return _},l=I.useCallback(async c=>{if(!(e||!t.current||!i.current))try{t.current.state==="suspended"&&await t.current.resume();const d=await o(c,t.current,24e3,1),f=t.current.createBufferSource();f.buffer=d;const m=t.current.createGain();m.gain.value=.8,f.connect(m),m.connect(i.current),f.start()}catch(d){console.error("Audio playback error",d)}},[e]),r=I.useCallback(()=>{!e&&n.current&&n.current.paused&&n.current.play().catch(c=>console.log("Interaction needed for BGM"))},[e]);return{playPcmAudio:l,playProceduralSFX:a,startBGM:r}},dy=I.createContext(null),Vr=()=>{if(typeof window>"u")return!1;const e=window.innerWidth<1024,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return e||t},Hw=({children:e})=>{const[t,n]=I.useState("zh_CN"),[i,a]=I.useState(Ga.MEDIUM),[o,l]=I.useState(!0),[r,c]=I.useState(!0),[d,f]=I.useState(!0),[m,h]=I.useState(!0),[g,_]=I.useState(!0),[b,T]=I.useState(2),[x,v]=I.useState(Vr());I.useEffect(()=>{const R=()=>{v(Vr())};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]);const[y,S]=I.useState(()=>Vr()?"LOW":"HIGH"),[E,A]=I.useState(!0),C={language:t,setLanguage:n,difficulty:i,setDifficulty:a,oneClickPlay:o,setOneClickPlay:l,isMuted:r,setIsMuted:c,isRiskAlertOn:d,setIsRiskAlertOn:f,showSuitHistory:m,setShowSuitHistory:h,graphicsQuality:y,setGraphicsQuality:S,githubAutoSync:g,setGithubAutoSync:_,showPaperDolls:x?!1:E,setShowPaperDolls:A,isMobileDevice:x,baseScore:b,setBaseScore:T};return Le.createElement(dy.Provider,{value:C},e)},$a=()=>{const e=I.useContext(dy);if(!e)throw new Error("useGameSettings must be used within a GameSettingsProvider");return e},Bw=()=>{const[e,t]=I.useState(!1),[n,i]=I.useState("GENERAL"),[a,o]=I.useState(!1);return{showSettings:e,setShowSettings:t,activeSettingsTab:n,setActiveSettingsTab:i,showSocialModal:a,setShowSocialModal:o}},Pw=(e,t,n,i)=>{const{players:a,phase:o,trickNumber:l,currentPlayerIndex:r,tableCards:c,recordedCards:d,openedSuits:f,bankerId:m,firstLeadInfo:h,selectedCardId:g}=e,_=I.useMemo(()=>{if(!n||o!==Oe.PLAYING)return{label:"",disabled:!0,highlightedCardIds:new Set};const x=a[r]?.id===0&&l!==8&&(c?c.length<4:!0);let v="",y=new Set,S=!x;if(l===8)S=!0,v="";else if(x){if(!c||c.length===0)v="";else{const E=c[0].card.suit;let A=-1;c.forEach(R=>{R.card.suit===E&&R.card.value>A&&(A=R.card.value)}),v=n.hand.some(R=>R.suit===E&&R.value>A)?"":"",v===""||nb(n).forEach(N=>y.add(N.id))}!i.oneClickPlay&&!g&&(S=!0)}else S=!0,v="";return{label:v,disabled:S,highlightedCardIds:y}},[a,r,o,l,c,n,i.oneClickPlay,g,d,f,m,h]);return{interactionState:_,handle3DActionClick:()=>{_.disabled||(g?t.executePlayCard(0,g):i.oneClickPlay&&(_.highlightedCardIds.size>0?t.executePlayCard(0,Array.from(_.highlightedCardIds)[0]):n&&n.hand.length>0&&t.executePlayCard(0,n.hand[0].id)))}}},fy=Le.memo(({activePlayerId:e,spotlightPos:t,quality:n})=>{if(n==="LOW"){const a=o=>{let r={position:"absolute",inset:0,transition:"opacity 0.5s ease-out",opacity:o===e?.9:0,pointerEvents:"none",zIndex:5,background:"radial-gradient(circle at 50% 50%, rgba(255, 140, 60, 0.3) 0%, transparent 60%)"};const c="rgba(255, 160, 80, 0.4)",d="rgba(200, 60, 20, 0.2)",f="65%";switch(o){case 0:r.background=`radial-gradient(circle at 50% 100%, ${c} 0%, ${d} 35%, transparent ${f})`;break;case 1:r.background=`radial-gradient(circle at 100% 50%, ${c} 0%, ${d} 35%, transparent ${f})`;break;case 2:r.background=`radial-gradient(circle at 50% 0%, ${c} 0%, ${d} 35%, transparent ${f})`;break;case 3:r.background=`radial-gradient(circle at 0% 50%, ${c} 0%, ${d} 35%, transparent ${f})`;break}return r};return p.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[0,1,2,3].map(o=>p.jsx("div",{style:a(o)},o))})}const i=I.useMemo(()=>{if(t)return{background:`radial-gradient(circle at ${t.x} ${t.y}, 
                    rgba(255, 200, 120, 0.9) 0%, 
                    rgba(255, 100, 30, 0.4) 20%,
                    rgba(140, 40, 10, 0.1) 50%, 
                    transparent 75%)`,transition:"background 0.6s cubic-bezier(0.25, 1, 0.5, 1)",mixBlendMode:"plus-lighter"};{let a="50%",o="50%";return e===0?o="90%":e===1?a="90%":e===2?o="10%":e===3&&(a="10%"),{background:`radial-gradient(circle at ${a} ${o}, 
                    rgba(255, 180, 100, 0.7) 0%, 
                    rgba(255, 80, 20, 0.3) 30%,
                    rgba(100, 20, 5, 0.1) 50%,
                    rgba(0, 0, 0, 0) 70%)`,transition:"background 1.0s ease-in-out",mixBlendMode:"plus-lighter"}}},[t,e]);return p.jsx("div",{className:"absolute inset-0 z-[5] pointer-events-none transition-all duration-1000",style:i})}),py="-250 -100 900 640",co="M -100 0 L 500 0 A 220 220 0 0 1 500 440 L -100 440 A 220 220 0 0 1 -100 0 Z",Ow="M -100 0 L 500 0",zw="M 500 440 L -100 440",qw="M 500 0 A 220 220 0 0 1 500 440",Vw="M -100 440 A 220 220 0 0 1 -100 0",Fw=Le.memo(({activePlayerId:e,isVertical:t=!1,quality:n})=>n==="LOW"?null:p.jsx("div",{className:"absolute inset-0 pointer-events-none z-[12] overflow-visible mix-blend-screen",style:{transform:t?"rotate(90deg)":"none",transition:"transform 0.5s ease-out"},children:p.jsxs("svg",{className:"w-full h-full overflow-visible",viewBox:py,preserveAspectRatio:"xMidYMid meet",children:[p.jsx("defs",{children:p.jsxs("linearGradient",{id:"teaFlowGrad",gradientUnits:"userSpaceOnUse",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[p.jsx("stop",{offset:"0%",stopColor:"#8c6239",stopOpacity:"0"}),p.jsx("stop",{offset:"20%",stopColor:"#d4af37",stopOpacity:"0.4"}),p.jsx("stop",{offset:"50%",stopColor:"#fff8e1",stopOpacity:"1"}),p.jsx("stop",{offset:"80%",stopColor:"#d4af37",stopOpacity:"0.4"}),p.jsx("stop",{offset:"100%",stopColor:"#8c6239",stopOpacity:"0"})]})}),p.jsx("style",{children:`
                        @keyframes borderFlowReverse {
                            0% { stroke-dashoffset: 0; } 
                            100% { stroke-dashoffset: 2000; }
                        }
                    `}),p.jsx("path",{d:co,stroke:"url(#teaFlowGrad)",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeDasharray:"300 1700",style:{animation:"borderFlowReverse 4s linear infinite"}})]})})),Yw=Le.memo(({activePlayerId:e,bankerId:t,revealedBaiLaoId:n,suspectedBaiLaoId:i,playedPlayerIds:a=[],hasTableCards:o,phase:l,isVertical:r=!1,quality:c})=>{const d=I.useMemo(()=>{let v=0;switch(e){case 0:v=180;break;case 1:v=90;break;case 2:v=0;break;case 3:v=-90;break}return v},[e]),f=I.useMemo(()=>r?{2:3,0:1,1:2,3:0}:{0:0,1:1,2:2,3:3},[r]),m=v=>v===t&&v===n,h=v=>m(v)?{main:"#ef4444",glow:"#ef4444",needle:"#dc2626"}:v===t?{main:"#b91c1c",glow:"#ff0000",needle:"#b91c1c"}:v===n?{main:"#0d9488",glow:"#2dd4bf",needle:"#0f766e"}:{main:"#d4af37",glow:"#ffeebb",needle:"#b8860b"},g=(v,y)=>v===t?"":v===n?"":y,_=v=>{const y=e===v,S=v===t,E=v===n;let A="text-[#5c4025] opacity-60 mix-blend-overlay",C="",R="scale-100";return S?(A="text-[#ef4444] opacity-90 drop-shadow-[0_0_8px_rgba(220,38,38,0.8)]",C="animate-pulse-slow"):E&&(A="text-[#34d399] opacity-90 drop-shadow-[0_0_8px_rgba(16,185,129,0.8)]",C="animate-pulse-slow"),y&&(R="scale-125 md:scale-150",!S&&!E?A="text-[#ffdb7a] opacity-100 drop-shadow-[0_0_15px_rgba(255,215,0,0.8)]":(A=A.replace("opacity-90","opacity-100 brightness-150"),C="")),`absolute font-serif font-bold transition-all duration-700 transform -translate-x-1/2 -translate-y-1/2 z-[25] flex items-center justify-center text-sm md:text-xl ${A} ${R} ${C}`},b=l===Oe.KAI_CHONG,T=b?300:0,x=h(e);return p.jsxs("div",{className:"relative w-full h-full pointer-events-none z-[0]",style:{transformStyle:"preserve-3d"},children:[p.jsx("div",{className:"absolute inset-0 z-[10]",style:{transform:r?"rotate(90deg) translateZ(0px)":"translateZ(0px)",transition:"transform 0.5s ease-out"},children:p.jsxs("svg",{className:"w-full h-full overflow-visible",viewBox:py,preserveAspectRatio:"xMidYMid meet",children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"glassReflection",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.05"}),p.jsx("stop",{offset:"40%",stopColor:"white",stopOpacity:"0.0"}),p.jsx("stop",{offset:"60%",stopColor:"white",stopOpacity:"0.0"}),p.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0.1"})]}),c==="HIGH"&&p.jsxs("filter",{id:"rimGlow",children:[p.jsx("feGaussianBlur",{stdDeviation:"2",result:"blur"}),p.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]}),p.jsx("clipPath",{id:"clipTopHalf",children:p.jsx("rect",{x:"-250",y:"-100",width:"900",height:"320"})}),p.jsx("clipPath",{id:"clipBottomHalf",children:p.jsx("rect",{x:"-250",y:"220",width:"900",height:"420"})})]}),p.jsx("path",{d:co,fill:"#050302",stroke:"none",opacity:"0.6"}),p.jsx("path",{d:co,fill:"none",stroke:"#3e2b22",strokeWidth:"2",opacity:"0.5"}),p.jsxs("g",{style:{transition:"transform 1.5s cubic-bezier(0.4, 0, 0.2, 1)",transform:`translateY(-${T}px)`},clipPath:"url(#clipTopHalf)",children:[p.jsx("path",{d:co,fill:"url(#glassReflection)",stroke:"none",style:{mixBlendMode:"overlay"}}),p.jsx("path",{d:"M -100 220 L 500 220",stroke:"#5c4025",strokeWidth:"1",opacity:"0.5"})]}),p.jsxs("g",{style:{transition:"transform 1.5s cubic-bezier(0.4, 0, 0.2, 1)",transform:`translateY(${T}px)`},clipPath:"url(#clipBottomHalf)",children:[p.jsx("path",{d:co,fill:"url(#glassReflection)",stroke:"none",style:{mixBlendMode:"overlay"}}),p.jsx("path",{d:"M -100 220 L 500 220",stroke:"#5c4025",strokeWidth:"1",opacity:"0.5"})]}),p.jsxs("g",{style:{mixBlendMode:"plus-lighter",opacity:b?.3:1,transition:"opacity 1s"},children:[p.jsx("line",{x1:"-80",y1:"220",x2:"480",y2:"220",stroke:"#8c6239",strokeWidth:"1.5",opacity:"0.5",strokeDasharray:"6 3"}),p.jsx("line",{x1:"200",y1:"20",x2:"200",y2:"420",stroke:"#8c6239",strokeWidth:"1.5",opacity:"0.5",strokeDasharray:"6 3"}),p.jsx("circle",{cx:"200",cy:"220",r:"120",fill:"none",stroke:"#5c4025",strokeWidth:"1",opacity:"0.2"}),p.jsx("circle",{cx:"200",cy:"220",r:"40",fill:"none",stroke:"#d4af37",strokeWidth:"1",opacity:"0.15"}),p.jsx("circle",{cx:"200",cy:"220",r:"3",fill:"#d4af37",opacity:"0.8"})]}),p.jsx("g",{style:{mixBlendMode:"screen",opacity:b?.5:1,transition:"opacity 1s"},children:[{id:2,path:Ow},{id:1,path:qw},{id:0,path:zw},{id:3,path:Vw}].map(v=>{const y=Object.keys(f).find(R=>f[R]===v.id),S=y?parseInt(y):-1,E=S===e,A=E||a.includes(S),C=h(S);return p.jsxs("g",{children:[p.jsx("path",{d:v.path,fill:"none",stroke:C.main,strokeWidth:E?6:A?2:0,strokeLinecap:"round",filter:E&&c==="HIGH"?"url(#rimGlow)":"",opacity:A?1:0,style:{transition:"all 0.5s ease-out"}}),p.jsx("path",{d:v.path,fill:"none",stroke:"#2a1d15",strokeWidth:"1",strokeLinecap:"round"})]},v.id)})})]})}),p.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center pointer-events-none",style:{transformStyle:"preserve-3d",transform:"translateZ(10px)"},children:p.jsxs("div",{className:"relative transition-transform duration-1000 cubic-bezier(0.34, 1.56, 0.64, 1)",style:{transform:`rotate(${d}deg)`},children:[p.jsx("div",{className:"absolute top-1/2 left-1/2 w-4 h-20 bg-black blur-sm opacity-60",style:{transform:"translate(-50%, -50%) rotate(0deg) translateZ(-15px)",clipPath:"polygon(50% 0%, 80% 40%, 50% 100%, 20% 40%)"}}),p.jsx("div",{className:"absolute top-1/2 left-1/2 w-6 h-28 -translate-x-1/2 -translate-y-[65%] transition-colors duration-700",style:{clipPath:"polygon(50% 0%, 100% 85%, 50% 100%, 0% 85%)",background:`linear-gradient(90deg, ${x.needle} 40%, white 50%, ${x.needle} 60%)`,boxShadow:"0 0 10px rgba(0,0,0,0.5)"}}),p.jsx("div",{className:"absolute top-1/2 left-1/2 w-4 h-10 -translate-x-1/2 translate-y-[20%] transition-colors duration-700",style:{clipPath:"polygon(50% 100%, 100% 15%, 50% 0%, 0% 15%)",background:"linear-gradient(90deg, #1a0505 40%, #3e2b22 50%, #1a0505 60%)"}}),p.jsx("div",{className:"absolute top-[50%] left-[50%] -translate-x-1/2 -translate-y-1/2 w-8 h-8 rounded-full shadow-lg border-2 border-[#451a03] z-50 transition-colors duration-700 overflow-hidden",style:{background:`radial-gradient(circle at 30% 30%, white, ${x.glow}, ${x.needle})`},children:p.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-black/40 to-transparent pointer-events-none"})})]})}),p.jsxs("div",{className:"absolute inset-0 z-[25] pointer-events-none",style:{transform:"translateZ(15px)",opacity:b?.3:1,transition:"opacity 1s"},children:[p.jsx("div",{className:_(2),style:{top:"25%",left:"50%"},children:g(2,"")}),p.jsx("div",{className:_(0),style:{top:"75%",left:"50%"},children:g(0,"")}),p.jsx("div",{className:_(3),style:{top:"50%",left:"32%"},children:g(3,"")}),p.jsx("div",{className:_(1),style:{top:"50%",left:"68%"},children:g(1,"")})]})]})}),hy="radial-gradient(circle, rgba(255,215,0,0.4) 1px, transparent 1px)",Jw="radial-gradient(circle at 50% 70%, #2b0a0a 0%, #050202 100%)",Kw=({quality:e})=>p.jsxs("div",{className:"absolute inset-0 pointer-events-none z-0 overflow-hidden bg-[#050202]",children:[e==="LOW"?p.jsx("div",{className:"absolute inset-0",style:{background:Jw},children:p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.8)_100%)]"})}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"absolute inset-0",style:{background:"radial-gradient(circle at 50% 120%, #5c1515 0%, #2b0a0a 40%, #0f0202 100%)"}}),p.jsx("div",{className:"absolute top-[-20%] left-[10%] w-[80%] h-[70%] bg-[radial-gradient(circle,rgba(255,160,50,0.25)_0%,transparent_60%)] blur-[100px] animate-candle-flicker mix-blend-screen pointer-events-none"}),p.jsx("div",{className:"absolute bottom-[10%] right-[-10%] w-[60%] h-[60%] bg-[radial-gradient(circle,rgba(200,80,20,0.15)_0%,transparent_60%)] blur-[80px] animate-candle-flicker mix-blend-screen pointer-events-none",style:{animationDelay:"2.5s",animationDuration:"7s"}}),p.jsx("div",{className:"absolute inset-0 opacity-30 mix-blend-overlay pointer-events-none",style:{overflow:"hidden"},children:[...Array(3)].map((t,n)=>p.jsx("div",{className:"absolute w-[200%] h-[200%] animate-dust-float",style:{backgroundImage:hy,backgroundSize:`${100+n*50}px ${100+n*50}px`,left:`-${n*10}%`,top:`-${n*10}%`,animationDuration:`${20+n*5}s`,animationDelay:`-${n*3}s`}},n))})]}),p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_60%,transparent_30%,rgba(15,2,2,0.6)_100%)] pointer-events-none"})]}),$w=({isSmall:e})=>p.jsxs("div",{className:"absolute inset-0 w-full h-full rounded-[inherit] overflow-hidden bg-[#0a0502] shadow-inner border border-[#3e1010]",children:[p.jsx("div",{className:"absolute inset-0 opacity-40",style:{backgroundImage:hy,backgroundSize:"20px 20px"}}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#5c1515]/30 to-black/90"}),p.jsx("div",{className:"absolute inset-1 border border-[#b8860b] rounded-[4px] opacity-50"}),!e&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsx("div",{className:"w-8 h-12 border border-[#b8860b] flex items-center justify-center bg-black/60 backdrop-blur-sm shadow-[0_0_15px_#b8860b] animate-pulse-slow rounded-sm",children:p.jsx("span",{className:"text-[#b8860b] font-serif font-bold text-lg drop-shadow-[0_0_5px_#b8860b] writing-vertical-rl opacity-90",children:""})})})]}),jw=({effect:e})=>e?p.jsxs("div",{className:"absolute inset-0 z-30 rounded-[inherit] pointer-events-none overflow-hidden mix-blend-plus-lighter",children:[p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(255,215,0,0.3)_0%,transparent_70%)] animate-pulse-slow"}),p.jsx("div",{className:"absolute inset-[-1px] border-[1.5px] border-[#ffd700] opacity-90 rounded-[inherit] shadow-[0_0_15px_#ffd700]"})]}):null,Xw=()=>p.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-30 mix-blend-soft-light overflow-hidden",style:{zIndex:1},children:p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"})}),Fr=()=>p.jsx("div",{className:"w-full h-full bg-[#0a0505] opacity-60 blur-xl rounded-full"}),Qw=()=>p.jsx("div",{className:"w-full h-full border-b-4 border-[#3e1010] opacity-50"}),Ts={id:"imperial",name:"Imperial Court (Lacquer)",description:"Deep Urushi lacquer bathed in warm candlelight.",layout:{backgroundClass:"bg-[#2b0a0a]",atmosphereComponent:Kw,EnvironmentalShadows:Xw,tableSurfaceClass:"rounded-[32px] shadow-[0_30px_80px_rgba(0,0,0,0.8)] border border-[#2b0a0a]/30 overflow-hidden",tableBaseColor:"#0a0402",tableTexture:`
            radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05) 0%, transparent 40%),
            linear-gradient(160deg, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.8) 100%),
            radial-gradient(ellipse at 40% 70%, rgba(184, 134, 11, 0.05) 0%, transparent 50%)
        `,tableTextureSize:"auto",tableReflectivity:!0,tableBorderClass:"bg-[#080202] border-t border-[#3e1010]/20"},card:{getContainerClass:e=>{let t="w-16 h-24 md:w-20 md:h-32";e.isSmall?t=e.isRotated?"w-12 h-8":"w-8 h-12":e.isTrick?t=e.isRotated?"w-20 h-14 md:w-28 md:h-20":"w-14 h-20 md:w-20 md:h-28":e.isHand&&(t=e.isRotated?"w-24 h-16 md:w-28 md:h-20":"w-16 h-24 md:w-24 md:h-36");let n=e.isInverted?"bg-[#080404] text-[#e6c278] border border-[#3e1010]":"bg-[#f7f2e6] text-[#1c1917]";e.isFaceDown&&(n="bg-[#0a0502]"),e.isDisabled&&(n="bg-[#1a1a1a] grayscale opacity-40");let i="transition-all duration-300 cubic-bezier(0.2, 0.8, 0.2, 1)";!e.isFaceDown&&!e.isHand&&!e.isDisabled&&(i+=" hover:-translate-y-2 hover:shadow-[0_15px_30px_rgba(0,0,0,0.8)] cursor-pointer hover:brightness-110");let a="";return e.isSelected&&(a="-translate-y-4 scale-105 z-[100] shadow-[0_0_30px_rgba(218,165,32,0.6)] ring-1 ring-[#daa520]"),`relative flex flex-col group rounded-[6px] ${t} ${n} ${i} ${a}`},getMainColorClass:(e,t)=>t?"text-[#d4af37] font-serif tracking-widest drop-shadow-[0_1px_2px_rgba(0,0,0,0.9)]":e===q.RED?"text-[#8a1c1c] font-bold opacity-90 mix-blend-multiply":e===q.GREEN?"text-[#14532d] font-bold opacity-90 mix-blend-multiply":"text-[#0a0a0a] font-bold opacity-90 mix-blend-multiply",getPokerColorClass:(e,t)=>t?"text-[#d4af37]":e===D.STRINGS||e===D.TEXTS?"text-[#8a1c1c]":"text-[#0a0a0a]",getBorderClass:e=>e.isFaceDown?"border border-[#3e1010]":e.isWinner?"border-[2px] border-[#ffd700] shadow-[0_0_20px_rgba(255,215,0,0.5)]":e.isSelected?"border-[1px] border-[#daa520]":"border-[0.5px] border-[#3e1010] shadow-[1px_2px_6px_rgba(0,0,0,0.5)]",getShadowClass:e=>e.isFaceDown?"shadow-[0_5px_15px_rgba(0,0,0,0.9)]":"shadow-[2px_4px_10px_rgba(0,0,0,0.4)]",BackComponent:$w,EffectOverlay:jw},hud:{avatarContainerClass:e=>`
            relative w-20 h-20 md:w-24 md:h-24 rounded-full flex items-center justify-center 
            transition-all duration-700 border-[3px] 
            ${e?"bg-[#150505] border-[#d4af37] shadow-[0_0_40px_rgba(212,175,55,0.4)] scale-105 z-50 ring-2 ring-[#d4af37]/30":"bg-[#0a0202] border-[#3e1010] opacity-80"}
        `,buttonClass:e=>`
            relative min-w-[150px] h-14 rounded-full flex items-center justify-center transition-all duration-300 font-calligraphy tracking-[0.2em] font-bold text-lg shadow-lg
            ${e?"bg-[#1a1a1a] text-[#444] border border-[#333] cursor-not-allowed":"bg-gradient-to-r from-[#2b0a0a] to-[#150505] text-[#d4af37] border border-[#d4af37] hover:bg-[#3e1010] hover:shadow-[0_0_20px_rgba(212,175,55,0.2)]"}
        `,modalOverlayClass:"fixed inset-0 z-[300] flex items-center justify-center bg-[#0a0202]/95 backdrop-blur-xl p-4 animate-fade-in font-serif",modalContentClass:"bg-[#0f0505] border border-[#3e1010] p-8 w-full max-w-5xl rounded-[4px] shadow-[0_0_100px_black] relative overflow-hidden text-[#d4af37] bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')]"},lighting:{StoveLighting:fy,TableBorderFlow:Fw},character:{bodyFront:Fr,bodySideLeft:Fr,bodySideRight:Fr,headOutline:"",chairComponent:Qw}},Cd="radial-gradient(rgba(255,255,255,0.1) 1px, transparent 1px)",Ww=({quality:e})=>p.jsxs("div",{className:"absolute inset-0 pointer-events-none z-0 overflow-hidden bg-[#050a14]",children:[p.jsx("div",{className:"absolute inset-0",style:{background:e==="LOW"?"linear-gradient(to bottom, #0f1a2e, #1a1515, #1a0505)":"linear-gradient(to bottom, #050a14, #0f0a0a, #1a0505)"}}),p.jsx("div",{className:"absolute bottom-[-20%] left-[-10%] w-[80%] h-[80%] bg-[#ff4500] blur-[180px] opacity-15 animate-candleFlicker mix-blend-screen"}),p.jsx("div",{className:"absolute top-[10%] right-[10%] w-[300px] h-[300px] bg-[#aaddff] blur-[120px] opacity-05 rounded-full"}),p.jsx("div",{className:"absolute inset-0 opacity-10 mix-blend-overlay animate-sway-slow",style:{backgroundImage:Cd,backgroundSize:"10px 10px"}})]}),Zw=({isSmall:e})=>p.jsxs("div",{className:"absolute inset-0 w-full h-full rounded-[inherit] overflow-hidden bg-[#0a2e18] flex items-center justify-center shadow-inner",children:[p.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-overlay",style:{backgroundImage:Cd,backgroundSize:"4px 4px"}}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-black/60"}),p.jsx("div",{className:"absolute inset-1.5 border-2 border-dashed border-[#c5a059] rounded-[4px] opacity-60"}),!e&&p.jsx("div",{className:"text-[#c5a059] opacity-80 text-4xl drop-shadow-md",children:""})]}),e2=({effect:e})=>e?p.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none rounded-[inherit] ring-4 ring-[#b91c1c] ring-opacity-60 animate-pulse shadow-[0_0_20px_#b91c1c]"}):null,Yr=()=>p.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full drop-shadow-xl",children:[p.jsx("path",{d:"M20,100 C20,60 30,35 50,35 C70,35 80,60 80,100 Z",fill:"#8a1c1c",stroke:"#330000",strokeWidth:"1"}),p.jsx("path",{d:"M50,35 L50,100",stroke:"rgba(0,0,0,0.2)",strokeWidth:"1",strokeDasharray:"2 2"})]}),t2=({position:e})=>p.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[p.jsx("path",{d:"M10,100 L10,30 Q50,20 90,30 L90,100",fill:"#3e2723"}),p.jsx("rect",{x:"15",y:"35",width:"70",height:"60",fill:"#143d22",rx:"5",stroke:"#0a2012",strokeWidth:"2"})]}),my={id:"christmas",name:"Victorian Parlor (Velvet)",description:"Aged green velvet, dark mahogany, warm firelight.",layout:{backgroundClass:"bg-[#050a14]",atmosphereComponent:Ww,tableSurfaceClass:"rounded-[30px] shadow-[inset_0_0_80px_black,0_30px_80px_black] border-[12px] border-[#2d1b1b] overflow-hidden",tableBaseColor:"#0f2e1c",tableTexture:Cd,tableTextureSize:"4px 4px",tableBorderClass:"bg-[#1a0f0f]"},card:{getContainerClass:e=>{let t="w-16 h-24 md:w-20 md:h-32";e.isSmall?t=e.isRotated?"w-14 h-10":"w-10 h-14":e.isTrick?t=e.isRotated?"w-24 h-16 md:w-28 md:h-20":"w-16 h-24 md:w-20 md:h-28":e.isHand&&(t=e.isRotated?"w-20 h-12 md:w-24 md:h-16":"w-14 h-22 md:w-20 md:h-32");let n=e.isInverted?"bg-[#3e2723] text-[#e6c278]":"bg-[#fffaf0] text-[#1e293b]";e.isFaceDown&&(n="bg-[#0a2e18]"),e.isDisabled&&(n="bg-gray-600 grayscale opacity-50");let i="transition-transform duration-300";!e.isFaceDown&&!e.isHand&&!e.isDisabled&&(i+=" hover:-translate-y-2 hover:rotate-1 cursor-pointer hover:shadow-[0_10px_20px_rgba(0,0,0,0.5)]");let a="";return e.isSelected&&(a="-translate-y-4 scale-105 z-[100] ring-2 ring-[#c52222] shadow-[0_20px_30px_rgba(0,0,0,0.6)]"),`relative flex flex-col group rounded-[6px] ${t} ${n} ${i} ${a}`},getMainColorClass:(e,t)=>t?"text-[#f0e68c] font-serif":e===q.RED?"text-[#b91c1c] font-bold":e===q.GREEN?"text-[#15803d] font-bold":"text-[#1e293b] font-bold",getPokerColorClass:(e,t)=>t?"text-[#f0e68c]":e===D.STRINGS||e===D.TEXTS?"text-[#b91c1c]":"text-[#1e293b]",getBorderClass:e=>e.isFaceDown?"border-2 border-[#051a0d]":e.isWinner?"border-2 border-[#ffd700]":e.isSelected?"border-2 border-[#c52222]":"border border-gray-300",getShadowClass:e=>e.isFaceDown?"shadow-lg":"shadow-[1px_2px_4px_rgba(0,0,0,0.3)]",BackComponent:Zw,EffectOverlay:e2},hud:{avatarContainerClass:e=>`
            relative w-20 h-20 md:w-24 md:h-24 rounded-full flex items-center justify-center 
            transition-all duration-500 border-4 border-[#3e2723]
            ${e?"bg-[#4a0e0e] border-[#ffd700] shadow-[0_0_25px_rgba(255,215,0,0.4)] scale-105":"bg-[#1e293b] opacity-90"}
        `,buttonClass:e=>`
            relative min-w-[150px] h-14 rounded-full flex items-center justify-center transition-all duration-300 font-bold tracking-wider text-sm shadow-xl
            ${e?"bg-[#334155] text-gray-400 border border-[#475569] cursor-not-allowed":"bg-gradient-to-b from-[#c52222] to-[#7f1d1d] text-white border border-[#fecaca] hover:brightness-110 shadow-[0_5px_15px_rgba(185,28,28,0.4)]"}
        `,modalOverlayClass:"fixed inset-0 z-[300] flex items-center justify-center bg-[#050a14]/98 backdrop-blur-md p-4 animate-fade-in font-serif",modalContentClass:"bg-[#1a0f0f] border-[6px] border-[#2d1b1b] p-8 w-full max-w-5xl rounded-[12px] shadow-2xl relative overflow-hidden text-[#fffaf0]"},lighting:{StoveLighting:()=>null,TableBorderFlow:()=>null},character:{bodyFront:Yr,bodySideLeft:Yr,bodySideRight:Yr,headOutline:"",chairComponent:t2}},n2=({quality:e})=>p.jsxs("div",{className:"absolute inset-0 pointer-events-none z-[-1] overflow-hidden bg-[#2d1a10]",children:[p.jsx("div",{className:"absolute inset-0",style:{background:"radial-gradient(circle at 50% 120%, #5c3a21 0%, #2d1a10 60%, #0f0502 100%)"}}),p.jsx("div",{className:"absolute top-[-15%] left-1/2 -translate-x-1/2 w-[70%] h-[60%] bg-[radial-gradient(ellipse,rgba(255,220,180,0.2)_0%,transparent_70%)] blur-[90px] animate-candle-flicker mix-blend-screen"}),p.jsx("div",{className:"absolute inset-0 opacity-10 mix-blend-overlay",style:{backgroundImage:"repeating-linear-gradient(45deg, #000 0px, #000 1px, transparent 1px, transparent 10px)"}}),p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_30%,rgba(10,5,2,0.85)_100%)] pointer-events-none"})]}),i2=({isSmall:e})=>p.jsxs("div",{className:"absolute inset-0 w-full h-full rounded-[inherit] overflow-hidden bg-[#3e2b22] flex items-center justify-center shadow-inner border border-[#5c3a21]",children:[p.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:`
                    repeating-radial-gradient(circle at 0 0, transparent 0, #26140c 10px),
                    repeating-linear-gradient(45deg, #26140c, #3e2b22 10px, #26140c 20px)
                 `}}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-black/60 to-transparent"}),!e&&p.jsx("div",{className:"relative z-10 w-8 h-20 border-[1px] border-[#8c6239]/40 flex items-center justify-center rounded-[2px] bg-[#2d1a10]/90 backdrop-blur-sm shadow-[0_2px_10px_rgba(0,0,0,0.8)] animate-pulse-slow",children:p.jsx("span",{className:"text-[#e6c278] font-serif font-bold text-2xl writing-vertical-rl tracking-widest drop-shadow-[0_1px_2px_black] opacity-90 select-none",children:""})})]}),a2=({effect:e})=>e?p.jsx("div",{className:"absolute inset-[-4px] rounded-[inherit] pointer-events-none z-[50]",children:p.jsx("div",{className:"absolute inset-0 border-[1px] border-[#d4af37] rounded-[inherit] opacity-60 animate-pulse shadow-[0_0_15px_#d4af37,inset_0_0_10px_#d4af37]"})}):null,o2=()=>p.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-40 mix-blend-multiply overflow-hidden",style:{zIndex:1},children:[p.jsx("svg",{viewBox:"0 0 500 500",className:"w-full h-full animate-shadow-sway origin-bottom-left",style:{filter:"blur(4px)"},children:p.jsxs("g",{transform:"rotate(45) translate(100, -100)",children:[p.jsx("rect",{x:"50",y:"0",width:"10",height:"600",fill:"#1a0f0a"}),p.jsx("rect",{x:"150",y:"0",width:"8",height:"600",fill:"#1a0f0a"}),p.jsx("ellipse",{cx:"60",cy:"100",rx:"60",ry:"10",transform:"rotate(30)",fill:"#1a0f0a"}),p.jsx("ellipse",{cx:"160",cy:"200",rx:"70",ry:"12",transform:"rotate(-20)",fill:"#1a0f0a"})]})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-[#ff8c00]/5 to-transparent mix-blend-overlay"})]}),Jr=()=>p.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full drop-shadow-[0_10px_30px_rgba(0,0,0,0.9)] filter contrast-125 sepia-[0.3]",children:[p.jsx("defs",{children:p.jsxs("filter",{id:"silkFlow",children:[p.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.01",numOctaves:"3"}),p.jsx("feDisplacementMap",{in:"SourceGraphic",scale:"5"})]})}),p.jsx("path",{d:"M20,100 L20,50 Q50,40 80,50 L80,100 Z",fill:"#3d2616",stroke:"none",filter:"url(#silkFlow)",opacity:"0.9"})]}),l2=({position:e})=>p.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full drop-shadow-2xl",children:[p.jsx("path",{d:"M15,100 L15,30 Q15,10 50,15 Q85,10 85,30 L85,100",fill:"none",stroke:"#5c3a21",strokeWidth:"6",strokeLinecap:"round"}),p.jsx("path",{d:"M20,100 L20,40 L80,40 L80,100",fill:"#3e2b22",opacity:"0.9"})]}),gy={id:"ming_scholar",name:"Ming Scholar (Huanghuali)",description:"Warm lantern light on aged Huanghuali wood.",layout:{backgroundClass:"bg-[#2d1a10]",atmosphereComponent:n2,EnvironmentalShadows:o2,tableSurfaceClass:"rounded-[12px] overflow-hidden shadow-[0_50px_120px_black] border border-[#5c3a21]/50",tableBaseColor:"#3e2b22",tableTexture:`
            radial-gradient(circle at 30% 40%, rgba(62, 39, 35, 0.6) 0%, transparent 60%),
            repeating-linear-gradient(110deg, rgba(20, 10, 5, 0.1) 0px, rgba(20, 10, 5, 0.1) 1px, transparent 1px, transparent 8px),
            radial-gradient(ellipse at 70% 60%, rgba(139, 69, 19, 0.1), transparent 40%)
        `,tableTextureSize:"auto",tableReflectivity:!0,tableBorderClass:"bg-[#26140c] border-t border-[#5c3a21] brightness-90"},card:{getContainerClass:e=>{let t="w-16 h-24 md:w-20 md:h-32";e.isSmall?t=e.isRotated?"w-14 h-10":"w-10 h-14":e.isTrick?t=e.isRotated?"w-24 h-14 md:w-32 md:h-20":"w-14 h-24 md:w-20 md:h-32":e.isHand&&(t=e.isRotated?"w-20 h-12 md:w-24 md:h-16":"w-14 h-24 md:w-20 md:h-32");let n=e.isInverted?"bg-[#3e2b22] text-[#d9c7b0] border border-[#5c3a21]":"bg-[#e8e4d9] text-[#2b1810]";e.isFaceDown&&(n="bg-[#3e2b22]"),e.isDisabled&&(n="bg-[#1a1a1a] opacity-40 grayscale");let i="transition-all duration-300 ease-out";!e.isFaceDown&&!e.isHand&&!e.isDisabled&&(i+=" hover:-translate-y-2 hover:shadow-[0_15px_30px_rgba(0,0,0,0.7)] cursor-pointer hover:brightness-110");let a="";return e.isSelected&&(a="-translate-y-4 scale-105 z-[100] shadow-[0_0_30px_rgba(217,199,176,0.4)]"),`relative flex flex-col group rounded-[4px] ${t} ${n} ${i} ${a}`},getMainColorClass:(e,t)=>t?"text-[#d9c7b0] font-serif tracking-widest opacity-90 drop-shadow-sm":e===q.RED?"text-[#8c1c0b] font-bold font-calligraphy opacity-90 mix-blend-multiply":e===q.GREEN?"text-[#2e4c2e] font-bold font-calligraphy opacity-95 mix-blend-multiply":"text-[#1a1a1a] font-bold font-calligraphy opacity-90 mix-blend-multiply",getPokerColorClass:(e,t)=>t?"text-[#c5a059]":e===D.STRINGS||e===D.TEXTS?"text-[#8c1c0b]":"text-[#1a1a1a]",getBorderClass:e=>e.isFaceDown?"border border-[#5c3a21]":e.isWinner?"border-[2px] border-[#d4af37]":e.isSelected?"border-[1px] border-[#8c6239]":"border-[0.5px] border-[#a8a499]/50 shadow-[inset_0_0_10px_rgba(0,0,0,0.05)]",getShadowClass:e=>e.isFaceDown?"shadow-[0_4px_10px_rgba(0,0,0,0.8)]":"shadow-[1px_2px_6px_rgba(0,0,0,0.3)]",BackComponent:i2,EffectOverlay:a2},hud:{avatarContainerClass:e=>`
            relative w-20 h-20 md:w-24 md:h-24 rounded-full flex items-center justify-center 
            transition-all duration-700 border-[3px] 
            ${e?"bg-[#3e2b22] border-[#d4af37] shadow-[0_0_40px_rgba(212,175,55,0.3)] scale-105 z-50 ring-2 ring-[#5c3a21]/50":"bg-[#26140c] border-[#3e2b22] opacity-80 sepia-[0.4]"}
        `,buttonClass:e=>`
            relative min-w-[150px] h-14 rounded-full flex items-center justify-center transition-all duration-300 font-serif tracking-[0.25em] font-bold shadow-lg text-sm
            ${e?"bg-[#1a1a1a] text-[#444] border border-[#333] cursor-not-allowed":"bg-gradient-to-b from-[#5c3a21] to-[#26140c] text-[#d9c7b0] border border-[#8c6239] hover:border-[#d4af37] hover:text-[#fff] shadow-[0_5px_15px_rgba(0,0,0,0.5)]"}
        `,modalOverlayClass:"fixed inset-0 z-[300] flex items-center justify-center bg-[#1a0d08]/95 backdrop-blur-xl p-4 animate-fade-in font-serif",modalContentClass:"bg-[#26140c] border border-[#5c3a21] p-8 w-full max-w-5xl rounded-[2px] shadow-[0_0_100px_black] relative overflow-hidden text-[#d9c7b0] bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')]"},lighting:{StoveLighting:fy,TableBorderFlow:()=>null},character:{bodyFront:Jr,bodySideLeft:Jr,bodySideRight:Jr,headOutline:"",chairComponent:l2}},vy="linear-gradient(45deg, rgba(255,255,255,0.02) 25%, transparent 25%, transparent 75%, rgba(255,255,255,0.02) 75%, rgba(255,255,255,0.02))",s2=()=>p.jsxs("div",{className:"absolute inset-0 pointer-events-none z-[-1] overflow-hidden bg-[#e0e4e8]",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#f0f4f8] via-[#cfd8dc] to-[#b0bec5]"}),p.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[140%] h-[140%] bg-[radial-gradient(circle,rgba(0,0,0,0.03)_0%,transparent_70%)] blur-[80px]"}),p.jsx("div",{className:"absolute inset-0 opacity-20 mix-blend-multiply animate-sway-slow",style:{backgroundImage:vy,backgroundSize:"40px 40px"}})]}),r2=({isSmall:e})=>p.jsxs("div",{className:"absolute inset-0 w-full h-full rounded-[inherit] overflow-hidden bg-[#1a1a1a] flex items-center justify-center border border-[#444]",children:[p.jsx("div",{className:"absolute inset-0 bg-[#0f0f0f]"}),p.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:vy,backgroundSize:"4px 4px"}}),p.jsx("div",{className:`relative ${e?"scale-50":"scale-75"} opacity-80 mix-blend-screen`,children:p.jsxs("div",{className:"w-12 h-12 rounded-full border-2 border-white/40 flex items-center justify-center animate-[spin_20s_linear_infinite]",children:[p.jsx("div",{className:"w-6 h-12 bg-white/90 rounded-l-full border-r border-black"}),p.jsx("div",{className:"w-6 h-12 bg-black rounded-r-full border-l border-white/90"})]})})]}),u2=({effect:e})=>e?p.jsxs("div",{className:"absolute inset-[-12px] pointer-events-none z-[10]",children:[p.jsx("div",{className:"absolute inset-0 rounded-full blur-xl bg-black/10 animate-pulse transform scale-90"}),p.jsx("div",{className:"absolute inset-2 border border-black/30 rounded-[inherit] opacity-60"})]}):null,Kr=()=>p.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full drop-shadow-2xl",children:[p.jsx("filter",{id:"ink-blur",children:p.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1.0"})}),p.jsx("path",{d:"M20,100 C20,50 40,40 50,40 C60,40 80,50 80,100 Z",fill:"#111",filter:"url(#ink-blur)",opacity:"0.9"})]}),c2=({position:e})=>p.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[" ",p.jsx("rect",{x:"20",y:"40",width:"60",height:"60",fill:"#2a2a2a",rx:"1"})," ",p.jsx("rect",{x:"15",y:"35",width:"70",height:"5",fill:"#444"})," "]}),yy={id:"taoist_mystery",name:"Taoist Void (Ink Stone)",description:"Cold inkstone slab, rice paper, ethereal mist.",layout:{backgroundClass:"bg-[#cfd8dc]",atmosphereComponent:s2,tableSurfaceClass:"shadow-[0_40px_120px_rgba(0,0,0,0.5)] border border-[#455a64] rounded-[40px] overflow-hidden",tableBaseColor:"#263238",tableTexture:`
            url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.15'/%3E%3C/svg%3E"),
            linear-gradient(to bottom right, #37474f, #263238)
        `,tableTextureSize:"auto",tableBorderClass:"bg-[#1c2529] border-t border-[#455a64]"},card:{getContainerClass:e=>{let t="w-16 h-24 md:w-20 md:h-32";e.isSmall?t=e.isRotated?"w-14 h-10":"w-10 h-14":e.isTrick?t=e.isRotated?"w-24 h-16 md:w-28 md:h-20":"w-16 h-24 md:w-20 md:h-28":e.isHand&&(t=e.isRotated?"w-20 h-12 md:w-24 md:h-16":"w-14 h-22 md:w-20 md:h-32");let n=e.isInverted?"bg-[#111] text-[#ddd]":"bg-[#fcfcfc] text-[#111]";e.isFaceDown&&(n="bg-[#0f0f0f]"),e.isDisabled&&(n="bg-[#999] opacity-50 grayscale");let i="transition-all duration-500 ease-out";!e.isFaceDown&&!e.isHand&&!e.isDisabled&&(i+=" hover:-translate-y-2 hover:shadow-2xl cursor-pointer hover:scale-105");let a="";return e.isSelected&&(a="-translate-y-4 z-[100] scale-105 shadow-[0_15px_30px_rgba(0,0,0,0.3)]"),`relative flex flex-col group rounded-[2px] ${t} ${n} ${i} ${a}`},getMainColorClass:(e,t)=>t?"text-[#ccc] font-calligraphy tracking-widest":e===q.RED?"text-[#b71c1c] font-bold font-calligraphy opacity-90":"text-[#212121] font-bold font-calligraphy opacity-95",getPokerColorClass:(e,t)=>t?"text-[#ccc]":e===D.STRINGS||e===D.TEXTS?"text-[#b71c1c]":"text-[#212121]",getBorderClass:e=>e.isFaceDown?"border border-[#333]":e.isWinner?"border-[2px] border-black":e.isSelected?"border-[1px] border-black":"border border-transparent",getShadowClass:e=>e.isFaceDown?"shadow-[0_5px_15px_rgba(0,0,0,0.8)]":"shadow-[2px_2px_8px_rgba(0,0,0,0.1)]",BackComponent:r2,EffectOverlay:u2},hud:{avatarContainerClass:e=>`
            relative w-20 h-20 md:w-24 md:h-24 rounded-full flex items-center justify-center 
            transition-all duration-1000 border
            ${e?"bg-black border-white shadow-[0_0_50px_rgba(0,0,0,0.3)] scale-105 z-50":"bg-white border-black opacity-80 grayscale"}
        `,buttonClass:e=>`
            relative min-w-[140px] h-14 flex items-center justify-center transition-all duration-500 font-calligraphy tracking-[0.3em] rounded-full text-sm font-bold shadow-lg
            ${e?"bg-[#b0bec5] text-[#546e7a] cursor-not-allowed":"bg-[#263238] text-white border border-transparent hover:bg-[#37474f]"}
        `,modalOverlayClass:"fixed inset-0 z-[300] flex items-center justify-center bg-[#eceff1]/95 backdrop-blur-md p-4 animate-fade-in font-serif",modalContentClass:"bg-[#fafafa] border border-[#cfd8dc] p-8 w-full max-w-5xl rounded-[2px] shadow-2xl relative overflow-hidden text-[#263238]"},lighting:{StoveLighting:()=>null,TableBorderFlow:()=>null},character:{bodyFront:Kr,bodySideLeft:Kr,bodySideRight:Kr,headOutline:"",chairComponent:c2}},d2={skin:Ts,setSkinId:()=>{},availableSkins:[Ts,my,gy,yy]},_y=I.createContext(d2),f2=({children:e})=>{const t=[Ts,my,gy,yy],[n,i]=I.useState(Ts),a=o=>{const l=t.find(r=>r.id===o);if(l){i(l);try{localStorage.setItem("ma_diao_skin_id",o)}catch(r){console.warn("Could not save skin preference",r)}}};return Le.useEffect(()=>{try{const o=localStorage.getItem("ma_diao_skin_id");if(o&&o!==n.id){const l=t.find(r=>r.id===o);l&&i(l)}}catch(o){console.warn("Could not load skin preference",o)}},[]),p.jsx(_y.Provider,{value:{skin:n,setSkinId:a,availableSkins:t},children:e})},hn=()=>I.useContext(_y),p2="data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='paper'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23paper)' opacity='0.15'/%3E%3C/svg%3E",h2=e=>e.toString(),m2=e=>{switch(e){case D.CASH:return"";case D.STRINGS:return"";case D.COINS:return"";case D.TEXTS:return"";default:return""}},g2=e=>{const{card:t,onClick:n,onTouchStart:i,style:a,domId:o,textRotation:l=0,isRotated:r=!1,lanternGlow:c,isLocked:d}=e,{skin:f}=hn(),{graphicsQuality:m}=$a(),h=e.textLayout?e.textLayout==="vertical":!r;if(!t)return null;const g=f.card.getContainerClass(e),_=f.card.getMainColorClass(t.color,e.isInverted),b=f.card.getMainColorClass(t.color,e.isInverted);let T=h?"text-2xl md:text-4xl":"text-xl md:text-3xl";e.isSmall&&(T="text-[9px] leading-tight"),e.isTrick&&(T=h?"text-3xl md:text-5xl font-black tracking-widest":"text-2xl md:text-4xl font-black");const x=e.isSmall?"text-[7px]":"text-[10px] md:text-sm font-black",v=e.isSmall?"text-[7px]":"text-[9px] md:text-xs font-bold",y=l?{transform:`rotate(${l}deg)`}:{};let S="";e.isSmall?S="absolute inset-0 flex flex-col items-center justify-center pt-3 pb-1":h?S="absolute inset-0 flex flex-col items-center justify-center pt-5 pb-2 px-1 gap-0.5":S="absolute inset-0 flex flex-row items-center justify-center px-4 py-2 gap-1";let E="top-[3px] left-[3px]";l===180&&(E="bottom-[3px] right-[3px] transform rotate-180");const A=e.isSmall?1:2;let C="#dcdcdc",R="#1a1a1a";f.id==="imperial"?(C="#b8860b",R="#0a0505"):f.id==="ming_scholar"&&(C="#a8a499",R="#26140c");const N={...y,textShadow:e.isInverted?"0 1px 2px rgba(0,0,0,0.9)":"inset 0 1px 1px rgba(0,0,0,0.4), 0 1px 0 rgba(255,255,255,0.6)",mixBlendMode:e.isInverted?"normal":"multiply"},M=()=>p.jsxs("div",{className:"w-full h-full rounded-[inherit] overflow-hidden relative",children:[c&&p.jsx("div",{className:"absolute inset-0 z-[5] pointer-events-none rounded-[inherit] animate-pulse-fast",style:{boxShadow:`inset 0 0 15px ${c.color}`,mixBlendMode:"plus-lighter",opacity:c.intensity||.6}}),!e.isFaceDown&&p.jsxs(p.Fragment,{children:[e.isInverted?p.jsx("div",{className:"absolute inset-0 z-0",style:{backgroundColor:R}}):p.jsx("div",{className:"absolute inset-0 bg-[#f0eee5] z-0"}),p.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none mix-blend-multiply z-0",style:{backgroundImage:`url("${p2}")`}}),p.jsx("div",{className:`absolute inset-0 border-[1px] ${e.isInverted?"border-[#5c4025]":"border-[#2c1a12]"} rounded-[inherit] pointer-events-none z-50 opacity-40`}),p.jsx("div",{className:`z-10 ${S}`,children:p.jsx("div",{className:`${_} ${T} font-calligraphy select-none whitespace-nowrap ${h?"tategaki":""} transition-all overflow-visible`,style:N,children:t.name})}),p.jsx("div",{className:`absolute ${E} z-30 flex flex-col items-center justify-center pointer-events-none origin-center`,children:p.jsxs("div",{className:"flex flex-col items-center leading-none opacity-80",style:N,children:[p.jsx("span",{className:`block ${x} ${b} font-serif`,children:h2(t.value)}),p.jsx("span",{className:`block ${v} ${b}`,children:m2(t.suit)})]})}),e.isBanker&&p.jsx("div",{className:"absolute top-1.5 right-1.5 z-30",style:y,children:p.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#8c1c0b] border border-[#f59e0b] flex items-center justify-center shadow-md",children:p.jsx("span",{className:"text-[8px] text-[#fff] font-serif leading-none pt-[1px]",children:""})})}),(e.isBaiLao||e.isSuspectedBaiLao)&&p.jsx("div",{className:"absolute bottom-1.5 right-1.5 z-30",style:y,children:p.jsx("div",{className:`w-3.5 h-3.5 rounded-full ${e.isSuspectedBaiLao?"bg-amber-700":"bg-amber-600"} border border-[#3e2b22] flex items-center justify-center shadow-md`,children:p.jsx("span",{className:"text-[8px] text-[#e8e4d9] font-serif leading-none pt-[1px]",children:""})})}),e.suitStatus&&e.suitStatus!=="NEUTRAL"&&p.jsx("div",{className:"absolute bottom-1.5 left-1.5 z-30",style:y,children:p.jsx("div",{className:`w-2.5 h-2.5 rounded-full shadow-[0_1px_2px_rgba(0,0,0,0.6)] ${e.suitStatus==="FORBIDDEN"?"bg-[#b91c1c] border border-[#ef4444] shadow-[0_0_5px_rgba(220,38,38,0.5)] animate-pulse-slow":"bg-[#15803d] border border-[#4ade80] shadow-[0_0_5px_rgba(74,222,128,0.5)]"}`,title:e.suitStatus==="FORBIDDEN"?"Jin Men (Forbidden)":"Shu Men (Safe)"})}),p.jsx(f.card.EffectOverlay,{effect:e.leadingEffect||(e.isWinner?"GOLD":null)}),e.isSelected&&p.jsx("div",{className:"absolute inset-0 rounded-[inherit] z-50 pointer-events-none ring-2 ring-white/90 shadow-[0_0_20px_rgba(255,255,255,0.6)]"})]}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 via-transparent to-black/20 opacity-30 pointer-events-none mix-blend-overlay rounded-[inherit] z-40"})]});return p.jsxs("div",{id:o,className:`${g} relative aspect-[2/3] ${f.card.getBorderClass(e)} ${f.card.getShadowClass(e)} ${d?"!cursor-default !transform-none !transition-none pointer-events-none":""}`,style:{transformStyle:"preserve-3d",...a},onClick:e.isDisabled||d?void 0:n,onTouchStart:e.isDisabled||d?void 0:i,children:[c&&p.jsx("div",{className:"absolute inset-[-15px] z-0 rounded-[inherit] animate-pulse-slow pointer-events-none",style:{background:`radial-gradient(circle at 50% 50%, ${c.color} 0%, transparent 70%)`,opacity:c.intensity||.8,filter:"blur(10px)",transform:"translateZ(-5px)"}}),p.jsx("div",{className:"absolute inset-0 backface-hidden z-20 rounded-[inherit]",style:{transform:`translateZ(${A}px)`},children:p.jsx(M,{})}),[1,2].map(L=>p.jsx("div",{className:"absolute inset-0 rounded-[inherit] pointer-events-none z-10",style:{background:C,transform:`translateZ(${A-L*.5}px)`,boxShadow:`0 0 1px ${C}`}},`edge-${L}`)),p.jsx("div",{className:"absolute inset-0 backface-hidden z-20 rounded-[inherit]",style:{transform:`rotateY(180deg) translateZ(${A}px)`},children:p.jsxs("div",{className:"w-full h-full rounded-[inherit] overflow-hidden relative bg-[#050303] p-[1px]",children:[p.jsx(f.card.BackComponent,{isSmall:e.isSmall}),p.jsx("div",{className:"absolute inset-0 bg-black/30 pointer-events-none"})]})})]})},Pn=Le.memo(g2,(e,t)=>e.card.id===t.card.id&&e.isSelected===t.isSelected&&e.isFaceDown===t.isFaceDown&&e.isDisabled===t.isDisabled&&e.isSuggested===t.isSuggested&&e.isWinner===t.isWinner&&e.isInverted===t.isInverted&&e.lanternGlow===t.lanternGlow&&e.style?.transform===t.style?.transform),v2="data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.2'/%3E%3C/svg%3E",y2=Le.memo(({player:e,position:t,isActive:n,isBanker:i,isBaiLao:a,statusText:o,quality:l})=>{const{skin:r}=hn(),{graphicsQuality:c}=$a(),d=l||c,f=e.profile,m=f?.avatar_url||`https://api.dicebear.com/9.x/miniavs/svg?seed=${e.name}&backgroundColor=transparent`;let h=r.character.bodyFront;t==="Left"&&(h=r.character.bodySideLeft),t==="Right"&&(h=r.character.bodySideRight);let _=["#8c1c0b","#2b3e5c","#5c4025","#3e2b22"][e.id%4];(t==="Left"||t==="Right")&&(_="#0F0F0F");const b=I.useMemo(()=>{const y=f?.gazeDirection||"CENTER";let S="scale(1.05) translateY(2%)";return t==="Left"&&y==="LEFT"||t==="Right"&&y==="RIGHT"?"scaleX(-1) translateY(2%) scale(1.05)":S},[t,f?.gazeDirection]),T=I.useMemo(()=>{const y={chairScale:"scale(1.1)",chairY:"0%",chairX:"0%",bodyY:"8%",headScale:1,headX:"50%",headY:"2%",headRotateY:0,headRotateZ:0,lightingGradient:"radial-gradient(circle at 50% 30%, rgba(255,255,255,0.25), rgba(0,0,0,0) 70%)",chinShadow:"linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 25%)"};return t==="Top"?{...y,headY:"-5%",headScale:1.15,lightingGradient:"linear-gradient(to bottom, rgba(255,255,255,0.2), rgba(0,0,0,0.5))"}:t==="Left"?{...y,chairX:"5%",headX:"52%",headY:"0%",headScale:1.08,headRotateY:0,headRotateZ:2,lightingGradient:"linear-gradient(90deg, rgba(0,0,0,0.7) 0%, rgba(255,255,255,0.2) 100%)"}:t==="Right"?{...y,chairX:"-5%",headX:"48%",headY:"0%",headScale:1.08,headRotateY:0,headRotateZ:-2,lightingGradient:"linear-gradient(-90deg, rgba(0,0,0,0.7) 0%, rgba(255,255,255,0.2) 100%)"}:y},[t]),x=y=>y===""?"bg-[#5c0b00] border-red-400 text-white shadow-[0_0_8px_rgba(220,38,38,0.6)]":y===""?"bg-[#1c1917] border-stone-400 text-stone-100 shadow-[0_0_8px_rgba(87,83,78,0.6)]":y===""?"bg-[#064e3b] border-emerald-400 text-emerald-50 shadow-[0_0_8px_rgba(16,185,129,0.6)]":y===""?"bg-[#065f46] border-[#34d399] text-white shadow-[0_0_10px_rgba(52,211,153,0.8)]":"bg-black/90 border-stone-600",v=t==="Top"?{transform:"rotateY(180deg)"}:void 0;return p.jsxs("div",{className:`
                relative w-96 h-96 flex items-end justify-center pointer-events-none 
                transition-all duration-700 ease-out select-none
                ${n?"z-50 filter brightness-110 drop-shadow-[0_0_25px_rgba(255,215,0,0.3)]":"opacity-95"}
            `,style:{transformStyle:"preserve-3d",transformOrigin:"bottom center",transform:n?"scale(1.08) translateY(-5px)":"scale(1.0)"},children:[p.jsx("svg",{width:"0",height:"0",className:"absolute",children:p.jsx("defs",{children:p.jsx("clipPath",{id:"head-contour-clip",clipPathUnits:"objectBoundingBox",children:p.jsx("path",{d:"M 0.5, 0.02 C 0.85, 0.02, 1.0, 0.25, 1.0, 0.55 C 1.0, 0.75, 0.80, 0.92, 0.5, 0.98 C 0.20, 0.92, 0.0, 0.75, 0.0, 0.55 C 0.0, 0.25, 0.15, 0.02, 0.5, 0.02 Z"})})})}),p.jsx("div",{className:"absolute bottom-0 w-[80%] h-[10%] bg-black/80 blur-xl rounded-[100%] transform scale-y-50 -z-10 translate-y-4"}),p.jsx("div",{className:"absolute bottom-[2%] z-0 origin-bottom filter brightness-[0.6] contrast-125 saturate-50 drop-shadow-2xl",style:{transform:`translateZ(-20px) ${T.chairScale} translateX(${T.chairX}) translateY(${T.chairY})`,width:"100%",height:"100%"},children:p.jsx(r.character.chairComponent,{position:t,quality:d})}),p.jsx("div",{className:"absolute z-[5] w-[35%] h-[35%]",style:{left:T.headX,top:T.headY,transform:`translate(-50%, 0) scale(${T.headScale}) rotateY(${T.headRotateY}deg) rotateZ(${T.headRotateZ}deg)`,transformOrigin:"bottom center",transformStyle:"preserve-3d"},children:p.jsx("div",{className:"relative w-full h-full group",children:p.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-[#dcd0b8]",style:{clipPath:"url(#head-contour-clip)",boxShadow:"inset 0 0 20px rgba(0,0,0,0.9)",maskImage:"radial-gradient(circle at center, black 65%, transparent 100%)",WebkitMaskImage:"radial-gradient(circle at center, black 65%, transparent 100%)"},children:[p.jsx("img",{src:m,alt:"face",className:"w-full h-full object-cover",style:{filter:"sepia(0.2) contrast(1.15) saturate(1.1) brightness(0.95)",transform:b,imageRendering:"-webkit-optimize-contrast"}}),p.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none mix-blend-overlay",style:{background:T.lightingGradient}}),d==="HIGH"&&p.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none opacity-20 mix-blend-multiply",style:{backgroundImage:`url("${v2}")`}}),p.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[40%] z-20 pointer-events-none mix-blend-multiply",style:{background:T.chinShadow}})]})})}),p.jsxs("div",{className:`absolute bottom-3 z-10 w-full h-full flex items-end justify-center ${n&&d==="HIGH"?"animate-breathe-subtle":""}`,style:{transformOrigin:"bottom center",transform:`translateY(${T.bodyY}) translateZ(5px)`},children:[p.jsx("div",{className:"absolute bottom-2 w-[70%] h-4 bg-black/90 blur-md rounded-full transform scale-y-50"}),p.jsxs("div",{className:"relative w-full h-full drop-shadow-[0_20px_35px_rgba(0,0,0,0.9)] filter contrast-[1.15]",children:[p.jsx(h,{colorTheme:_,quality:d}),(t==="Left"||t==="Right")&&p.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none mix-blend-multiply rounded-[30%]",style:{background:t==="Left"?"linear-gradient(90deg, rgba(0,0,0,0.8) 0%, transparent 40%, rgba(0,0,0,0.4) 100%)":"linear-gradient(-90deg, rgba(0,0,0,0.8) 0%, transparent 40%, rgba(0,0,0,0.4) 100%)"}}),p.jsx("div",{className:"absolute top-[20%] w-full flex flex-col items-center justify-center z-40 pointer-events-none",style:{transform:"translateZ(30px) scale(0.35)",transformOrigin:"top center",width:"300%",left:"-100%"},children:p.jsxs("div",{className:"flex flex-col gap-4 items-center justify-center w-full",style:v,children:[(i||a)&&p.jsxs("div",{className:"flex gap-6 items-center justify-center",children:[i&&p.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-[#aa1d1d] via-[#8c1c0b] to-[#450a0a] border-[6px] border-[#ffd700] shadow-[0_20px_40px_black] flex items-center justify-center text-[#fff] font-serif font-black text-7xl tracking-tighter ring-4 ring-black/40 z-10 animate-pulse-slow-opacity",children:p.jsx("span",{className:"drop-shadow-[0_4px_8px_rgba(0,0,0,0.9)] relative -top-1",children:""})}),a&&p.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-[#10b981] via-[#047857] to-[#064e3b] border-[6px] border-[#34d399] shadow-[0_20px_40px_black] flex items-center justify-center text-[#ecfdf5] font-serif font-black text-7xl tracking-tighter ring-4 ring-black/40 z-10",children:p.jsx("span",{className:"drop-shadow-[0_2px_0_rgba(255,255,255,0.4)] relative -top-1",children:""})})]}),o&&o!=="-"&&p.jsx("div",{className:`px-8 py-3 rounded-[12px] shadow-[0_15px_30px_rgba(0,0,0,0.9)] border-[4px] backdrop-blur-xl flex items-center h-24 mt-2 ${x(o)}`,children:p.jsx("span",{className:"text-6xl font-serif font-black tracking-widest drop-shadow-md whitespace-nowrap",style:{textShadow:"0 4px 8px rgba(0,0,0,0.6)"},children:o})})]})})]})]}),n&&d==="HIGH"&&p.jsx("div",{className:"absolute inset-0 -z-10 bg-radial-gradient from-[#ffaa00]/15 to-transparent blur-3xl transform scale-125 translate-y-[-10%] mix-blend-screen animate-pulse-slow-opacity"})]})}),_2=Le.memo(({quality:e})=>e==="LOW"?null:p.jsxs("div",{className:"absolute inset-0 pointer-events-none z-[100]",children:[p.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] mix-blend-overlay"}),p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.6)_100%)]"}),p.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-orange-500/5 blur-[100px] mix-blend-screen pointer-events-none"})]})),x2=Le.memo(({skinId:e,quality:t,style:n})=>t==="LOW"?p.jsx("div",{className:"absolute top-0 inset-x-0 pointer-events-none z-[0] overflow-hidden h-full",style:{background:"linear-gradient(to bottom, rgba(0,0,0,0.3) 0%, transparent 50%)",...n}}):p.jsxs("div",{className:"absolute top-0 inset-x-0 pointer-events-none z-[0] overflow-hidden",style:{maskImage:"linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 60%, rgba(0,0,0,0) 100%)",WebkitMaskImage:"linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 60%, rgba(0,0,0,0) 100%)",height:"100%",...n},children:[p.jsx("div",{className:"absolute inset-0 bg-[#f7f4ef]"}),p.jsx("div",{className:"absolute inset-0 opacity-80 mix-blend-multiply",style:{backgroundImage:`
                        linear-gradient(90deg, #3e2723 2px, transparent 2px),
                        linear-gradient(0deg, #3e2723 2px, transparent 2px)
                     `,backgroundSize:"120px 120px"}}),p.jsx("div",{className:"absolute inset-0 opacity-30 mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.3'/%3E%3C/svg%3E")`}}),p.jsx("div",{className:"absolute top-[-20%] left-1/2 -translate-x-1/2 w-[90%] h-[90%] bg-[radial-gradient(circle,rgba(255,180,80,0.6)_0%,rgba(255,140,40,0.2)_50%,transparent_70%)] blur-[80px] animate-candle-flicker mix-blend-multiply opacity-80"}),p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_30%,rgba(5,2,2,0.8)_100%)]"})]})),S2=Le.memo(({skinId:e})=>e==="taoist_mystery"?null:p.jsx("div",{className:"absolute top-[-25%] left-1/2 -translate-x-1/2 w-[180%] h-[90%] z-[-10] opacity-30 pointer-events-none flex justify-center perspective-[1000px]",style:{transform:"translateZ(-800px)",transformStyle:"preserve-3d"},children:p.jsx("div",{className:"flex w-full h-full",style:{transformStyle:"preserve-3d"},children:[...Array(6)].map((t,n)=>p.jsx("div",{className:"flex-1 bg-gradient-to-b from-black to-transparent border-r border-white/5 relative overflow-hidden origin-bottom",style:{transform:`rotateY(${n%2===0?15:-15}deg) scale(1.1)`},children:p.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(45deg, transparent 45%, rgba(255,255,255,0.05) 50%, transparent 55%)",backgroundSize:"10px 10px"}})},n))})})),b2=Le.memo(({mianZhangCard:e,skin:t,quality:n})=>{if(!e)return null;const i="w-14 h-20 md:w-16 md:h-24";return p.jsxs("div",{className:"absolute left-[10%] top-[10%] z-10",style:{transformStyle:"preserve-3d"},children:[[...Array(6)].map((a,o)=>p.jsx("div",{className:`absolute inset-0 ${i} rounded-[4px] shadow-sm`,style:{transform:`translateZ(${o*.5}px)`,backgroundColor:"#000"},children:p.jsx(t.card.BackComponent,{isSmall:!1})},o)),p.jsx("div",{className:`absolute inset-0 ${i}`,style:{transform:"translateZ(4px) translate(2px, 2px) rotateZ(5deg)"},children:p.jsx(Pn,{card:e,isSmall:!1,isInverted:!0,isFaceDown:!1,isTrick:!0,className:"w-full h-full"})})]})}),jh={camera:{rotateX:40,z:-350,perspective:"1400px"},table:{width:"130vh",height:"85vh"},tableY:"55%",isVertical:!1,hidePaperDolls:!1,hidePingFeng:!1,players:{Top:{top:"-38%",left:"50%",scale:.8},Left:{left:"-32%",top:"0%",scale:.8},Right:{right:"-32%",top:"0%",scale:.8},Bottom:{bottom:"10%",left:"50%",scale:1}},cardScale:1.3,pot:{x:500,y:-280,scale:.8},tableCardSpread:{x:180,y:120},cardCenterOffset:{x:0,y:30}},Xh={mobile_portrait:{camera:{rotateX:50,z:-50,perspective:"1200px"},table:{width:"130vw",height:"140vh"},tableY:"75%",isVertical:!0,hidePaperDolls:!0,hidePingFeng:!0,players:{Top:{top:"10%",left:"50%",scale:.7},Left:{left:"2%",top:"35%",scale:.7},Right:{right:"2%",top:"35%",scale:.7},Bottom:{bottom:"5%",left:"50%",scale:.9}},cardScale:.95,pot:{x:-120,y:-260,scale:.9},tableCardSpread:{x:65,y:85},cardCenterOffset:{x:0,y:50}},mobile_landscape:{camera:{rotateX:35,z:-380,perspective:"1100px"},table:{width:"110vw",height:"80vh"},tableY:"58%",isVertical:!1,hidePaperDolls:!1,hidePingFeng:!0,players:{Top:{top:"-45%",left:"50%",scale:.65},Left:{left:"-35%",top:"0%",scale:.65},Right:{right:"-35%",top:"0%",scale:.65},Bottom:{bottom:"5%",left:"50%",scale:.65}},cardScale:1,pot:{x:350,y:-180,scale:.65},tableCardSpread:{x:130,y:80},cardCenterOffset:{x:0,y:10}},tablet_portrait:{camera:{rotateX:45,z:-600,perspective:"1200px"},table:{width:"90vw",height:"70vh"},tableY:"45%",isVertical:!1,hidePaperDolls:!1,hidePingFeng:!1,players:{Top:{top:"-45%",left:"50%",scale:.8},Left:{left:"-25%",top:"0%",scale:.75},Right:{right:"-25%",top:"0%",scale:.75},Bottom:{bottom:"10%",left:"50%",scale:.75}},cardScale:1.1,pot:{x:320,y:-240,scale:.75},tableCardSpread:{x:140,y:100},cardCenterOffset:{x:0,y:20}},desktop:jh,tablet_landscape:jh},T2=()=>{const[e,t]=I.useState("desktop");return I.useEffect(()=>{const n=()=>{const i=window.innerWidth,a=window.innerHeight,o=i/a;return i>=1024&&o>=1.3?t("desktop"):Math.min(i,a)>=600?t(o<1?"tablet_portrait":"tablet_landscape"):t(o<1?"mobile_portrait":"mobile_landscape")};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),e},C2=Le.memo(({label:e,disabled:t,onClick:n,skin:i,isVertical:a})=>{const[o,l]=I.useState(!1),r=a?350:320,c=150;let d="#1a0b05",f="#d4af37",m="#ffdb7a";i.id==="ming_scholar"&&(d="#3d2616",f="#5c3a21",m="#d9c7b0");const h=()=>{t||(l(!0),n(),setTimeout(()=>l(!1),200))};return t?null:p.jsx("div",{className:"absolute z-[60]",onClick:h,style:{transform:`translate3d(-50%, ${r}px, ${c}px) rotateX(20deg)`,left:"50%",top:"50%",transformStyle:"preserve-3d",cursor:"pointer",pointerEvents:"auto",transition:"opacity 0.3s"},children:p.jsxs("div",{className:`relative w-40 h-16 transition-transform duration-100 ease-out ${o?"translate-y-2":"animate-float-slow"}`,style:{transformStyle:"preserve-3d"},children:[p.jsxs("div",{className:"absolute inset-0 flex items-center justify-center rounded-[4px] transition-all duration-300",style:{background:`linear-gradient(135deg, ${d}, #050202)`,border:`1px solid ${f}`,boxShadow:"0 10px 30px rgba(0,0,0,0.9), inset 0 1px 1px rgba(255,255,255,0.1)",transform:"translateZ(10px)"},children:[p.jsx("span",{className:"font-calligraphy text-2xl tracking-[0.4em] select-none drop-shadow-[0_2px_0_rgba(0,0,0,1)]",style:{color:m},children:e}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/5 to-transparent pointer-events-none rounded-[3px]"})]}),p.jsx("div",{className:"absolute top-0 left-0 w-full h-[15px] origin-top bg-black/80",style:{transform:"rotateX(-90deg)"}}),p.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[15px] origin-bottom",style:{background:"#000",transform:"rotateX(90deg)"}}),p.jsx("div",{className:"absolute top-0 left-0 w-[15px] h-full origin-left bg-black/90",style:{transform:"rotateY(90deg)"}}),p.jsx("div",{className:"absolute top-0 right-0 w-[15px] h-full origin-right bg-black/90",style:{transform:"rotateY(-90deg)"}})]})})}),E2=Le.memo(({skin:e,width:t,height:n,thickness:i=40,visualYOffset:a="0px",children:o,quality:l})=>{const r={filter:"brightness(0.15)"},c=l==="LOW"?"linear-gradient(135deg, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0.02) 100%)":e.layout.tableTexture;return p.jsxs("div",{className:"relative w-full h-full group",style:{transformStyle:"preserve-3d"},children:[p.jsxs("div",{className:"absolute inset-0 pointer-events-none",style:{transform:`translateY(${a})`,transformStyle:"preserve-3d"},children:[p.jsxs("div",{className:`absolute inset-0 z-0 ${e.layout.tableSurfaceClass}`,style:{transform:`translateZ(${i/2}px)`,transformStyle:"preserve-3d"},children:[p.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[inherit]",style:{backgroundColor:e.layout.tableBaseColor||"#1a1a1a",filter:l==="LOW"?"brightness(1.5)":"none"}}),p.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[inherit] mix-blend-normal",style:{backgroundImage:c||"none",backgroundSize:e.layout.tableTextureSize||"auto",opacity:1}}),l==="HIGH"&&p.jsxs(p.Fragment,{children:[e.layout.EnvironmentalShadows&&p.jsx(e.layout.EnvironmentalShadows,{}),e.layout.tableReflectivity&&p.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[inherit] mix-blend-overlay opacity-40 pointer-events-none",style:{background:"linear-gradient(120deg, transparent 30%, rgba(255,255,255,0.15) 45%, rgba(255,255,255,0.05) 50%, transparent 60%)",filter:"blur(10px)"}})]}),p.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[inherit] pointer-events-none mix-blend-multiply bg-[radial-gradient(ellipse_at_center,transparent_40%,rgba(0,0,0,0.85)_100%)]"}),p.jsx("div",{className:"absolute inset-0 w-full h-full rounded-[inherit] pointer-events-none border border-white/10 shadow-[inset_0_0_20px_rgba(0,0,0,0.5)]"})]}),p.jsx("div",{className:`absolute bottom-0 left-0 w-full h-[${i}px] ${e.layout.tableBorderClass}`,style:{...r,height:i,transformOrigin:"bottom",transform:"rotateX(-90deg) translateZ(0px)"}}),p.jsx("div",{className:`absolute top-0 right-0 h-full w-[${i}px] ${e.layout.tableBorderClass}`,style:{...r,width:i,transformOrigin:"right",transform:"rotateY(90deg) translateZ(0px)"}}),p.jsx("div",{className:`absolute top-0 left-0 h-full w-[${i}px] ${e.layout.tableBorderClass}`,style:{...r,width:i,transformOrigin:"left",transform:"rotateY(-90deg) translateZ(0px)"}}),p.jsx("div",{className:`absolute top-0 left-0 w-full h-[${i}px] ${e.layout.tableBorderClass}`,style:{...r,height:i,transformOrigin:"top",transform:"rotateX(90deg) translateZ(0px)"}})]}),p.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none",style:{transform:`translateZ(${i/2}px)`,transformStyle:"preserve-3d"},children:o})]})}),A2=e=>{if(!e.trickPile)return"-";const t=e.trickPile.filter(n=>n.round<=8&&!n.isKaiChong&&n.isFaceUp).length;return t<2?"":t===2?"":t===3?"":""},N2=e=>e.isDealer?{color:"#ef4444",secondaryColor:"#b91c1c",intensity:.9}:e.isBaiLaoRevealed?{color:"#10b981",secondaryColor:"#047857",intensity:.9}:e.isSuspectedBaiLao?{color:"#f59e0b",secondaryColor:"#b45309",intensity:.7}:null,Qh=(e,t)=>e===t,w2=Le.memo(({card:e,playerPos:t,spread:n,centerOffset:i,isFaceDown:a,isWinner:o,isMobilePortrait:l,quality:r})=>{const c=I.useMemo(()=>r==="LOW"?"animate-fade-in":o?"animate-card-smash":a?"animate-card-wither":"animate-fade-in",[o,a,r]),[d,f]=I.useState({transform:"translate(-50%, -50%)",opacity:0});return I.useEffect(()=>{let m=0,h=0;const{x:g,y:_}=n,{x:b,y:T}=i;t==="Bottom"?(m=0,h=_):t==="Top"?(m=0,h=-_):t==="Left"?(m=-g,h=0):t==="Right"&&(m=g,h=0),m+=b,h+=T;const x=o?80:35,v=requestAnimationFrame(()=>{f({transform:`translate(-50%, -50%) translate(${m}px, ${h}px) translateZ(${x}px) rotateX(-25deg)`,opacity:1,transition:r==="LOW"?"opacity 0.2s ease-out":"transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.3s ease-out"})});return()=>cancelAnimationFrame(v)},[t,n,i,o,l,r]),p.jsx("div",{className:"absolute left-1/2 top-1/2 w-16 h-24",style:{...d,transformStyle:"preserve-3d"},children:p.jsxs("div",{className:`w-full h-full ${c}`,style:{transformStyle:"preserve-3d"},children:[p.jsx(Pn,{card:e,isTrick:!0,isFaceDown:a,isWinner:o,isSmall:!1}),o&&r!=="LOW"&&p.jsx("div",{className:"absolute inset-[-50%] bg-white mix-blend-overlay animate-slash pointer-events-none z-50"})]})})},(e,t)=>e.card.id===t.card.id&&e.isWinner===t.isWinner&&e.isFaceDown===t.isFaceDown&&e.playerPos===t.playerPos&&e.quality===t.quality),I2=Le.memo(({cards:e,winnerId:t,layoutConfig:n,players:i,quality:a})=>!e||e.length===0?null:p.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",transformStyle:"preserve-3d",zIndex:10},children:e.map(o=>{const r=i.find(d=>d.id===o.playerId)?.position||"Bottom",c=t===o.playerId;return p.jsx(w2,{card:o.card,playerPos:r,spread:n.tableCardSpread,centerOffset:n.cardCenterOffset,isFaceDown:o.isFaceDown,isWinner:c,isMobilePortrait:n.isVertical,quality:a},`${o.card.id}-${o.playerId}`)})}),(e,t)=>{if(e.winnerId!==t.winnerId||e.cards.length!==t.cards.length||e.quality!==t.quality)return!1;for(let n=0;n<e.cards.length;n++)if(e.cards[n].card.id!==t.cards[n].card.id)return!1;return!0}),R2=Le.memo(({count:e,baseRotation:t=0,scale:n=1,alignLeft:i=!1,alignRight:a=!1,skin:o})=>e<=0?null:p.jsxs("div",{style:{position:"relative",width:`${64*n}px`,height:`${96*n}px`,transformStyle:"preserve-3d"},children:[[...Array(Math.min(e,3))].map((l,r)=>{let c=-r;return i&&(c=r*2),a&&(c=-r*2),p.jsxs("div",{className:"absolute inset-0 shadow-sm rounded-[3px] border-white/10",style:{transform:`translateZ(${r*1}px) translate(${c}px, -${r}px)`},children:[p.jsx(o.card.BackComponent,{isSmall:!0}),p.jsx("div",{className:"absolute inset-0 bg-black/40 animate-pulse-slow pointer-events-none rounded-[inherit] border border-white/10 shadow-[inset_0_0_10px_rgba(0,0,0,0.8)]"})]},r)}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{transform:`translateZ(${Math.min(e,3)*1+2}px) translate(${i?Math.min(e,3)*2:-Math.min(e,3)*2}px, -${Math.min(e,3)}px)`},children:p.jsx("div",{className:"text-[#e6c278] font-serif font-bold text-lg drop-shadow-md bg-black/50 px-2 rounded-full border border-[#5c4025]",children:e})})]})),M2=Le.memo(({cards:e,baseRotation:t=0,scale:n=.5,potCardIds:i,lanternGlow:a,playerId:o,forceVerticalLayout:l=!1,align:r="center",isVertical:c=!1,isFramed:d=!1,hideBackground:f=!1,hideLabel:m=!1})=>{if(!e||e.length===0)return null;const h=8,g=4*n,_=64*n,b=96*n,T=l||t===90||t===-90,x=T?b*Math.ceil(e.length/h):_*Math.min(e.length,h),v=T?_*Math.min(e.length,h):b*Math.ceil(e.length/h),y=8*n,S=x+y*2,E=v+y*2;let A=-x/2;r==="left"&&(A=0),r==="right"&&(A=-x);const C=-v/2,R=c?0:o===2?180:0;return p.jsxs("div",{style:{position:"relative",width:0,height:0,transformStyle:"preserve-3d"},children:[!f&&p.jsx("div",{className:"absolute rounded-[8px]",style:{width:S,height:E,left:A-y,top:C-y,transform:"translateZ(-2px)",background:"rgba(0, 0, 0, 0.25)",boxShadow:"inset 0 0 15px rgba(0,0,0,0.6)"}}),e.map((N,M)=>{let L=M%h,O=Math.floor(M/h),z=L*(_+g),$=O*(b+g);T&&(z=O*(b+g),$=L*(_+g));const G=z+_/2+A,w=$+b/2+C,P=N.rank===B.ZUN||N.rank===B.BAI||N.rank===B.JIAN||N.isPot?a:null;return p.jsxs("div",{className:"absolute w-16 h-24 transition-transform duration-500",style:{left:0,top:0,marginLeft:-32*n,marginTop:-48*n,transform:`translate(${G}px, ${w}px) translateZ(${M*.05}px) rotateZ(${t}deg) scale(${n*.9})`,filter:"brightness(0.65)"},children:[p.jsx("div",{className:"absolute inset-0 rounded-[4px] shadow-[inset_0_0_8px_rgba(0,0,0,0.8)] z-50 pointer-events-none"}),p.jsx(Pn,{card:N,isSmall:!1,isTrick:!1,isFaceDown:!1,isInverted:N.isPot||i?.has(N.id),textRotation:R,className:"border-black/50",lanternGlow:P,isLocked:!0})]},N.id)})]})},(e,t)=>e.cards.length===t.cards.length&&e.scale===t.scale),D2=Le.memo(({player:e,position:t,isMyTurn:n,potCardIds:i,layoutConfig:a,showPaperDolls:o,quality:l})=>{const{skin:r}=hn(),c=e.type==="HUMAN",d=a.players[t];if(!d)return null;let f=0,m={},h={},g=!1,_="center",b=!1,T=!1;if(t==="Top"?(f=180,m={top:"5%",left:"50%",transform:"translateX(-50%)"},h={top:"25%",left:"50%",transform:"translateX(-50%)"}):t==="Left"?(f=90,m={left:"5%",top:"50%",transform:"translateY(-50%)"},h={left:"20%",top:"50%",transform:"translateY(-50%)"}):t==="Right"?(f=-90,m={right:"5%",top:"50%",transform:"translateY(-50%)"},h={right:"20%",top:"50%",transform:"translateY(-50%)"}):t==="Bottom"&&(f=0,h={bottom:"25%",left:"50%",transform:"translateX(-50%)"}),a.isVertical){if(t==="Left"||t==="Right"){f=0,g=!0;const E=e.capturedCards.length;let A=a.cardScale;E>5&&(A*=.85),E>8&&(A*=.85);const C=Math.min(E,8)*1,R=42,N=58,M=`${R-C}%`,L=`${N-C}%`;t==="Left"?(_="left",m={left:"3%",top:M,transform:"translate(0, -50%)"},h={left:"12%",top:L,transform:"translate(0, -50%)"}):(_="right",m={right:"3%",top:M,transform:"translate(0, -50%)"},h={right:"4%",top:L,transform:"translate(0, -50%)"}),a.tempWonScale=A}else if(t==="Top")f=0,m={top:"3%",left:"50%",transform:"translateX(-50%)"},h={top:"26%",left:"50%",transform:"translateX(-50%)",zIndex:10};else if(t==="Bottom"){const C=e.capturedCards.length>10?a.cardScale*.75:a.cardScale;a.tempWonScale=C,h={bottom:"19%",left:"50%",transform:"translateX(-50%)",zIndex:10},b=!0,T=!0}}const x=N2(e),v=a.tempWonScale||a.cardScale,y={position:"absolute",top:d.top,left:d.left,right:d.right,bottom:d.bottom,transform:`translate(${t==="Top"||t==="Left"?"-50%":"50%"}, -50%) rotateX(-45deg) rotateY(${t==="Top"?180:t==="Left"?-20:20}deg) scale(${d.scale})`,zIndex:0};a.isVertical&&(t==="Left"||t==="Right")&&(y.transform=`translateY(-50%) rotateX(-45deg) rotateY(${t==="Left"?-15:15}deg) scale(${d.scale})`);const S=t==="Bottom"?"pointer-events-none":"pointer-events-auto";return p.jsxs("div",{className:"absolute inset-0 pointer-events-none z-[20]",style:{transformStyle:"preserve-3d"},children:[!c&&!a.hidePaperDolls&&o&&p.jsx("div",{style:y,className:"pointer-events-auto origin-bottom",children:p.jsx(y2,{player:e,position:t,isActive:n,isBanker:e.isDealer,isBaiLao:e.isBaiLaoRevealed,statusText:A2(e),quality:l})}),!c&&p.jsx("div",{className:"absolute pointer-events-auto transition-all duration-500",style:{...m,zIndex:30},children:p.jsx(R2,{count:e.hand.length,baseRotation:f,scale:a.cardScale,alignLeft:_==="left",alignRight:_==="right",skin:r})}),e.capturedCards?.length>0&&p.jsx("div",{className:`absolute ${S} transition-all duration-500 opacity-90`,style:{...h},children:p.jsx(M2,{cards:e.capturedCards,baseRotation:f,scale:v,potCardIds:i,lanternGlow:x,playerId:e.id,forceVerticalLayout:g,align:_,isVertical:a.isVertical,isFramed:!0,hideBackground:b,hideLabel:T})})]})},(e,t)=>{const n=e.player,i=t.player;return!(n.id!==i.id||e.isMyTurn!==t.isMyTurn||n.hand.length!==i.hand.length||n.capturedCards.length!==i.capturedCards.length||n.isBaiLaoRevealed!==i.isBaiLaoRevealed||n.isDealer!==i.isDealer||e.showPaperDolls!==t.showPaperDolls||e.layoutConfig.isVertical!==t.layoutConfig.isVertical||e.quality!==t.quality)}),k2=Le.memo(({pot:e,phase:t,kaiChongCardIndex:n,layoutConfig:i,lastGameEvent:a,kaiChongHistory:o,quality:l})=>{if(t!==Oe.KAI_CHONG)return null;const r=t===Oe.KAI_CHONG,c=e,d=i.isVertical;let f=i.pot.scale;d&&(f=.75);const m=(g,_)=>r&&_===n-1&&a?.type==="KAI_CHONG_SUCCESS"?g.color===q.GREEN?{color:"#22c55e",secondaryColor:"#4ade80",intensity:1.5}:g.color===q.RED?{color:"#ef4444",secondaryColor:"#f59e0b",intensity:1.5}:{color:"#60a5fa",secondaryColor:"#93c5fd",intensity:1.5}:null,h=I.useMemo(()=>e.map((g,_)=>({c:g,idx:_})).filter(({c:g,idx:_})=>_<n&&!o?.some(b=>b.matchedCard.id===g.id)).map(g=>g.idx),[e,n,o]);return p.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",transformStyle:"preserve-3d",zIndex:5},children:c.map((g,_)=>{const b=_<n,T=_===n,x=_>n,v=o?.some(L=>L.matchedCard.id===g.id);if(l==="LOW"&&v&&b)return null;let y=0,S=0,E=0,A=f,C=_*2;if(r){if(b&&!v){const L=h.indexOf(_),O=h.length,z=45;S=-((O-1)*z)/2+L*z,y=Math.sin(_*132)*15,E=Math.cos(_*45)*10,A=f*.9,C=20+L}else if(d){const L=n,O=7-L;if(_>=L){const z=_-L,$=-180,G=180;if(O<=1)S=0;else{const w=(G-$)/(O-1);S=$+z*w}y=Math.sin(_*.6)*30,E=_*8}else S=0,y=0}else S=-120+_*40,E=0;if(v&&a?.type==="KAI_CHONG_SUCCESS"){const L=a.playerId;if(Qh(_,n-1))L===0?(S+=600,E+=10):L===1?(y+=600,E+=90):L===2?(S-=600,E-=10):L===3&&(y-=600,E-=90),A=f*.8,C=200;else if(_<n-1)return null}else T&&(C=50,A=f*1.1)}const R=x,N=m(g,_),M=v&&a?.type==="KAI_CHONG_SUCCESS"&&Qh(_,n-1)&&l!=="LOW"?{transition:"transform 0.4s cubic-bezier(0.5, 0, 0.2, 1), opacity 0.4s ease-in"}:{transition:l==="LOW"?"none":"all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1)"};return p.jsx("div",{className:`absolute left-1/2 top-1/2 w-16 h-24 ${T&&l!=="LOW"?"animate-breathe-subtle":""}`,style:{transform:`translate(-50%, -50%) translate(${y}px, ${S}px) rotate(${E}deg) scale(${A}) translateZ(${C}px)`,...M},children:p.jsx(Pn,{card:g,isFaceDown:R,isSmall:!1,isInverted:!0,lanternGlow:N})},g.id)})})},(e,t)=>!(e.phase!==t.phase||e.kaiChongCardIndex!==t.kaiChongCardIndex||e.lastGameEvent!==t.lastGameEvent||e.layoutConfig.isVertical!==t.layoutConfig.isVertical||e.quality!==t.quality)),L2=Le.memo(({state:e,interactionState:t})=>{const{skin:n}=hn(),i=T2(),a=Xh[i]||Xh.desktop,{graphicsQuality:o,showPaperDolls:l}=$a(),{phase:r,currentPlayerIndex:c,trickWinnerId:d,tableCards:f,players:m,bankerId:h,pot:g,mianZhangCard:_,gameMessage:b,violationNotification:T,kaiChongCardIndex:x,kaiChongHistory:v,lastGameEvent:y}=e,S=I.useMemo(()=>f?f.map(A=>A.playerId):[],[f]);return p.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden select-none bg-[#020101]",children:[p.jsx(n.layout.atmosphereComponent,{quality:o}),p.jsx(x2,{skinId:n.id,quality:o,style:{zIndex:1}}),p.jsx(_2,{quality:o}),p.jsx("div",{className:"w-full h-full perspective-container relative z-[20]",style:{perspective:a.camera.perspective},children:p.jsx("div",{className:"world-3d w-full h-full relative preserve-3d transition-transform duration-1000 ease-out",style:{transform:`rotateX(${a.camera.rotateX}deg) translateY(-50%) translateZ(${a.camera.z}px)`,transformStyle:"preserve-3d"},children:p.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 -translate-y-1/2 preserve-3d transition-all duration-1000",style:{top:a.tableY,width:a.table.width,height:a.table.height,transformStyle:"preserve-3d"},children:[!a.hidePingFeng&&p.jsx(S2,{skinId:n.id}),p.jsxs(E2,{skin:n,width:a.table.width,height:a.table.height,visualYOffset:"0px",quality:o,children:[p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[10]",style:{transform:"translateY(0%) translateZ(1px)"},children:p.jsxs("div",{className:"w-full max-w-[800px] relative opacity-90 transition-all duration-700",style:{aspectRatio:a.isVertical?"3/4":"2/1"},children:[p.jsx(Yw,{activePlayerId:c,bankerId:h,revealedBaiLaoId:m.find(A=>A.isBaiLaoRevealed)?.id??null,suspectedBaiLaoId:m.find(A=>A.isSuspectedBaiLao)?.id??null,hasTableCards:f?.length>0,playedPlayerIds:S,phase:r,isVertical:a.isVertical,quality:o}),p.jsx(n.lighting.TableBorderFlow,{activePlayerId:c,isVertical:a.isVertical,quality:o})]})}),p.jsx(b2,{mianZhangCard:_,skin:n,quality:o}),r!==Oe.DEALING&&p.jsxs(p.Fragment,{children:[m.map(A=>{const C=v.filter(N=>N.playerId===A.id),R=new Set(C.map(N=>N.matchedCard.id));return p.jsx(D2,{player:A,position:A.position,isMyTurn:c===A.id,potCardIds:R,layoutConfig:a,quality:o,showPaperDolls:l},A.id)}),p.jsx(k2,{pot:g,phase:r,kaiChongCardIndex:x,layoutConfig:a,lastGameEvent:y,kaiChongHistory:v,quality:o}),p.jsx(I2,{cards:f,winnerId:d,layoutConfig:a,players:m,quality:o})]}),p.jsx(n.lighting.StoveLighting,{activePlayerId:c,spotlightPos:r===Oe.KAI_CHONG?{x:`${50+(x-3)*8}%`,y:"50%"}:null,quality:o}),t&&!a.isVertical&&p.jsx(C2,{label:t.label,disabled:t.disabled,onClick:t.onActionClick,skin:n,isVertical:a.isVertical}),b&&p.jsx("div",{className:"absolute top-1/2 left-1/2 z-[1000] flex items-center justify-center pointer-events-none",style:{transform:"translate(-50%, -50%) translateZ(120px) rotateX(-45deg)",width:"100%",textAlign:"center"},children:p.jsx("div",{className:"text-[#ffdb7a] font-calligraphy text-4xl md:text-5xl drop-shadow-[0_2px_8px_rgba(0,0,0,1)] bg-transparent backdrop-blur-sm animate-fade-in-up tracking-[0.2em]",style:{textShadow:"0 0 10px rgba(255, 219, 122, 0.3)"},children:b})}),T&&p.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[200]",style:{transform:"translateZ(200px) rotateX(-45deg)"},children:p.jsxs("div",{className:"bg-[#1a0505]/95 border border-[#8c1c0b] p-6 text-center shadow-[0_0_50px_rgba(0,0,0,0.8)] rounded-sm animate-shake backdrop-blur-md min-w-[300px]",children:[p.jsx("h3",{className:"text-xl text-[#ff4d4d] font-bold uppercase mb-2 tracking-[0.2em] drop-shadow-md",children:T.title}),p.jsx("p",{className:"text-[#e8e4d9] text-sm font-serif leading-relaxed",children:T.message})]})})]})]})})})]})},(e,t)=>!(e.state.phase!==t.state.phase||e.state.currentPlayerIndex!==t.state.currentPlayerIndex||e.state.tableCards!==t.state.tableCards||e.state.players!==t.state.players||e.state.gameMessage!==t.state.gameMessage)),xy=e=>{if(!e||!Array.isArray(e))return{text:"-",color:"bg-black/40",textColor:"text-white/40"};const t=e.filter(n=>n.round<=8&&!n.isKaiChong&&n.isFaceUp).length;return t<2?{text:"",color:"bg-red-900/90",textColor:"text-red-100"}:t===2?{text:"",color:"bg-stone-800/90",textColor:"text-stone-300"}:{text:"",color:"bg-emerald-900/90",textColor:"text-emerald-200"}},Sy=e=>e?e.length>5?e.substring(0,4)+".":e:"Player",sc="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23333'/%3E%3Ccircle cx='50' cy='40' r='20' fill='%23666'/%3E%3Cpath d='M20 90 Q50 60 80 90' fill='%23666'/%3E%3C/svg%3E",U2=Le.memo(({players:e,bankerId:t,currentPlayerIndex:n,aiChatMessages:i})=>{const{skin:a}=hn(),o=e.filter(l=>l.type!==st.HUMAN);return p.jsx("div",{className:"fixed inset-0 pointer-events-none z-[200]",children:o.map(l=>{const r=e[n]?.id===l.id,c=l.id===t,d=l.isBaiLaoRevealed||l.isSuspectedBaiLao,f=l.profile,m=f?.avatar_url||`https://api.dicebear.com/9.x/miniavs/svg?seed=${l.name}&backgroundColor=transparent`,h=xy(l.trickPile),g=i[l.id];let _="hidden";return l.position==="Top"?_="top-[2%] landscape:top-[2%] left-1/2 -translate-x-1/2":l.position==="Left"?_="top-[18%] left-[2%] landscape:top-[35%] landscape:left-[1%]":l.position==="Right"&&(_="top-[18%] right-[2%] landscape:top-[35%] landscape:right-[1%]"),p.jsxs("div",{className:`absolute flex flex-col items-center pointer-events-auto transition-all duration-500 ${_}`,children:[p.jsxs("div",{className:`overflow-hidden ${a.hud.avatarContainerClass(r)} relative group`,children:[p.jsx("img",{src:m,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700",alt:l.name,onError:b=>{b.target.src=sc}}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/90 pointer-events-none"}),p.jsxs("div",{className:"absolute top-1 right-1 flex flex-col gap-0.5 items-end z-10",children:[c&&p.jsx("div",{className:"w-3.5 h-3.5 md:w-4 md:h-4 bg-[#8c1c0b] text-[#e8e4d9] rounded-full flex items-center justify-center text-[8px] md:text-[9px] font-bold border border-[#b8860b] shadow-md leading-none",children:""}),d&&p.jsx("div",{className:"w-3.5 h-3.5 md:w-4 md:h-4 bg-[#047857] text-[#e8e4d9] rounded-full flex items-center justify-center text-[8px] md:text-[9px] font-bold border border-[#34d399] shadow-md leading-none",children:""})]}),p.jsxs("div",{className:"absolute bottom-0 inset-x-0 flex flex-col z-10",children:[p.jsx("div",{className:"text-[8px] md:text-[10px] text-center text-[#e8e4d9] font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,1)] truncate px-1 pb-[1px]",children:Sy(f?.username||l.name)}),p.jsx("div",{className:`h-3.5 md:h-4 w-full flex items-center justify-center ${h.color} backdrop-blur-sm`,children:p.jsx("span",{className:`text-[7px] md:text-[9px] font-serif font-bold ${h.textColor} scale-90`,children:h.text})})]})]}),g&&p.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-28 md:w-36 z-[300] animate-fade-in-up",children:p.jsxs("div",{className:"bg-[#e8e4d9]/95 text-[#1a0505] p-2 rounded-sm text-[9px] md:text-[11px] font-serif shadow-xl border border-[#c5a059] text-center relative leading-tight",children:[p.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-[#e8e4d9] transform rotate-45 border-l border-t border-[#c5a059]"}),g]})})]},l.id)})})}),G2=Le.memo(({player:e,isMyTurn:t,onCardClick:n,onDragPlay:i,onPlayConfirm:a,selectedCardId:o,highlightedCardIds:l,cardMarkers:r,oneClickPlay:c,canInteract:d,actionLabel:f,mianZhangCard:m})=>{const{skin:h}=hn(),g=I.useRef(null),[_,b]=I.useState(null),[T,x]=I.useState(null),[v,y]=I.useState(null),[S,E]=I.useState(typeof window<"u"?window.innerWidth:375),[A,C]=I.useState(typeof window<"u"?window.innerHeight>window.innerWidth:!0);if(I.useEffect(()=>{const V=()=>{E(window.innerWidth),C(window.innerHeight>window.innerWidth)};return window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]),!e||e.type!==st.HUMAN)return null;const N=e.profile?.avatar_url||"https://api.dicebear.com/9.x/miniavs/svg?seed=Me&backgroundColor=transparent",M=xy(e.trickPile),L=e.isDealer,O=e.isBaiLaoRevealed||e.isSuspectedBaiLao,z=I.useCallback(V=>{d&&(c?a(V):n(V))},[d,c,a,n]),$=()=>{if(d)if(o)a(o);else if(l&&l.size>0){const V=Array.from(l)[0];a(V)}else e.hand.length>0&&a(e.hand[0].id)},G=(V,Re,X)=>{d&&(g.current={id:X,startX:V,startY:Re,currentX:V,currentY:Re},S<768?y(X):(b(X),x({x:0,y:0})))};I.useEffect(()=>{const V=window.innerWidth<768,Re=Ge=>{if(!g.current)return;const Xe="touches"in Ge?Ge.touches[0].clientX:Ge.clientX,He="touches"in Ge?Ge.touches[0].clientY:Ge.clientY;if(g.current.currentX=Xe,g.current.currentY=He,V){const yt=document.elementFromPoint(Xe,He)?.closest("[data-card-id]");if(yt){const Ht=yt.getAttribute("data-card-id");Ht&&Ht!==v&&y(Ht)}}else x({x:Xe-g.current.startX,y:He-g.current.startY})},X=Ge=>{if(g.current){const{id:Xe,startY:He,currentY:tt,startX:yt,currentX:Ht}=g.current,Bt=V&&v?v:Xe,on=tt-He,_i=Ht-yt,On=Math.sqrt(_i*_i+on*on);on<-80?i(Bt):On<30?z(Bt):V&&Math.abs(_i)>20&&n(Bt),g.current=null,b(null),x(null),y(null)}};return window.addEventListener("mousemove",Re),window.addEventListener("touchmove",Re,{passive:!1}),window.addEventListener("mouseup",X),window.addEventListener("touchend",X),()=>{window.removeEventListener("mousemove",Re),window.removeEventListener("touchmove",Re),window.removeEventListener("mouseup",X),window.removeEventListener("touchend",X)}},[z,i,v,n,c]);const w=e.hand.length,U=S<768,P=U?6.8:7.5,ve=P*16,mt=S-(U?0:100),gt=V=>{if(U){let Re=0;const X=w*ve;if(X<=mt)Re=-((X+(w-1)*8)/2)+ve/2+V*(ve+8);else{const Ge=mt-ve,Xe=w>1?Ge/(w-1):0;Re=-(Ge/2)+V*Xe}return{x:Re,y:0,rot:0,scale:1,zIndex:100+V,width:`${P}rem`,marginLeft:`-${P/2}rem`,bottom:"10px",transformOrigin:"center bottom"}}else{let Ge=Math.min(40,w*5);const Xe=-Ge/2,He=w>1?Ge/(w-1):0;return{x:0,y:0,rot:Xe+V*He,scale:1,zIndex:100+V,width:"7.5rem",marginLeft:"-3.75rem",bottom:"30px",transformOrigin:"50% 800px"}}},vt=()=>{const V=d;return p.jsx("div",{className:"absolute bottom-[16%] left-1/2 -translate-x-1/2 z-[90] transition-all duration-500 ease-out flex items-center justify-center",onClick:V?$:void 0,children:p.jsxs("div",{className:`flex items-center px-4 py-3 rounded-full transition-all duration-300 min-w-[200px] justify-between relative overflow-hidden group ${V?"bg-[#1a0b05] border border-[#d4af37] shadow-[inset_0_0_15px_rgba(212,175,55,0.1),0_0_10px_rgba(212,175,55,0.2)] cursor-pointer active:scale-95":"bg-[#080402] border border-[#3e2b22] shadow-[inset_0_2px_6px_rgba(0,0,0,0.9),0_1px_0_rgba(255,255,255,0.05)] opacity-80 grayscale-[0.5]"}`,children:[p.jsxs("div",{className:"relative w-10 h-10 rounded-full overflow-hidden shrink-0 shadow-inner mr-4",children:[p.jsx("img",{src:N,className:"w-full h-full object-cover filter brightness-90 contrast-110",alt:"Me",onError:Xe=>{Xe.target.src=sc}}),p.jsx("div",{className:"absolute inset-0 bg-black/10 shadow-[inset_0_0_4px_rgba(0,0,0,0.8)] pointer-events-none"})]}),p.jsx("div",{className:"flex-1 flex items-center justify-center relative",children:V?p.jsx("span",{className:"text-[#ffdb7a] font-calligraphy text-2xl font-bold tracking-[0.2em] drop-shadow-md whitespace-nowrap",children:f||""}):p.jsxs("div",{className:"flex flex-col items-start gap-0.5",children:[p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("div",{className:"text-[10px] text-[#8c6239] font-serif font-bold tracking-wider uppercase",children:L?"Banker":O?"Million":"Wait"})}),p.jsxs("div",{className:`text-xs font-mono font-bold ${e.score>=0?"text-[#4ade80]":"text-[#ff6b6b]"}`,children:["Score: ",e.score]})]})})]})})};return p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[100] perspective-container overflow-visible",style:{perspective:"1200px"},children:[U&&A?p.jsx(vt,{}):p.jsxs("div",{className:"absolute bottom-[40px] right-[5%] pointer-events-auto flex flex-col items-center z-[150] animate-fade-in-up",children:[p.jsxs("div",{className:`overflow-hidden ${h.hud.avatarContainerClass(t)} relative group`,children:[p.jsx("img",{src:N,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700",alt:"Me",onError:V=>{V.target.src=sc}}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/90 pointer-events-none"}),p.jsxs("div",{className:"absolute top-1 right-1 flex flex-col gap-0.5 items-end z-10",children:[L&&p.jsx("div",{className:"w-3.5 h-3.5 md:w-4 md:h-4 bg-[#8c1c0b] text-[#e8e4d9] rounded-full flex items-center justify-center text-[8px] md:text-[9px] font-bold border border-[#b8860b] shadow-sm leading-none",children:""}),O&&p.jsx("div",{className:"w-3.5 h-3.5 md:w-4 md:h-4 bg-[#047857] text-[#e8e4d9] rounded-full flex items-center justify-center text-[8px] md:text-[9px] font-bold border border-[#34d399] shadow-sm leading-none",children:""})]}),p.jsxs("div",{className:"absolute bottom-0 inset-x-0 flex flex-col z-10",children:[p.jsx("div",{className:"text-[8px] md:text-[10px] text-center text-[#e8e4d9] font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.1)] truncate px-1 pb-[1px]",children:Sy("You")}),p.jsx("div",{className:`h-3.5 md:h-4 w-full flex items-center justify-center ${M.color} backdrop-blur-sm`,children:p.jsx("span",{className:`text-[7px] md:text-[9px] font-serif font-bold ${M.textColor} scale-90`,children:M.text})})]})]}),p.jsx("div",{className:`mt-1 text-lg font-bold font-serif ${e.score>=0?"text-[#4ade80]":"text-[#ff6b6b]"} drop-shadow-md bg-black/60 px-2 rounded-full border border-white/10`,children:e.score})]}),p.jsxs("div",{className:"absolute left-1/2 w-full flex justify-center items-end pointer-events-none",style:{transformStyle:"preserve-3d",transform:"translateX(-50%)",bottom:"0px",height:"0px",zIndex:200},children:[e.hand.map((V,Re)=>{const X=gt(Re);if(_===V.id)return null;const Xe=U?{position:"absolute",left:"50%",bottom:X.bottom,width:X.width,marginLeft:X.marginLeft,transform:`translate3d(${X.x}px, ${X.y}px, ${Re}px)`,zIndex:300}:{position:"absolute",left:"50%",bottom:X.bottom,width:X.width,marginLeft:X.marginLeft,transformOrigin:X.transformOrigin,transform:`rotateZ(${X.rot}deg) translateZ(${Re}px)`,zIndex:300};return p.jsx("div",{"data-card-id":V.id,className:"pointer-events-auto opacity-0 cursor-pointer",style:{...Xe,height:U?"8rem":"10rem"},onMouseDown:He=>G(He.clientX,He.clientY,V.id),onTouchStart:He=>G(He.touches[0].clientX,He.touches[0].clientY,V.id)},`hit-${V.id}`)}),e.hand.map((V,Re)=>{const X=gt(Re),Ge=_===V.id,Xe=l&&l.has(V.id),He=r?r[V.id]:{isMature:!1,isForbidden:!1};let tt=!1;d&&(U?v?tt=v===V.id:tt=o===V.id:tt=o===V.id||_===V.id);let yt={};if(Ge&&T&&!U)yt={position:"absolute",left:"50%",bottom:"150px",transform:`translate(${T.x}px, ${T.y}px) scale(1.1) rotateZ(0deg)`,width:"7.5rem",transformOrigin:"center center",zIndex:1e3,opacity:.85,backdropFilter:"blur(2px)"};else if(U){const Ht=tt?-60:0,Bt=tt?50:0,on=tt?1.25:1;yt={position:"absolute",left:"50%",bottom:X.bottom,marginLeft:X.marginLeft,width:X.width,transformOrigin:"center bottom",transform:`translate3d(${X.x}px, ${X.y+Ht}px, ${Re+Bt}px) scale(${on})`,zIndex:tt?1e3:X.zIndex,transition:"transform 0.15s cubic-bezier(0.1, 0.9, 0.2, 1)",opacity:tt?.9:1}}else{let Ht=0,Bt=0,on=1;const _i=X.rot;tt&&(Ht=-30,Bt=50,on=1.15),yt={position:"absolute",left:"50%",bottom:X.bottom,marginLeft:X.marginLeft,width:X.width,transformOrigin:X.transformOrigin,transform:`rotateZ(${_i}deg) translateY(${Ht}px) translateZ(${Re+Bt}px) scale(${on})`,zIndex:tt?1e3:X.zIndex,transition:"transform 0.1s cubic-bezier(0.2, 0.8, 0.2, 1)"}}return p.jsx("div",{className:"pointer-events-none",style:yt,children:p.jsx("div",{className:"w-full h-full rounded-[4px]",children:p.jsx(Pn,{card:V,isHand:!0,isDisabled:!1,isSelected:tt,suitStatus:He.isMature?"SAFE":He.isForbidden?"FORBIDDEN":"NEUTRAL",isDraggable:!1,isSuggested:Xe,isSuspectedBaiLao:e.isSuspectedBaiLao,isBaiLao:!1,isBanker:!1,isFaceDown:!1})})},`vis-${V.id}`)})]})]})}),H2=({className:e="",size:t=200,id:n})=>{const i=I.useMemo(()=>Math.random().toString(36).substr(2,9),[]);return p.jsx("div",{id:n,className:`relative overflow-hidden rounded-[22%] shadow-2xl ${e}`,style:{width:t,height:t},children:p.jsxs("svg",{viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",preserveAspectRatio:"xMidYMid slice",children:[p.jsxs("defs",{children:[p.jsxs("filter",{id:`ancientRubbing-${i}`,children:[p.jsx("feMorphology",{operator:"dilate",radius:"1.5",in:"SourceAlpha",result:"thick"}),p.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.8",numOctaves:"3",result:"noise"}),p.jsx("feComposite",{operator:"in",in:"noise",in2:"thick",result:"texturedText"}),p.jsx("feComposite",{operator:"in",in:"SourceGraphic",in2:"thick"}),p.jsx("feGaussianBlur",{stdDeviation:"0.3"})]}),p.jsxs("filter",{id:`crispVeins-${i}`,children:[p.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.015",numOctaves:"5",result:"noise"}),p.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:"5"}),p.jsx("feComposite",{operator:"in",in2:"SourceGraphic"})]}),p.jsxs("filter",{id:`moonGlow-${i}`,children:[p.jsx("feGaussianBlur",{stdDeviation:"2.5",result:"coloredBlur"}),p.jsxs("feMerge",{children:[p.jsx("feMergeNode",{in:"coloredBlur"}),p.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),p.jsxs("filter",{id:`nightGrain-${i}`,children:[p.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.9",numOctaves:"3",result:"noise"}),p.jsx("feColorMatrix",{type:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 0.08 0"}),p.jsx("feComposite",{operator:"in",in2:"SourceGraphic"})]}),p.jsxs("radialGradient",{id:`nightGrad-${i}`,cx:"50%",cy:"30%",r:"90%",fx:"50%",fy:"30%",children:[p.jsx("stop",{offset:"0%",stopColor:"#1a1e24"}),p.jsx("stop",{offset:"60%",stopColor:"#08090c"}),p.jsx("stop",{offset:"100%",stopColor:"#000000"})]}),p.jsxs("linearGradient",{id:`leafGreen-${i}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#3d5c3d"}),p.jsx("stop",{offset:"60%",stopColor:"#223822"}),p.jsx("stop",{offset:"100%",stopColor:"#0f1a0f"})]}),p.jsxs("linearGradient",{id:`leafMixed-${i}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#9c8c74"}),p.jsx("stop",{offset:"50%",stopColor:"#807050"}),p.jsx("stop",{offset:"100%",stopColor:"#4a4030"})]}),p.jsxs("linearGradient",{id:`leafRed-${i}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#8a3324"}),p.jsx("stop",{offset:"50%",stopColor:"#5e2121"}),p.jsx("stop",{offset:"100%",stopColor:"#2e0f0f"})]}),p.jsxs("linearGradient",{id:`veinLight-${i}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[p.jsx("stop",{offset:"0%",stopColor:"transparent"}),p.jsx("stop",{offset:"50%",stopColor:"#b0c4de",stopOpacity:"0.2"}),p.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),p.jsxs("radialGradient",{id:`heavyVignette-${i}`,cx:"50%",cy:"50%",r:"55%",children:[p.jsx("stop",{offset:"70%",stopColor:"transparent"}),p.jsx("stop",{offset:"100%",stopColor:"#000",stopOpacity:"0.9"})]})]}),p.jsx("rect",{width:"512",height:"512",fill:`url(#nightGrad-${i})`}),p.jsx("rect",{width:"512",height:"512",fill:"white",filter:`url(#nightGrain-${i})`,opacity:"0.15",style:{mixBlendMode:"overlay"}}),p.jsx("path",{d:"M-10,90 C150,120 362,120 522,90",stroke:"#5c4025",strokeWidth:"2",fill:"none",opacity:"0.7",filter:`url(#moonGlow-${i})`}),p.jsxs("g",{transform:"translate(256, 90)",children:[p.jsxs("g",{transform:"translate(-140, 20) rotate(8)",children:[p.jsx("path",{d:"M0,0 C -110,60 -90,260 0,360 C 90,260 110,60 0,0 Z",fill:`url(#leafGreen-${i})`,filter:`url(#crispVeins-${i})`}),p.jsx("path",{d:"M0,0 L0,350",stroke:"#000",strokeWidth:"1",opacity:"0.4"}),p.jsx("path",{d:"M0,0 L0,350",stroke:`url(#veinLight-${i})`,strokeWidth:"1",opacity:"0.4"}),p.jsx("text",{x:"0",y:"200",textAnchor:"middle",fontFamily:"'Ma Shan Zheng', serif",fontSize:"130",fill:"#0a1a0a",stroke:"#0a1a0a",strokeWidth:"3",opacity:"0.9",filter:`url(#ancientRubbing-${i})`,style:{mixBlendMode:"multiply"},children:""}),p.jsx("circle",{cx:"0",cy:"5",r:"3",fill:"#221"})]}),p.jsxs("g",{transform:"translate(0, 30) rotate(0)",children:[p.jsx("path",{d:"M0,0 C -115,70 -95,280 0,380 C 95,280 115,70 0,0 Z",fill:`url(#leafMixed-${i})`,filter:`url(#crispVeins-${i})`}),p.jsx("path",{d:"M0,0 L0,370",stroke:"#000",strokeWidth:"1",opacity:"0.4"}),p.jsx("path",{d:"M0,0 L0,370",stroke:`url(#veinLight-${i})`,strokeWidth:"1",opacity:"0.5"}),p.jsx("text",{x:"0",y:"210",textAnchor:"middle",fontFamily:"'Ma Shan Zheng', serif",fontSize:"140",fill:"#2e2618",stroke:"#2e2618",strokeWidth:"3",opacity:"0.95",filter:`url(#ancientRubbing-${i})`,style:{mixBlendMode:"multiply"},children:""}),p.jsx("circle",{cx:"0",cy:"5",r:"3",fill:"#221"})]}),p.jsxs("g",{transform:"translate(140, 20) rotate(-8)",children:[p.jsx("path",{d:"M0,0 C -110,60 -90,260 0,360 C 90,260 110,60 0,0 Z",fill:`url(#leafRed-${i})`,filter:`url(#crispVeins-${i})`}),p.jsx("path",{d:"M0,0 L0,350",stroke:"#000",strokeWidth:"1",opacity:"0.4"}),p.jsx("path",{d:"M0,0 L0,350",stroke:`url(#veinLight-${i})`,strokeWidth:"1",opacity:"0.4"}),p.jsx("text",{x:"0",y:"200",textAnchor:"middle",fontFamily:"'Ma Shan Zheng', serif",fontSize:"130",fill:"#1f0a0a",stroke:"#1f0a0a",strokeWidth:"3",opacity:"0.9",filter:`url(#ancientRubbing-${i})`,style:{mixBlendMode:"multiply"},children:""}),p.jsx("circle",{cx:"0",cy:"5",r:"3",fill:"#221"})]})]}),p.jsx("rect",{x:"0",y:"380",width:"512",height:"132",fill:`url(#nightGrad-${i})`,opacity:"0.4",filter:`url(#moonGlow-${i})`}),p.jsx("rect",{width:"512",height:"512",fill:`url(#heavyVignette-${i})`,style:{mixBlendMode:"multiply"}})]})})},B2=e=>e.length>8?e.substring(0,8)+"...":e,P2=e=>`https://flagcdn.com/w40/${e.toLowerCase()}.png`,O2=e=>e<0?"text-transparent bg-clip-text bg-gradient-to-b from-rose-400 to-red-600 drop-shadow-sm font-black":e>0?"text-transparent bg-clip-text bg-gradient-to-b from-emerald-300 to-emerald-600 drop-shadow-[0_0_8px_rgba(16,185,129,0.4)] font-black":"text-stone-500 font-bold",z2=e=>e<2?{text:"",bg:"bg-red-900/40",border:"border-red-800",textCol:"text-red-300"}:e===2?{text:"",bg:"bg-stone-800/40",border:"border-stone-700",textCol:"text-stone-400"}:{text:"",bg:"bg-emerald-900/40",border:"border-emerald-700",textCol:"text-emerald-300"},q2=({card:e,onClose:t})=>e?p.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/90 backdrop-blur-lg animate-fade-in cursor-zoom-out",onClick:t,children:[p.jsx("div",{className:"relative transform scale-[1.5] md:scale-[2.0] transition-transform duration-300 shadow-[0_0_50px_rgba(0,0,0,1)] rounded-xl",onClick:n=>n.stopPropagation(),children:p.jsx("div",{className:"w-40 h-64 pointer-events-none",children:p.jsx(Pn,{card:e,isTrick:!1,isHand:!1,isSmall:!1,isFaceDown:!1,isInverted:e.isPot})})}),p.jsx("div",{className:"absolute bottom-10 text-white/50 text-xs md:text-sm font-serif tracking-[0.3em] animate-pulse",children:"TAP TO CLOSE"})]}):null,Wh=({onClick:e,label:t,primary:n=!1,icon:i=null})=>p.jsxs("button",{onClick:e,className:`
            relative overflow-hidden group
            px-8 py-4 min-w-[160px] md:min-w-[200px]
            font-serif font-bold tracking-[0.25em] text-sm md:text-base uppercase
            transition-all duration-300 rounded-[4px]
            flex items-center justify-center gap-2
            shadow-[0_4px_15px_rgba(0,0,0,0.5)]
            ${n?"bg-gradient-to-b from-[#e6c278] to-[#b48a26] text-[#1a0505] border border-[#fcd34d]/50 shadow-[0_0_20px_rgba(212,175,55,0.2)]":"bg-black/60 border border-[#5c4025] text-[#8c6239] hover:text-[#d4af37] hover:border-[#d4af37] backdrop-blur-md"}
        `,children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out pointer-events-none"}),p.jsx("span",{className:"relative z-10 drop-shadow-md",children:t}),i&&p.jsx("span",{className:"relative z-10 text-lg",children:i})]}),V2=Le.memo(({label:e,score:t,cards:n,highlightInverted:i,onCardClick:a})=>p.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between border-b border-[#3e2b22]/30 p-4 hover:bg-white/5 transition-colors gap-3 font-serif bg-[#0f0a08]/40 rounded-sm mb-1 group relative overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#d4af37]/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"}),p.jsxs("div",{className:"w-full md:w-1/3 flex items-center gap-2 relative z-10",children:[p.jsx("div",{className:"w-1 h-4 bg-[#5c4025] group-hover:bg-[#d4af37] transition-colors"}),p.jsx("span",{className:"text-[#a0a0a0] group-hover:text-[#d4af37] text-sm tracking-wider font-bold transition-colors",children:e})]}),p.jsx("div",{className:"flex flex-wrap gap-2 md:justify-center w-full md:w-1/3 py-2 md:py-0 relative z-10",children:n.map((o,l)=>{const r=o.isPot||i&&l===n.length-1;return p.jsx("div",{className:"relative z-10 min-w-[30px] min-h-[45px] transition-transform hover:-translate-y-1 cursor-pointer",onClick:c=>{c.stopPropagation(),a(o)},children:p.jsx(Pn,{card:o,isSmall:!0,isInverted:r,isFaceDown:!1,isLocked:!0})},l)})}),p.jsx("div",{className:"w-full md:w-1/3 text-right relative z-10",children:p.jsxs("span",{className:`font-black text-xl ${t>0?"text-[#4ade80] drop-shadow-[0_0_5px_rgba(74,222,128,0.5)]":"text-[#f87171]"}`,children:[t>0?"+":"",t]})})]})),F2=({results:e,onClose:t,onNextRound:n,onHome:i,onQuit:a,bankerId:o,language:l,players:r})=>{const{skin:c}=hn(),{isMobileDevice:d}=$a(),[f,m]=I.useState([]),[h,g]=I.useState(null),_=v=>{m(y=>y.includes(v)?y.filter(S=>S!==v):[...y,v])},b=v=>(mi[l]||mi.en)?.[v]||v,T=v=>{const S={TONG:"kc_single",BROTHER:"kc_brother",SHUANG_LIN:"kc_double",SHUN_LING:"kc_seq",JIAN_LING:"kc_gap"}[v];return S?b(S):v};I.useEffect(()=>{const v=e.reduce((y,S)=>y.totalRoundChange>S.totalRoundChange?y:S);v&&f.length===0&&m([v.playerId])},[]);const x=({res:v})=>p.jsxs("div",{className:"bg-[#0a0503] p-4 md:p-6 shadow-[inset_0_0_40px_rgba(0,0,0,0.9)] border-t border-[#3e2b22] animate-fade-in relative overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] pointer-events-none"}),p.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-6 md:hidden text-center bg-[#15100e] p-3 rounded-sm border border-[#3e2b22]/50",children:[p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-[8px] text-[#5c4025] uppercase tracking-wider",children:b("diaoPoints")}),p.jsx("div",{className:`text-xs ${v.diaoPointChange!==0?"text-[#e6c278]":"text-[#444]"}`,children:v.diaoPointChange})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-[8px] text-[#5c4025] uppercase tracking-wider",children:b("kaiZhuPoints")}),p.jsx("div",{className:`text-xs ${v.kaiZhuPointChange!==0?"text-[#e6c278]":"text-[#444]"}`,children:v.kaiZhuPointChange})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-[8px] text-[#5c4025] uppercase tracking-wider",children:b("qiaoMenPoints")}),p.jsx("div",{className:`text-xs ${v.qiaoMenPointChange!==0?"text-[#e6c278]":"text-[#444]"}`,children:v.qiaoMenPointChange})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-[8px] text-[#5c4025] uppercase tracking-wider",children:b("seYangPoints")}),p.jsx("div",{className:`text-xs ${v.seYangPointChange!==0?"text-[#e6c278]":"text-[#444]"}`,children:v.seYangPointChange})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-[8px] text-[#5c4025] uppercase tracking-wider",children:b("kaiChongPoints")}),p.jsx("div",{className:`text-xs ${v.kaiChongPointChange!==0?"text-[#e6c278]":"text-[#444]"}`,children:v.kaiChongPointChange})]})]}),v.allCapturedCards&&v.allCapturedCards.length>0&&p.jsxs("div",{className:"mb-6 relative z-10",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b border-[#3e2b22] pb-2",children:[p.jsx("span",{className:"text-[#8c6239] text-xs font-bold uppercase tracking-[0.2em]",children:b("visibleCards")}),p.jsx("span",{className:"bg-[#3e2b22] text-[#d9c7b0] text-[10px] px-1.5 py-0.5 rounded-sm font-mono",children:v.cardsWonCount})]}),p.jsx("div",{className:"flex flex-wrap gap-2 pl-2",children:v.allCapturedCards.map((y,S)=>p.jsx("div",{className:"relative z-10 min-w-[30px] min-h-[45px] transition-transform hover:-translate-y-1 duration-300 hover:scale-110 hover:z-50",onClick:E=>{E.stopPropagation(),g(y)},children:p.jsx(Pn,{card:y,isSmall:!0,isInverted:y.isPot,isFaceDown:!1,isLocked:!0})},S))})]}),p.jsxs("div",{className:"space-y-1 relative z-10",children:[[...v.kaiChongDetails.map(y=>({name:T(y.matchType),cards:[...y.sourceCards,y.matchedCard],score:y.score,isInverted:!0})),...v.patternDetails.map(y=>({name:y.name,cards:y.cards,score:y.score,isInverted:!1}))].map((y,S)=>p.jsx(V2,{label:y.name,score:y.score,cards:y.cards||[],highlightInverted:y.isInverted,onCardClick:g},S)),v.patternDetails.length===0&&v.kaiChongDetails.length===0&&p.jsx("div",{className:"text-center text-[#3e2b22] italic py-4 text-xs border border-dashed border-[#2a1d15] rounded-sm",children:"No special patterns formed"})]})]});return p.jsxs("div",{className:"fixed inset-0 z-[500] bg-[#050202] flex flex-col animate-fade-in font-serif overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-30 pointer-events-none z-0"}),p.jsx("div",{className:"absolute top-[-30%] left-1/2 -translate-x-1/2 w-[150%] h-[80%] bg-[radial-gradient(circle,rgba(140,28,11,0.15)_0%,transparent_70%)] blur-[120px] pointer-events-none z-0"}),p.jsx("div",{className:"absolute bottom-[-30%] right-[-20%] w-[100%] h-[60%] bg-[radial-gradient(circle,rgba(212,175,55,0.05)_0%,transparent_70%)] blur-[120px] pointer-events-none z-0"}),p.jsx(q2,{card:h,onClose:()=>g(null)}),p.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center pt-8 md:pt-12 pb-6 shrink-0",children:[p.jsx("h2",{className:"text-5xl md:text-7xl font-calligraphy text-transparent bg-clip-text bg-gradient-to-b from-[#ffd700] via-[#e6c278] to-[#8c6239] drop-shadow-[0_4px_15px_rgba(0,0,0,0.9)] mb-2 animate-fade-in-up tracking-widest",children:b("tab_summary")}),p.jsx("div",{className:"w-24 h-[2px] bg-gradient-to-r from-transparent via-[#8c6239] to-transparent opacity-70 shadow-[0_0_10px_#8c6239]"})]}),p.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-0 md:px-20 pb-20 w-full max-w-7xl mx-auto relative z-10",children:p.jsxs("div",{className:"grid gap-4 px-4 pb-4",children:[p.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 text-[#5c4025] text-xs font-bold uppercase tracking-[0.2em] px-6 pb-2 border-b border-[#2a1d15]",children:[p.jsx("div",{className:"col-span-4",children:b("player")}),p.jsx("div",{className:"col-span-1 text-center",children:b("diaoPoints")}),p.jsx("div",{className:"col-span-1 text-center",children:b("kaiZhuPoints")}),p.jsx("div",{className:"col-span-1 text-center",children:b("qiaoMenPoints")}),p.jsx("div",{className:"col-span-1 text-center",children:b("seYangPoints")}),p.jsx("div",{className:"col-span-1 text-center",children:b("kaiChongPoints")}),p.jsx("div",{className:"col-span-3 text-right",children:b("score")})]}),e.map(v=>{const y=v.playerId===o,S=v.playerId===0,E=f.includes(v.playerId),A=v.totalRoundChange>0,C=r.find(O=>O.id===v.playerId),R=C?.profile,N=R?.avatar_url||`https://api.dicebear.com/9.x/miniavs/svg?seed=${C?.name||"Player"}&backgroundColor=b6e3f4,c0aede,d1d4f9`,M=P2(R?.country||"cn"),L=z2(v.trickCount);return p.jsxs("div",{className:`
                                    group transition-all duration-500 rounded-md overflow-hidden relative border shadow-lg
                                    ${E?"bg-[#15100e]/95 border-[#5c4025] shadow-2xl scale-[1.01]":"bg-[#0f0a08]/80 border-[#2a1d15] hover:bg-[#1a1512] hover:border-[#3e2b22]"}
                                    ${A&&!E?"border-[#8c6239]/50 shadow-[0_0_20px_rgba(212,175,55,0.1)]":""}
                                `,children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),A&&p.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-[#d4af37] to-[#8c6239] opacity-80 shadow-[0_0_15px_#d4af37]"}),p.jsxs("div",{onClick:()=>_(v.playerId),className:"grid grid-cols-12 gap-2 items-center p-4 cursor-pointer relative z-20",children:[p.jsxs("div",{className:"col-span-8 md:col-span-4 flex items-center gap-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 rounded-full border-2 overflow-hidden shrink-0 shadow-lg ${y?"border-[#ef4444] ring-2 ring-[#7f1d1d]/50":"border-[#3e2b22]"}`,children:p.jsx("img",{src:N,alt:"",className:"w-full h-full object-cover filter brightness-90 grayscale-[0.2]",loading:"lazy"})}),y&&p.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[#8c1c0b] text-[#ffd700] flex items-center justify-center rounded-full text-[10px] border border-[#d4af37] shadow-md z-10 font-serif font-bold",children:""}),p.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-3 bg-[#1a0505] border border-[#5c4025] shadow-md transform rotate-12 z-10 flex items-center justify-center p-[1px]",children:p.jsx("img",{src:M,alt:R?.country,className:"w-full h-full object-cover opacity-90",loading:"lazy"})})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:`text-base md:text-lg font-bold tracking-wider truncate font-serif ${S?"text-[#ffd700]":"text-[#d9c7b0]"}`,children:B2(R?.username||C?.name||"")})}),p.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[!y&&p.jsx("span",{className:`text-[9px] border px-1.5 py-0.5 rounded-[2px] ${L.bg} ${L.border} ${L.textCol}`,children:L.text}),p.jsx("span",{className:"md:hidden text-[9px] text-[#5c4025] uppercase tracking-wide",children:E?"Hide":"Details"})]})]})]}),p.jsx("div",{className:"hidden md:block col-span-1 text-center font-mono text-sm text-[#78716c]",children:v.diaoPointChange}),p.jsx("div",{className:"hidden md:block col-span-1 text-center font-mono text-sm text-[#78716c]",children:v.kaiZhuPointChange}),p.jsx("div",{className:"hidden md:block col-span-1 text-center font-mono text-sm text-[#78716c]",children:v.qiaoMenPointChange}),p.jsx("div",{className:"hidden md:block col-span-1 text-center font-mono text-sm text-[#78716c]",children:v.seYangPointChange}),p.jsx("div",{className:"hidden md:block col-span-1 text-center font-mono text-sm text-[#78716c]",children:v.kaiChongPointChange}),p.jsx("div",{className:"col-span-4 md:col-span-3 text-right pr-2",children:p.jsxs("span",{className:`text-2xl md:text-4xl ${O2(v.totalRoundChange)}`,children:[v.totalRoundChange>0?"+":"",v.totalRoundChange]})})]}),E&&p.jsx(x,{res:v})]},v.playerId)})]})}),p.jsxs("div",{className:"relative z-30 bg-gradient-to-t from-[#050202] via-[#0a0503] to-transparent pt-12 pb-8 md:pb-12 px-8 shrink-0 flex justify-center gap-4 md:gap-8",children:[p.jsx(Wh,{label:b("home"),onClick:i,icon:""}),p.jsx(Wh,{label:b("nextRound"),onClick:n,primary:!0,icon:""})]})]})},Y2=({recordedCards:e,faceUpPlayedCardIds:t})=>{const n=I.useMemo(()=>e.filter(l=>t.has(l.id)),[e,t]),i=I.useMemo(()=>{const l={[D.CASH]:[],[D.STRINGS]:[],[D.COINS]:[],[D.TEXTS]:[]};return n.forEach(r=>{l[r.suit]&&l[r.suit].push(r)}),Object.keys(l).forEach(r=>{l[r].sort((c,d)=>d.value-c.value)}),l},[n]),a=[D.CASH,D.STRINGS,D.COINS,D.TEXTS],o={[D.CASH]:"Cash / ",[D.STRINGS]:"Strings / ",[D.COINS]:"Coins / ",[D.TEXTS]:"Texts / "};return p.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4 px-2 shrink-0",children:[p.jsx("h4",{className:"text-[#c5a059] text-sm uppercase tracking-widest font-bold",children:"Public Knowledge"}),p.jsxs("span",{className:"text-xs text-[#5c4025]",children:["Face-Up: ",n.length," / ",e.length]})]}),p.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-6 pr-2",children:a.map(l=>p.jsxs("div",{className:"bg-[#0a0806] border border-[#2a1d15] rounded-sm p-3 relative",children:[p.jsx("div",{className:"absolute -top-2 left-3 bg-[#15100e] px-2 text-[10px] text-[#8c6239] uppercase tracking-widest font-bold border border-[#2a1d15]",children:o[l]}),p.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i[l].length>0?i[l].map((r,c)=>p.jsx("div",{className:"transform hover:scale-110 transition-transform origin-bottom duration-200",children:p.jsx(Pn,{card:r,isSmall:!0,className:"shadow-md border-white/5"})},`${r.id}-${c}`)):p.jsx("span",{className:"text-[10px] text-[#3e2b22] italic w-full text-center py-2",children:"No visible cards"})})]},l))})]})},J2=({history:e})=>p.jsxs("div",{className:"flex flex-col h-full overflow-y-auto custom-scrollbar",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 text-[#a0a0a0] shrink-0",children:[p.jsxs("div",{className:"bg-[#0a0806] p-4 border border-[#2a1d15] text-center rounded-sm",children:[p.jsx("div",{className:"text-[10px] text-[#5c4025] uppercase tracking-widest mb-1",children:"Total Rounds"}),p.jsx("div",{className:"text-2xl text-[#e6c278] font-bold font-serif",children:e.totalRounds})]}),p.jsxs("div",{className:"bg-[#0a0806] p-4 border border-[#2a1d15] text-center rounded-sm",children:[p.jsx("div",{className:"text-[10px] text-[#5c4025] uppercase tracking-widest mb-1",children:"Banker vs Peasant"}),p.jsxs("div",{className:"text-xl text-[#e6c278] font-serif",children:[e.bankerWins," : ",e.peasantWins]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-[#8c6239] text-[10px] uppercase tracking-widest sticky top-0 bg-[#15100e] py-2 border-b border-[#2a1d15] mb-2",children:"Opponent Intelligence"}),Object.entries(e.aiLearningStates||{}).map(([t,n])=>p.jsxs("div",{className:"bg-[#0a0806] p-3 border border-[#2a1d15] flex justify-between items-center rounded-sm hover:border-[#3e2b22] transition-colors",children:[p.jsxs("span",{className:"text-[#c5a059] text-xs font-bold",children:["Seat ",t]}),p.jsxs("div",{className:"text-[10px] text-[#5c4025] flex gap-3 font-mono",children:[p.jsxs("span",{children:["AGR: ",p.jsx("span",{className:"text-[#a0a0a0]",children:n.aggression.toFixed(2)})]}),p.jsxs("span",{children:["RSK: ",p.jsx("span",{className:"text-[#a0a0a0]",children:n.riskTolerance.toFixed(2)})]})]})]},t))]})]}),K2=({settings:e,onOpenAdmin:t})=>{const{language:n,setLanguage:i,oneClickPlay:a,setOneClickPlay:o,isRiskAlertOn:l,setIsRiskAlertOn:r,isMuted:c,setIsMuted:d,graphicsQuality:f,setGraphicsQuality:m,showPaperDolls:h,setShowPaperDolls:g,isMobileDevice:_,baseScore:b,setBaseScore:T}=e,{skin:x,setSkinId:v,availableSkins:y}=hn(),S=({label:C,children:R})=>p.jsxs("div",{className:"flex justify-between items-center text-[#a0a0a0] py-3 border-b border-[#2a1d15]/50",children:[" ",p.jsx("span",{className:"text-xs uppercase tracking-wide text-[#8c6239] font-bold",children:C})," ",R," "]}),E=({active:C,onClick:R,labelOn:N="ON",labelOff:M="OFF"})=>p.jsxs("button",{onClick:R,className:`px-4 py-1.5 text-[10px] border transition-all duration-300 font-bold tracking-wider rounded-full ${C?"border-[#c5a059] text-[#15100e] bg-[#c5a059]":"border-[#3e2b22] text-[#5c4025] hover:text-[#8c6239]"}`,children:[" ",C?N:M," "]}),A=C=>(mi[n||"zh_CN"]||mi.en)?.[C]||C;return p.jsx("div",{className:"space-y-2 h-full overflow-y-auto custom-scrollbar pr-2 pt-2",children:p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-[10px] text-[#5c4025] uppercase tracking-[0.3em] mb-4 font-bold border-b border-[#3e2b22] pb-2",children:A("setting_gameplay")}),p.jsxs(S,{label:A("setting_theme"),children:[" ",p.jsxs("select",{value:x.id,onChange:C=>v(C.target.value),className:"bg-[#0a0806] border border-[#3e2b22] text-[#c5a059] px-3 py-1.5 text-[10px] outline-none rounded-full appearance-none text-center min-w-[100px]",children:[" ",y.map(C=>p.jsx("option",{value:C.id,children:A(`skin_${C.id.replace("_scholar","").replace("_mystery","")}`)||C.name},C.id))," "]})," "]}),p.jsxs(S,{label:A("setting_graphics"),children:[" ",p.jsxs("div",{className:"flex gap-2",children:[" ",p.jsx("button",{onClick:()=>m("LOW"),className:`px-3 py-1.5 text-[10px] border rounded-full transition-colors ${f==="LOW"?"border-[#c5a059] text-[#c5a059] bg-[#c5a059]/10":"border-[#3e2b22] text-[#5c4025]"}`,children:"Low"})," ",p.jsx("button",{onClick:()=>m("HIGH"),className:`px-3 py-1.5 text-[10px] border rounded-full transition-colors ${f==="HIGH"?"border-[#c5a059] text-[#c5a059] bg-[#c5a059]/10":"border-[#3e2b22] text-[#5c4025]"}`,children:"High"})," "]})," "]}),!_&&p.jsxs(S,{label:A("setting_avatars"),children:[" ",p.jsx(E,{active:h,onClick:()=>g(!h),labelOn:"Show",labelOff:"Hide"})," "]}),p.jsxs(S,{label:A("setting_lang"),children:[" ",p.jsxs("select",{value:n,onChange:C=>i(C.target.value),className:"bg-[#0a0806] border border-[#3e2b22] text-[#c5a059] px-3 py-1.5 text-[10px] outline-none rounded-full appearance-none text-center min-w-[100px]",children:[" ",["en","zh_CN","zh_TW","ja","ko"].map(C=>p.jsx("option",{value:C,children:C},C))," "]})," "]}),p.jsxs(S,{label:A("setting_control"),children:[" ",p.jsx(E,{active:a,onClick:()=>o(!a),labelOn:A("oneClickPlay"),labelOff:"Confirm"})," "]}),p.jsxs(S,{label:A("setting_hints"),children:[" ",p.jsx(E,{active:l,onClick:()=>r(!l)})," "]}),p.jsxs(S,{label:A("setting_sound"),children:[" ",p.jsx(E,{active:!c,onClick:()=>d(!c)})," "]}),p.jsx(S,{label:A("setting_base"),children:p.jsx("select",{value:b,onChange:C=>T(Number(C.target.value)),className:"bg-[#0a0806] border border-[#3e2b22] text-[#c5a059] px-3 py-1.5 text-[10px] outline-none rounded-full appearance-none text-center min-w-[100px]",children:[1,2,5,10,20,50,100].map(C=>p.jsx("option",{value:C,children:C},C))})})]})})},$2=({onClose:e,onOpenAdmin:t,settings:n,initialTab:i="GENERAL",gameData:a})=>{const{skin:o}=hn(),{isMobileDevice:l}=$a(),[r,c]=I.useState(i),d=()=>p.jsxs("div",{className:"absolute top-0 left-0 -z-50 opacity-0 pointer-events-none",style:{width:"1024px",height:"1024px"},children:[" ",p.jsx(H2,{id:"app-icon-export-target",size:1024})," "]}),f=({id:h,label:g,icon:_})=>p.jsxs("button",{onClick:()=>c(h),className:`flex-1 py-4 text-[10px] uppercase tracking-widest font-bold transition-all duration-300 flex flex-col items-center gap-1 border-t-2 ${r===h?"text-[#c5a059] border-[#c5a059] bg-[#c5a059]/10":"text-[#5c4025] border-transparent hover:text-[#8c6239] hover:bg-white/5"}`,children:[" ",p.jsx("span",{className:"text-lg opacity-80",children:_})," ",p.jsx("span",{className:"scale-90",children:g})," "]}),m=`${o.hud.modalContentClass} !rounded-b-none !rounded-t-[24px] !border-b-0 w-full max-w-full md:max-w-md h-[85vh] absolute bottom-0 flex flex-col shadow-[0_-20px_60px_rgba(0,0,0,0.9)] border-t border-l border-r border-[#3e2b22] overflow-hidden`;return p.jsxs("div",{className:"fixed inset-0 z-[300] flex items-end justify-center bg-black/80 backdrop-blur-sm animate-fade-in font-serif",children:[p.jsx(d,{}),p.jsxs("div",{className:m,children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-[#ffd700] to-transparent opacity-50"}),p.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-white/10 bg-black/20 shrink-0 relative",children:[p.jsx("button",{onClick:e,className:"text-[#c5a059] hover:text-white transition-transform active:scale-90 p-2 -ml-2",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),p.jsx("span",{className:"text-sm font-bold tracking-[0.2em] text-[#8c6239] uppercase",children:r==="GENERAL"?"Settings":r}),p.jsx("button",{onClick:t,className:"w-10 h-10 opacity-0 cursor-default",title:"Admin Portal"})]}),p.jsxs("div",{className:"flex-1 p-6 relative z-10 overflow-hidden bg-black/10",children:[r==="RECORDER"&&a&&p.jsx(Y2,{recordedCards:a.recordedCards,faceUpPlayedCardIds:a.faceUpPlayedCardIds}),r==="GENERAL"&&p.jsx(K2,{settings:n,onOpenAdmin:t}),r==="HISTORY"&&a&&p.jsx(J2,{history:a.gameHistory}),(r==="RECORDER"||r==="HISTORY")&&!a&&p.jsx("div",{className:"flex h-full items-center justify-center text-[#5c4025] italic text-xs",children:" Game data not available. "})]}),p.jsxs("div",{className:"flex border-t border-white/10 bg-black/40 shrink-0 z-20 relative pb-safe",children:[p.jsx(f,{id:"GENERAL",label:"Config",icon:""}),p.jsx(f,{id:"RECORDER",label:"Recorder",icon:""}),p.jsx(f,{id:"HISTORY",label:"History",icon:""})]})]})]})};class j2{getSupportedProviders(){return[sn.GOOGLE,sn.FACEBOOK,sn.WECHAT,sn.DOUYIN]}async checkSession(){const t=await Zo();if(t){const n=await dp(t.id);if(n)return{success:!0,user:n}}return{success:!1}}async login(t){if(!t)return{success:!1,error:"Provider required for Web"};if(t===sn.WECHAT||t===sn.DOUYIN){const{user:a}=await rb(t);return{success:!0,user:await dp(a.id)||void 0}}const{data:n,error:i}=await sb(t);return i?{success:!1,error:JSON.stringify(i)}:{success:!0}}async logout(){await ub()}}class X2{init(){console.log("Web Ads Initialized")}showBanner(){console.log("Show Web Banner")}hideBanner(){console.log("Hide Web Banner")}async showInterstitial(){console.log("Show Web Interstitial"),alert("This is a simulated Interstitial Ad.")}async showRewarded(){return console.log("Show Web Rewarded Video"),confirm("Watch video for rewards? (Simulated)")}}class Q2{async getProducts(t){return t.map(n=>({productId:n,title:"Test Item",description:"A test item for web",price:"$0.99",currencyCode:"USD"}))}async purchase(t){return console.log(`Purchased ${t} on Web`),{success:!0,transactionId:`web_tx_${Date.now()}`}}async restorePurchases(){}}class W2{async share(t){navigator.share?navigator.share({title:t,url:window.location.href}):prompt("Copy this link to share:",window.location.href)}async inviteFriends(){alert("Invite link copied to clipboard!")}async getFriendList(){return pv()}}const Zh={id:"WEB",auth:new j2,ads:new X2,iap:new Q2,social:new W2,initialize:async()=>{console.log("Web Platform Adapter Initialized")}};class Z2{getSupportedProviders(){return[sn.WECHAT]}async checkSession(){return{success:!1}}async login(){return console.log("Calling wx.login()..."),{success:!1,error:"Not implemented in browser environment"}}async logout(){}}class eI{init(){}showBanner(t){}hideBanner(){}async showInterstitial(t){}async showRewarded(t){return!0}}class tI{async getProducts(t){return[]}async purchase(t){return{success:!1}}async restorePurchases(){}}class nI{async share(t,n){}async inviteFriends(){}async getFriendList(){return[]}}const iI={id:"WECHAT",auth:new Z2,ads:new eI,iap:new tI,social:new nI,initialize:async()=>{console.log("WeChat Platform Initialized")}};class aI{adapter;constructor(){typeof wx<"u"&&typeof wx.getSystemInfo=="function"?this.adapter=iI:typeof FBInstant<"u"?this.adapter=Zh:this.adapter=Zh}get auth(){return this.adapter.auth}get ads(){return this.adapter.ads}get iap(){return this.adapter.iap}get social(){return this.adapter.social}get id(){return this.adapter.id}async init(){await this.adapter.initialize();const t=await this.auth.checkSession();t.success&&t.user&&console.log(`[Platform] Auto-logged in as ${t.user.username} on ${this.adapter.id}`)}}const jn=new aI,oI=({onClose:e,onLoginSuccess:t})=>{const[n,i]=I.useState("LOGIN"),[a,o]=I.useState(!1),[l,r]=I.useState(""),[c,d]=I.useState(null),[f,m]=I.useState("GENERATING"),[h,g]=I.useState(""),[_,b]=I.useState("OTHER"),[T,x]=I.useState(25),[v,y]=I.useState("cn"),[S,E]=I.useState(""),[A,C]=I.useState([]),[R,N]=I.useState([]),M=jn.auth.getSupportedProviders(),L=async w=>{if(r(""),o(!0),jn.id==="WEB"&&(w===sn.WECHAT||w===sn.DOUYIN)){d(w),i("QR_SCAN"),m("GENERATING"),setTimeout(()=>m("WAITING"),800),setTimeout(()=>m("SCANNED"),3500),setTimeout(async()=>{m("SUCCESS");const P=await jn.auth.login(w);O(P)},5500);return}const U=await jn.auth.login(w);O(U),o(!1)},O=async w=>{if(!w.success){r(w.error||"Login Failed");return}if(w.user)if(w.user.username&&w.user.age){g(w.user.username),E(w.user.avatar_url||""),i("MATCHING");const U=await pv();N(U);const P=await fp(w.user);C(P)}else i("PROFILE"),g(w.user.username||"Player");else i("PROFILE")},z=async()=>{o(!0);const U=await cb({username:h,gender:_,age:T,country:v,avatar_url:S,is_looking_for_match:!0});if(U){i("MATCHING");const P=await fp(U);C(P)}o(!1)},$=()=>p.jsxs("div",{className:"flex flex-col items-center justify-center py-6 animate-fade-in",children:[p.jsxs("div",{className:"text-[#c5a059] mb-4",children:["Scan with ",c]}),p.jsx("div",{className:`w-48 h-48 bg-white p-2 ${f==="SUCCESS"?"border-4 border-[#c5a059]":""}`,children:f==="GENERATING"?"Generating...":p.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=login_${c}`,className:"w-full h-full"})}),p.jsx("div",{className:"mt-4 text-[#a0a0a0] text-xs",children:f==="WAITING"?"Waiting for scan...":f}),f==="SUCCESS"&&p.jsx("div",{className:"text-green-500 font-bold mt-2",children:"Success! Redirecting..."})]}),G=()=>p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full px-8",children:M.map(w=>p.jsx("button",{onClick:()=>L(w),className:"flex items-center justify-center gap-2 py-4 border border-[#3e2b22] hover:border-[#c5a059] hover:bg-[#1a1a1a] transition-all bg-[#0a0806]",children:p.jsxs("span",{className:"text-[#c5a059] uppercase text-xs tracking-widest",children:[w," Login"]})},w))});return p.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/95 backdrop-blur-md animate-fade-in font-serif",children:p.jsxs("div",{className:"bg-[#15100e] border border-[#3e2b22] w-full max-w-lg p-8 rounded-sm shadow-lacquer-deep relative overflow-hidden flex flex-col max-h-[90vh]",children:[p.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-[#5c4025] hover:text-[#c5a059] z-20",children:""}),n==="LOGIN"&&p.jsxs("div",{className:"flex flex-col items-center gap-8 py-8",children:[p.jsxs("h2",{className:"text-2xl text-[#c5a059] font-bold tracking-[0.2em] uppercase text-center",children:["Login via ",jn.id]}),G(),l&&p.jsx("div",{className:"text-red-500 text-xs mt-4",children:l}),a&&p.jsx("div",{className:"text-[#c5a059] text-xs animate-pulse",children:"Processing..."})]}),n==="QR_SCAN"&&$(),n==="PROFILE"&&p.jsxs("div",{className:"flex flex-col gap-4 py-4 overflow-y-auto",children:[p.jsx("h2",{className:"text-xl text-[#c5a059] text-center",children:"Create Persona"}),p.jsx("input",{type:"text",value:h,onChange:w=>g(w.target.value),placeholder:"Username",className:"bg-[#0a0806] border border-[#3e2b22] px-3 py-2 text-[#e6c278]"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("input",{type:"number",value:T,onChange:w=>x(parseInt(w.target.value)),className:"bg-[#0a0806] border border-[#3e2b22] px-3 py-2 text-[#e6c278]"}),p.jsxs("select",{value:_,onChange:w=>b(w.target.value),className:"bg-[#0a0806] border border-[#3e2b22] px-3 py-2 text-[#e6c278]",children:[p.jsx("option",{value:"MALE",children:"Male"}),p.jsx("option",{value:"FEMALE",children:"Female"}),p.jsx("option",{value:"OTHER",children:"Other"})]})]}),p.jsx("button",{onClick:z,className:"mt-4 py-3 bg-[#3d0e0e] text-[#a0a0a0] border border-[#5c1010] hover:text-white",children:"Enter World"})]}),n==="MATCHING"&&p.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[p.jsx("h2",{className:"text-xl text-[#c5a059] text-center border-b border-[#3e2b22] pb-2",children:"Lobby"}),p.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:A.map(w=>p.jsxs("div",{className:"p-2 border border-[#3e2b22] flex justify-between items-center text-xs text-[#a0a0a0]",children:[p.jsx("span",{children:w.username}),p.jsx("button",{onClick:()=>db(w.id),className:"text-[#c5a059] hover:underline",children:"+ Friend"})]},w.id))}),p.jsx("button",{onClick:()=>{e(),t({id:"me",username:h,gender:_,age:T,country:v})},className:"w-full py-3 bg-[#1a1a1a] border border-[#c5a059] text-[#c5a059]",children:"START GAME"})]})]})})},lI=({language:e})=>{const[t,n]=I.useState(!1),[i,a]=I.useState([]),[o,l]=I.useState(""),[r,c]=I.useState(!1),d=I.useRef(null),[f,m]=I.useState(!1),h=_=>mi[e][_]||mi.en[_];I.useEffect(()=>{m(Kh()),Kh()?(async()=>{const b=await cy();a(T=>T.length===0?[{role:"model",text:b,timestamp:Date.now()}]:T)})():a(_=>_.length===0?[{role:"system",text:h("aiDisabled"),timestamp:Date.now()}]:_)},[e]),I.useEffect(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[i,t]);const g=async()=>{if(!o.trim()||!f)return;const _={role:"user",text:o,timestamp:Date.now()};a(x=>[...x,_]),l(""),c(!0);const T={role:"model",text:await Rw(o),timestamp:Date.now()};a(x=>[...x,T]),c(!1)};return p.jsxs("div",{className:`fixed bottom-2 right-2 z-50 flex flex-col items-end transition-all duration-300 ${t?"w-[90vw] md:w-80 h-[60vh] md:h-96":"w-auto h-auto"}`,children:[p.jsx("button",{onClick:()=>n(!t),className:"bg-black text-imperial-gold border-2 border-imperial-gold/50 p-3 rounded-full shadow-lg hover:bg-stone-900 transition-colors flex items-center gap-2 mb-2",children:t?p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"font-serif font-bold hidden md:inline text-imperial-gold",children:h("masterTitle")}),p.jsx("div",{className:"w-6 h-6 bg-aged-paper rounded-full flex items-center justify-center text-ink-black font-bold font-serif",children:"?"})]})}),t&&p.jsxs("div",{className:"bg-stone-900 w-full h-full rounded-lg shadow-2xl border-4 border-stone-800 flex flex-col overflow-hidden",children:[p.jsx("div",{className:"bg-stone-950 text-imperial-gold p-2 font-serif text-center border-b border-stone-800 font-bold tracking-widest",children:h("masterName")}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-stone-900/95",children:[i.map((_,b)=>p.jsx("div",{className:`flex ${_.role==="user"?"justify-end":"justify-start"}`,children:p.jsx("div",{className:`max-w-[85%] p-2 rounded-md text-sm font-serif shadow-sm ${_.role==="user"?"bg-urushi-red text-aged-paper border border-stone-700":"bg-aged-paper text-ink-black border border-gray-400"}`,children:_.text})},b)),r&&p.jsx("div",{className:"flex justify-start",children:p.jsx("div",{className:"text-xs text-stone-500 italic animate-pulse pl-2",children:h("meditating")})}),p.jsx("div",{ref:d})]}),p.jsxs("div",{className:"p-2 bg-stone-950 border-t border-stone-800 flex gap-2",children:[p.jsx("input",{type:"text",value:o,onChange:_=>l(_.target.value),onKeyDown:_=>_.key==="Enter"&&g(),disabled:!f,placeholder:h(f?"chatPlaceholder":"chatPlaceholderDisabled"),className:"flex-1 bg-stone-800 text-aged-paper px-3 py-1 rounded-sm focus:outline-none focus:ring-2 focus:ring-imperial-gold font-serif placeholder-stone-400"}),p.jsx("button",{onClick:g,disabled:r||!f,className:"text-imperial-gold hover:text-white transition-colors",children:""})]})]})]})},sI=({onExit:e})=>{const[t,n]=I.useState(!1),[i,a]=I.useState(""),[o,l]=I.useState(""),[r,c]=I.useState(""),[d,f]=I.useState([]),[m,h]=I.useState(!1),[g,_]=I.useState(""),[b,T]=I.useState(""),[x,v]=I.useState("");I.useEffect(()=>{const C=fv();_(C.url),T(C.key)},[]);const y=C=>{C.preventDefault(),i==="Lhy"&&o==="Lhy147258"?(n(!0),c(""),E()):c("Invalid Administrator Credentials")},S=()=>{dv(g,b)?(v("Connection Successful (MemFire/Supabase)"),E()):v("Connection Failed")},E=async()=>{h(!0);const C=await pb();f(C),h(!1)},A=async C=>{confirm("Are you sure you want to delete this record? This cannot be undone.")&&(await hb(C)?f(N=>N.filter(M=>M.id!==C)):alert("Delete failed. Check database permissions."))};return t?p.jsxs("div",{className:"fixed inset-0 z-[999] bg-[#0c0c0c] text-[#a0a0a0] font-sans flex flex-col overflow-hidden",children:[p.jsxs("div",{className:"h-16 bg-[#15100e] border-b border-[#3e2b22] flex items-center justify-between px-6 shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("h1",{className:"text-xl text-[#c5a059] font-serif tracking-widest font-bold",children:"MA DIAO ADMIN"}),p.jsx("span",{className:"text-xs bg-[#3e2b22] text-[#e6c278] px-2 py-0.5 rounded",children:"Superuser: Lhy"})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsxs("button",{onClick:E,className:"text-xs uppercase hover:text-white flex items-center gap-1",children:[p.jsx("span",{children:""})," Refresh"]}),p.jsx("button",{onClick:e,className:"text-xs uppercase hover:text-white border border-[#3e2b22] px-3 py-1 rounded hover:bg-[#2a1d15]",children:"Exit to Game"})]})]}),p.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[p.jsxs("div",{className:"w-80 bg-[#111] border-r border-[#222] p-6 flex flex-col gap-6 overflow-y-auto",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xs uppercase tracking-widest text-[#8c6239] mb-4 font-bold",children:"Database Connection"}),p.jsxs("p",{className:"text-[10px] text-gray-500 mb-4 leading-relaxed",children:["Recommended for China: ",p.jsx("strong",{children:"MemFire Cloud"}),". It is Supabase-compatible. Enter MemFire API URL & Key below."]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("input",{type:"text",placeholder:"API URL (e.g., https://xyz.memfiredb.com)",value:g,onChange:C=>_(C.target.value),className:"w-full bg-black border border-[#333] px-3 py-2 text-xs rounded focus:border-[#c5a059] outline-none"}),p.jsx("input",{type:"password",placeholder:"Anon Key",value:b,onChange:C=>T(C.target.value),className:"w-full bg-black border border-[#333] px-3 py-2 text-xs rounded focus:border-[#c5a059] outline-none"}),p.jsx("button",{onClick:S,className:"w-full py-2 bg-[#222] hover:bg-[#333] text-xs border border-[#444] text-[#ccc]",children:"Update Connection"}),x&&p.jsx("div",{className:"text-[10px] text-green-500 mt-2",children:x})]})]}),p.jsxs("div",{className:"mt-auto",children:[p.jsx("h3",{className:"text-xs uppercase tracking-widest text-[#8c6239] mb-2 font-bold",children:"Storage Stats"}),p.jsxs("div",{className:"text-xs text-gray-500",children:["Logs Loaded: ",d.length]})]})]}),p.jsxs("div",{className:"flex-1 bg-[#050505] p-8 overflow-y-auto",children:[p.jsx("h2",{className:"text-2xl text-white mb-6 font-thin",children:"Game Match Logs"}),m?p.jsx("div",{className:"text-center py-20 text-[#555] animate-pulse",children:"Fetching remote data..."}):p.jsx("div",{className:"border border-[#222] rounded overflow-hidden",children:p.jsxs("table",{className:"w-full text-left text-sm",children:[p.jsx("thead",{className:"bg-[#1a1a1a] text-[#888]",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-4 font-normal",children:"Timestamp"}),p.jsx("th",{className:"p-4 font-normal",children:"Match ID"}),p.jsx("th",{className:"p-4 font-normal",children:"Winner"}),p.jsx("th",{className:"p-4 font-normal",children:"Rounds"}),p.jsx("th",{className:"p-4 font-normal text-right",children:"Actions"})]})}),p.jsxs("tbody",{className:"divide-y divide-[#222]",children:[d.map(C=>{const R=new Date(C.timestamp).toLocaleString(),N=C.data.results.find(L=>L.isWinner),M=N?`Player ${N.playerId}`:"Draw";return p.jsxs("tr",{className:"hover:bg-[#111] transition-colors",children:[p.jsx("td",{className:"p-4 text-[#ccc]",children:R}),p.jsxs("td",{className:"p-4 font-mono text-xs text-[#666]",children:[C.id.substring(0,8),"..."]}),p.jsx("td",{className:"p-4 text-[#c5a059]",children:M}),p.jsxs("td",{className:"p-4 text-[#888]",children:[C.data.results.length," Player Stats"]}),p.jsx("td",{className:"p-4 text-right",children:p.jsx("button",{onClick:()=>A(C.id),className:"text-red-900 hover:text-red-500 text-xs px-2 py-1 border border-red-900/30 rounded hover:bg-red-900/10 transition-colors",children:"Delete"})})]},C.id)}),d.length===0&&p.jsx("tr",{children:p.jsx("td",{colSpan:5,className:"p-8 text-center text-[#444] italic",children:"No match logs found in database."})})]})]})})]})]})]}):p.jsxs("div",{className:"fixed inset-0 z-[999] bg-[#050202] flex items-center justify-center font-serif text-[#c5a059]",children:[p.jsx("div",{className:"absolute inset-0 bg-noise opacity-10 pointer-events-none"}),p.jsxs("div",{className:"w-full max-w-md p-8 border border-[#3e2b22] bg-[#15100e] rounded-sm shadow-lacquer-deep relative",children:[p.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-[#5c4025] hover:text-[#c5a059]",children:""}),p.jsx("h2",{className:"text-3xl text-center mb-8 font-bold tracking-[0.2em] border-b border-[#2a1d15] pb-4",children:"ADMIN PORTAL"}),p.jsxs("form",{onSubmit:y,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs uppercase tracking-widest text-[#8c6239] mb-2",children:"Admin ID"}),p.jsx("input",{type:"text",value:i,onChange:C=>a(C.target.value),className:"w-full bg-[#0a0806] border border-[#3e2b22] text-[#e6c278] px-4 py-3 focus:border-[#c5a059] outline-none transition-colors"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs uppercase tracking-widest text-[#8c6239] mb-2",children:"Passkey"}),p.jsx("input",{type:"password",value:o,onChange:C=>l(C.target.value),className:"w-full bg-[#0a0806] border border-[#3e2b22] text-[#e6c278] px-4 py-3 focus:border-[#c5a059] outline-none transition-colors"})]}),r&&p.jsx("div",{className:"text-red-500 text-xs text-center",children:r}),p.jsx("button",{type:"submit",className:"w-full py-4 bg-[#3d0e0e] border border-[#5c1010] text-[#a0a0a0] hover:text-white hover:bg-[#5c1010] transition-colors font-bold tracking-[0.2em]",children:"AUTHENTICATE"})]})]})]})},rc=e=>{window.logToScreen&&window.logToScreen(`[App] ${e}`)},e0=({onClick:e,children:t,className:n,disabled:i})=>p.jsxs("button",{onClick:e,disabled:i,className:`
            relative overflow-hidden group
            w-72 md:w-96 h-20 md:h-24
            bg-gradient-to-b from-[#e6c278]/80 via-[#d4af37]/60 to-[#b48a26]/80
            backdrop-blur-md
            border-2 border-[#fcd34d]/60 rounded-full
            text-[#1a0505] font-serif font-black tracking-[0.3em] text-xl md:text-2xl
            shadow-[0_0_30px_rgba(212,175,55,0.2),inset_0_2px_5px_rgba(255,255,255,0.3)]
            transition-all duration-500 ease-out
            hover:from-[#d68535] hover:via-[#b35c44] hover:to-[#8c3b24] hover:text-[#fffaf0] hover:border-[#ffaa00]
            hover:scale-105 hover:shadow-[0_0_60px_rgba(214,133,53,0.5),inset_0_2px_10px_rgba(255,255,255,0.4)]
            active:scale-95 active:shadow-none
            disabled:opacity-50 disabled:cursor-not-allowed disabled:grayscale
            whitespace-nowrap flex items-center justify-center
            ${n}
        `,children:[p.jsx("span",{className:"relative z-10 drop-shadow-sm transition-colors",children:t}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out pointer-events-none"}),p.jsx("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-white/20 to-transparent pointer-events-none rounded-t-full"})]}),rI=()=>p.jsxs("div",{className:"w-16 h-16 md:w-20 md:h-20 border-4 border-[#8c1c0b] bg-[#8c1c0b] rounded-sm shadow-[0_10px_20px_rgba(0,0,0,0.8)] grid grid-cols-2 grid-rows-2 p-1 gap-0 box-border relative opacity-90 hover:opacity-100 transition-opacity",children:[p.jsx("div",{className:"absolute inset-0 opacity-40 bg-[url('https://www.transparenttextures.com/patterns/black-felt.png')] mix-blend-multiply pointer-events-none z-10"}),p.jsx("div",{className:"flex items-center justify-center border-b border-r border-[#e8e4d9]/40 relative z-0",children:p.jsx("span",{className:"text-[#e8e4d9] font-black text-xl leading-none transform scale-x-90 font-serif",children:""})}),p.jsx("div",{className:"flex items-center justify-center border-b border-[#e8e4d9]/40 relative z-0",children:p.jsx("span",{className:"text-[#e8e4d9] font-black text-xl leading-none transform scale-x-90 font-serif",children:""})}),p.jsx("div",{className:"flex items-center justify-center border-r border-[#e8e4d9]/40 relative z-0",children:p.jsx("span",{className:"text-[#e8e4d9] font-black text-xl leading-none transform scale-x-90 font-serif",children:""})}),p.jsx("div",{className:"flex items-center justify-center relative z-0",children:p.jsx("span",{className:"text-[#e8e4d9] font-black text-xl leading-none transform scale-x-90 font-serif",children:""})})]}),uI=()=>{rc("Rendering GameContent...");const{skin:e,setSkinId:t,availableSkins:n}=hn(),[i,a]=I.useState("GAME"),[o,l]=I.useState(void 0),r=$a(),c=Bw(),d=G=>mi[r.language][G]||mi.en[G],{playPcmAudio:f,playProceduralSFX:m,startBGM:h}=Gw(r.isMuted),{state:g,actions:_}=yb({difficulty:r.difficulty,isRiskAlertOn:r.isRiskAlertOn,language:r.language,playSound:m,baseScore:r.baseScore}),{aiChatMessages:b}=Lw({gameState:g,gameActions:_,audioSystem:{playPcmAudio:f},isMuted:r.isMuted,language:r.language}),T=g.players.find(G=>G.type===st.HUMAN),{interactionState:x,handle3DActionClick:v}=Pw(g,_,T,r);I.useEffect(()=>{(async()=>{rc("Initializing Platform Service..."),await jn.init();const w=await jn.auth.checkSession();w.success&&w.user&&l(w.user)})()},[]);const y=I.useMemo(()=>{if(!T)return{};const G={},{bankerId:w,openedSuits:U,recordedCards:P,firstLeadInfo:ge,faceUpPlayedCardIds:ve,bankerFirstLeadCard:mn}=g;return T.hand.forEach(mt=>{const gt=tb(T,mt,w,U,P,ge,ve,mn);G[mt.id]={isMature:gt==="SAFE",isForbidden:gt==="FORBIDDEN"}}),G},[T,g.openedSuits,g.recordedCards,g.bankerId,g.firstLeadInfo,g.faceUpPlayedCardIds,g.bankerFirstLeadCard]),S=()=>{h(),_.startGame(o)},E=()=>{confirm(d("quitConfirm"))&&_.exitToTitle()},A=()=>{c.setActiveSettingsTab("RECORDER"),c.setShowSettings(!0)},C=()=>{c.setActiveSettingsTab("GENERAL"),c.setShowSettings(!0)},R=G=>{switch(G){case"imperial":return"from-[#8c1c0b] to-[#3d0e0e] border-[#d4af37]";case"christmas":return"from-[#0f2e1c] to-[#051a0d] border-[#b91c1c]";case"ming_scholar":return"from-[#5c3a21] to-[#3e2b22] border-[#8c6239]";case"taoist_mystery":return"from-[#37474f] to-[#263238] border-[#90a4ae]";default:return"from-gray-500 to-gray-700 border-white"}};if(i==="ADMIN")return p.jsx(sI,{onExit:()=>a("GAME")});const{phase:N,currentPlayerIndex:M,bankerId:L,selectedCardId:O,trickNumber:z,mianZhangCard:$}=g;return p.jsxs("div",{className:`fixed inset-0 perspective-container overflow-hidden ${e.layout.backgroundClass} transition-colors duration-1000`,children:[p.jsx(L2,{state:g,interactionState:{...x,onActionClick:v}}),N!==Oe.DEALING&&N!==Oe.SHUFFLING&&p.jsxs(p.Fragment,{children:[p.jsx(U2,{players:g.players,bankerId:L,currentPlayerIndex:M,aiChatMessages:b}),T&&p.jsx(G2,{player:T,isMyTurn:g.players[M]?.id===0&&N===Oe.PLAYING,onCardClick:G=>{r.oneClickPlay?_.executePlayCard(0,G):_.setSelectedCardId(G===O?null:G)},onDragPlay:G=>_.executePlayCard(0,G),onPlayConfirm:G=>_.executePlayCard(0,G),selectedCardId:O,highlightedCardIds:x.highlightedCardIds,cardMarkers:y,oneClickPlay:r.oneClickPlay,canInteract:!x.disabled,actionLabel:x.label,mianZhangCard:$}),p.jsxs("div",{className:"fixed top-4 right-4 z-[200] flex gap-3",children:[p.jsx("button",{onClick:A,className:"text-[#e6c278] bg-black/40 p-2 rounded-full border border-[#5c4025] hover:bg-[#1a0f0a] hover:border-[#c5a059] backdrop-blur-md transition-all shadow-gem-btn w-12 h-12 flex items-center justify-center group",title:"Recorder",children:p.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:""})}),p.jsx("button",{onClick:C,className:"text-[#8c6239] bg-black/40 p-2 rounded-full border border-[#3e2b22] hover:bg-[#1a0f0a] hover:border-[#c5a059] hover:text-[#c5a059] backdrop-blur-md transition-all shadow-gem-btn w-12 h-12 flex items-center justify-center group",title:"Menu",children:p.jsx("span",{className:"text-xl group-hover:rotate-90 transition-transform duration-500",children:""})})]})]}),g.pendingRisk&&p.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/30 backdrop-blur-sm p-4",children:p.jsxs("div",{className:"pointer-events-auto bg-black/60 backdrop-blur-xl border border-white/10 p-8 w-full max-w-sm rounded-lg shadow-[0_20px_50px_rgba(0,0,0,0.8)] flex flex-col items-center text-center relative animate-fade-in ring-1 ring-white/5",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#ef4444] to-transparent opacity-80"}),p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx("div",{className:"text-[#ef4444] text-3xl animate-pulse drop-shadow-[0_0_10px_rgba(239,68,68,0.6)]",children:"!"}),p.jsx("h3",{className:"text-xl text-[#fca5a5] font-serif font-bold tracking-widest drop-shadow-md",children:g.pendingRisk.assessment.riskLevel===ue.PENALTY?d("risk_penalty"):d("risk_warning")})]}),p.jsx("div",{className:"text-[#d4af37] text-xs uppercase tracking-[0.2em] mb-6 border-b border-white/10 pb-2 w-full opacity-80",children:g.pendingRisk.assessment.ruleId}),p.jsx("p",{className:"text-gray-200 mb-8 leading-relaxed font-serif text-base px-2 drop-shadow-sm",children:g.pendingRisk.assessment.message}),p.jsxs("div",{className:"flex flex-col w-full gap-4",children:[p.jsx("button",{onClick:()=>_.executePlayCard(0,g.pendingRisk.cardId,!0),className:"w-full py-4 bg-gradient-to-br from-[#d4af37] via-[#b48a26] to-[#8c6239] text-[#1a0505] shadow-[0_0_20px_rgba(212,175,55,0.3)] border border-[#fcd34d]/50 font-serif font-bold tracking-[0.2em] text-sm hover:brightness-110 active:scale-95 transition-all rounded-[4px]",children:d("risk_confirm_penalty")}),p.jsx("button",{onClick:()=>_.setPendingRisk(null),className:"w-full py-4 bg-white/5 border border-white/20 text-gray-300 hover:text-white hover:bg-white/10 backdrop-blur-md font-serif font-bold tracking-[0.2em] text-sm active:scale-95 transition-all rounded-[4px]",children:d("cancel")})]})]})}),N===Oe.DEALING&&p.jsxs("div",{className:`fixed inset-0 z-[300] flex text-[#c5a059] font-serif overflow-hidden transition-all duration-1000 ${e.layout.backgroundClass}`,children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#1a0505] via-transparent to-black opacity-80 pointer-events-none z-0"}),p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_20%,rgba(0,0,0,0.8)_80%,#000_100%)] pointer-events-none z-[1]"}),p.jsx("div",{className:"absolute inset-0 z-0 flex flex-row-reverse justify-between items-start pl-16 md:pl-32 pr-8 py-10 pointer-events-none opacity-40 mix-blend-screen overflow-visible",children:["","","","","","","","","","","",""].reduce((G,w,U,P)=>(U%2===0&&G.push(`${w}${P[U+1]}`),G),[]).map((G,w)=>p.jsx("div",{className:"opacity-0 animate-fog-reveal h-full text-[#e6c278] font-calligraphy leading-loose select-none border-l border-[#5c4025]/5 pl-2 whitespace-nowrap",style:{animationDelay:`${w*.15}s`,animationFillMode:"forwards",textShadow:"0 0 5px rgba(0,0,0,0.5)",writingMode:"vertical-rl",textOrientation:"upright",fontSize:"4vh"},children:G},w))}),p.jsx("div",{className:"absolute top-6 left-6 md:top-8 md:left-8 z-10 flex flex-col items-center gap-6",children:p.jsxs("div",{className:"flex flex-col items-center gap-4 group",children:[p.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-96 bg-gradient-to-br from-orange-500/20 via-red-500/10 to-transparent blur-3xl opacity-60 animate-pulse-slow pointer-events-none"}),p.jsxs("div",{className:"flex flex-col items-center gap-2 font-calligraphy text-7xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-b from-[#ffd700] via-[#ffaa00] to-[#ff4500] select-none",style:{filter:"drop-shadow(0 0 15px rgba(255,140,0,0.6))",textShadow:"4px 4px 0px rgba(0,0,0,0.5)"},children:[p.jsx("span",{children:""}),p.jsx("span",{children:""})]}),p.jsx("div",{className:"transform hover:scale-105 transition-transform duration-500 mt-4",children:p.jsx(rI,{})})]})}),p.jsxs("div",{className:"absolute top-1/3 bottom-0 left-0 right-0 z-20 flex flex-col items-center justify-center gap-12 pointer-events-none",children:[p.jsxs("div",{className:"flex flex-col gap-6 items-center pointer-events-auto",children:[p.jsx(e0,{onClick:S,children:d(o?"continueGame":"enterGame")}),!o&&p.jsx(e0,{onClick:()=>c.setShowSocialModal(!0),className:"opacity-90 grayscale-[0.2] hover:grayscale-0",children:d("netBattle")}),o&&p.jsx("button",{onClick:async()=>{await jn.auth.logout(),l(void 0),_.exitToTitle()},className:"text-sm text-[#8c6239] hover:text-[#d4af37] underline decoration-[#3e2b22] tracking-[0.2em] uppercase transition-colors mt-2",children:d("signOut")})]}),p.jsx("div",{className:"w-full px-8 flex justify-center pointer-events-auto",children:p.jsx("div",{className:"flex gap-4 md:gap-8 p-4 bg-black/40 backdrop-blur-md rounded-full border border-[#3e2b22] shadow-[0_10px_40px_rgba(0,0,0,0.8)] hover:bg-black/60 transition-colors",children:n.map(G=>{const w=e.id===G.id,U=R(G.id);return p.jsxs("button",{onClick:()=>t(G.id),className:`
                                            w-14 h-14 md:w-16 md:h-16 rounded-full border-2 transition-all duration-500 shadow-xl relative group overflow-hidden
                                            bg-gradient-to-br ${U}
                                            ${w?"scale-110 shadow-[0_0_25px_rgba(212,175,55,0.6)] ring-2 ring-[#ffd700] brightness-110 -translate-y-2":"opacity-70 hover:opacity-100 hover:-translate-y-1 grayscale-[0.5] hover:grayscale-0"}
                                        `,title:d(`skin_${G.id.replace("_scholar","").replace("_mystery","")}`)||G.name,children:[w&&p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#ffd700]/30 to-transparent pointer-events-none"}),p.jsx("div",{className:"absolute top-0 right-0 w-2/3 h-2/3 bg-gradient-to-bl from-white/20 to-transparent rounded-full blur-[1px]"})]},G.id)})})})]})]}),N===Oe.SCORING&&p.jsx(F2,{results:g.roundResults,onClose:()=>{},onNextRound:_.startNextRound,onHome:_.exitToTitle,onQuit:E,bankerId:L,language:r.language,players:g.players}),c.showSettings&&p.jsx($2,{onClose:()=>c.setShowSettings(!1),onOpenAdmin:()=>{c.setShowSettings(!1),a("ADMIN")},settings:r,initialTab:c.activeSettingsTab,gameData:{recordedCards:g.recordedCards,faceUpPlayedCardIds:g.faceUpPlayedCardIds,gameHistory:g.gameHistory}}),c.showSocialModal&&p.jsx(oI,{onClose:()=>c.setShowSocialModal(!1),onLoginSuccess:G=>{c.setShowSocialModal(!1),l(G),_.startGame(G)}}),p.jsx(lI,{language:r.language})]})},cI=()=>(rc("App Root Mounted."),p.jsx(f2,{children:p.jsx(Hw,{children:p.jsx(uI,{})})}));var dI={};const fI=!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function t0(e){const t=window.isSecureContext;if("serviceWorker"in navigator&&t){if(new URL(dI.PUBLIC_URL||"",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{let i="";try{i=new URL("./sw.js",window.location.href).toString()}catch{i=`${window.location.origin}/sw.js`}fI?(pI(i),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")})):by(i)})}else t||console.warn("PWA features disabled: Application is running in an insecure context (HTTP via IP?). Use HTTPS or localhost to enable offline mode.")}function by(e,t){navigator.serviceWorker.register(e).then(n=>{n.onupdatefound=()=>{const i=n.installing;i!=null&&(i.onstatechange=()=>{i.state==="installed"&&(navigator.serviceWorker.controller?console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."):console.log("Content is cached for offline use."))})}}).catch(n=>{console.error("Error during service worker registration:",n)})}function pI(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(n=>{const i=n.headers.get("content-type");n.status===404||i!=null&&i.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(a=>{a.unregister().then(()=>{window.location.reload()})}):by(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}const Ca=(e,t="info")=>{const n=window;n.logToScreen?n.logToScreen(e,t):console[t](e)};Ca("index.tsx: Script execution started.");const $r=window;$r.bootTimeout&&(clearTimeout($r.bootTimeout),$r.bootTimeout=null,Ca("Watchdog cleared. Starting React mount..."));class hI extends Le.Component{state={hasError:!1,error:null};props;constructor(t){super(t),this.props=t}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){Ca("React Boundary Caught: "+t.message,"error"),console.error(n)}render(){return this.state.hasError?p.jsxs("div",{style:{padding:"40px",color:"#ff6b6b",fontFamily:"monospace",background:"#1a0505",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[p.jsx("h1",{style:{fontSize:"24px",marginBottom:"20px"},children:"Application Error"}),p.jsx("pre",{style:{background:"rgba(0,0,0,0.3)",padding:"20px",borderRadius:"4px",maxWidth:"80vw",overflow:"auto"},children:this.state.error?.message}),p.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",background:"#8c1c0b",color:"white",border:"1px solid #ff6b6b",cursor:"pointer"},children:"Reload"})]}):this.props.children}}const n0=()=>{const e=document.getElementById("root");if(!e){Ca("FATAL: #root element not found!","error");return}try{if(!lp.createRoot)throw new Error("ReactDOM.createRoot is undefined. Failed to load React DOM.");lp.createRoot(e).render(p.jsx(hI,{children:p.jsx(cI,{})})),Ca("React Root Rendered."),setTimeout(()=>{const n=document.getElementById("app-loader");n&&(n.style.opacity="0",setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},500)),"requestIdleCallback"in window?window.requestIdleCallback(()=>{t0()}):setTimeout(()=>{t0()},5e3)},500)}catch(t){Ca("Mount Exception: "+(t.message||String(t)),"error"),console.error(t)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n0):n0();
//# sourceMappingURL=index-BMtEe6k5.js.map
